{"id":"personal-homepage-022","title":"Add thumbnail generation and metadata for local videos","description":"Enhance local video browser with thumbnails and metadata via ffmpeg.\n\n**Based on:** docs/research/video-player-integration.md (Phase 4)\n\n**Implementation:**\n1. Create `lib/video-utils.ts` - ffmpeg/ffprobe wrappers\n2. Create `app/api/video/thumbnail/route.ts` - generate on demand\n3. Create `app/api/video/metadata/route.ts` - duration, codec, resolution\n4. Auto-generate thumbnails when browsing local videos\n5. Cache thumbnails in .thumbnails folder\n6. Display duration in video list\n\n**FFmpeg Commands:**\n```bash\n# Thumbnail at 3 seconds, 320px wide\nffmpeg -ss 00:00:03 -i input.mp4 -frames:v 1 -vf \"scale=320:-1\" thumb.jpg\n\n# Duration in seconds\nffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 video.mp4\n```\n\n**Metadata to Extract:**\n- Duration, resolution, codec\n- File size, bitrate\n- Creation date if available\n\n**Files to create:**\n- `lib/video-utils.ts`\n- `app/api/video/thumbnail/route.ts`\n- `app/api/video/metadata/route.ts`","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T13:01:13.889425026-05:00","updated_at":"2026-01-10T19:30:22.622815765-05:00","closed_at":"2026-01-10T19:30:22.622815765-05:00","close_reason":"Implemented video thumbnail generation and metadata extraction using ffmpeg/ffprobe"}
{"id":"personal-homepage-06o","title":"Add git status indicators to file tree","description":"Port git status indicators from TabzChrome\n\nFeatures:\n- Color-coded dots next to files:\n  - Blue: staged\n  - Yellow: modified\n  - Green: untracked\n- Folder indicators for containing modified files (smaller, semi-transparent)\n- Fetch git status from backend\n\nReference: TabzChrome/extension/dashboard/components/files/FileTree.tsx (lines 343-389)","notes":"completed_at: 2026-01-10T18:58:53-05:00\ncommit: 57d150a","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T01:13:12.130720032-05:00","created_by":"marci","updated_at":"2026-01-10T18:58:58.517878429-05:00","closed_at":"2026-01-10T18:58:58.517878429-05:00","close_reason":"Implemented git status indicators in file tree with color-coded dots"}
{"id":"personal-homepage-0d3","title":"[Kanban Migration] Wire up beads CLI integration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:10:31.227550982-05:00","created_by":"matt","updated_at":"2026-01-05T09:12:30.10544978-05:00","closed_at":"2026-01-05T09:12:30.10544978-05:00","close_reason":"Implemented: Added beads CLI API routes for Kanban board integration","dependencies":[{"issue_id":"personal-homepage-0d3","depends_on_id":"personal-homepage-9y5","type":"blocks","created_at":"2026-01-04T23:10:57.349502766-05:00","created_by":"matt"}]}
{"id":"personal-homepage-0lp","title":"Create FilesContext for state management","description":"## Task\nCreate FilesContext to manage file browser state.\n\n## State\n- Current directory\n- Selected file\n- File tree data\n- Loading/error states\n\n## Location\n- app/contexts/FilesContext.tsx","notes":"## Retro\n\n### Verification Complete\n- FilesContext was already fully implemented with all required features\n- Exports: useFilesContext hook + all types (FileNode, TreeNode, FilteredTree, FilteredFilesResponse, Plugin, PluginsData, OutdatedPlugin, PluginHealthData, OpenFile, FilesContextType)\n- localStorage persistence for: files-tree-path, files-filter, file-favorites\n- All API routes exist and match context fetch calls\n- Files section correctly wraps content with FilesProvider\n- Build passes with no TypeScript errors\n\n### No Changes Needed\nThis was a verification task - the implementation was already complete and working.\n\n### Dependent Issue\npersonal-homepage-7xc (Create Files section page) can now proceed.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T23:35:16.466764558-05:00","updated_at":"2026-01-20T23:56:30.942846907-05:00","closed_at":"2026-01-20T23:56:30.942846907-05:00","close_reason":"Done: Verified FilesContext is complete with all exports, types, localStorage persistence, and API integration. Build passes.","labels":["files","migration","ready"]}
{"id":"personal-homepage-0plv","title":"Phase 3: Wire agent spawn commands to backends","description":"Update `lib/ai/*.ts` to accept SavedAgent configs and build the full CLI spawn command.\n\n## Core Concept\n\nAn agent is a saved launch command. The backend just needs to:\n1. Take the agent's `spawnCommand` array\n2. Set working dir (agent.workingDir || globalSettings.workingDir)\n3. Append the user's prompt\n4. Spawn the process\n\n## Data Model\n\n```typescript\ninterface SavedAgent {\n  id: string\n  name: string\n  backend: 'claude' | 'codex' | 'gemini' | 'copilot'\n  workingDir?: string  // Optional, overrides global\n  spawnCommand: string[]  // Pre-built CLI args\n}\n```\n\n## Example Flow\n\nUser selects \"Code Review Agent\" and sends \"Review this PR\":\n\n```typescript\nconst agent = {\n  backend: 'claude',\n  workingDir: '/home/user/project',\n  spawnCommand: ['--model', 'opus', '--permission-mode', 'acceptEdits', '--add-dir', '/shared']\n}\n\n// lib/ai/claude.ts builds:\nconst args = ['-p', 'Review this PR', ...agent.spawnCommand]\nconst cwd = agent.workingDir || globalWorkingDir\nspawn('claude', args, { cwd })\n```\n\n## Files to Update\n\n1. `lib/ai/claude.ts` - Accept SavedAgent, use spawnCommand + workingDir\n2. `lib/ai/codex.ts` - Same pattern\n3. `lib/ai/gemini.ts` - Same pattern\n4. `app/api/ai/chat/route.ts` - Pass agent config to backends\n\n## Agent Editor (Simple)\n\nA basic UI to create/edit saved agents:\n- Name, avatar\n- Backend selector\n- Working dir (optional)\n- Spawn command builder (or raw text input for power users)\n\nThis can be a modal in AI Workspace or a dedicated settings page. Keep it simple - advanced users can edit agent.json directly.","notes":"## Retro\n- What worked: Clear task breakdown made implementation straightforward\n- What was unclear: Nothing significant - the issue had good examples","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T15:39:50.419858999-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T18:12:41.369039772-05:00","closed_at":"2026-01-28T18:12:41.369039772-05:00","close_reason":"Added spawnCommand support to ChatSettings and backends (claude.ts, codex.ts, gemini.ts). Updated agent types and loader to load spawnCommand from agent.json.","labels":["ready"],"dependencies":[{"issue_id":"personal-homepage-0plv","depends_on_id":"personal-homepage-dah8","type":"blocks","created_at":"2026-01-28T15:40:24.115691897-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-0wq","title":"Add drag and drop files to terminal","description":"Port drag \u0026 drop from TabzChrome\n\nFeatures:\n- Draggable file/folder nodes\n- Supports plain text and custom MIME type (application/x-tabz-file-path)\n- Drop on terminal inserts file path\n- Useful for quick file references in commands\n\nReference: TabzChrome/extension/dashboard/components/files/FileTree.tsx (lines 965-972)","notes":"\ncompleted_at: 2026-01-10T19:18:17-05:00\ncommit: 49cf328","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T01:13:24.205791621-05:00","created_by":"marci","updated_at":"2026-01-10T19:18:24.211911897-05:00","closed_at":"2026-01-10T19:18:24.211911897-05:00","close_reason":"Implemented drag and drop for file tree with text/plain and application/x-tabz-file-path MIME types"}
{"id":"personal-homepage-13o","title":"Add sub-category grouping to sidebar navigation","description":"As more sections are added, the sidebar is getting crowded. Add the ability to organize sections into collapsible sub-categories/groups.\n\nProposed categories:\n- Personal (Profile, Settings, Setup)\n- Development (API Playground, Jobs, AI Workspace)\n- Entertainment (Daily Feed, potentially media players)\n- Finance (Paper Trading/Stocks)\n- Productivity (Quick Notes, Tasks, Bookmarks)\n- Information (Weather, Search Hub, World Clocks)\n\nFeatures to consider:\n- Collapsible category headers\n- Drag-and-drop to reorder sections within categories\n- Settings to customize which category each section belongs to\n- Remember collapsed/expanded state in localStorage\n- Visual distinction between categories (subtle separators or indentation)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T22:25:52.386948054-05:00","created_by":"matt","updated_at":"2026-01-05T09:58:20.292153847-05:00","closed_at":"2026-01-05T09:58:20.292153847-05:00","close_reason":"Implemented sub-category grouping for sidebar navigation with 6 collapsible categories, category customization in Settings, and localStorage persistence"}
{"id":"personal-homepage-146","title":"Fix toggle switch styling - missing inner circle","description":"The eye icon toggle switch in Setup wizard step 2 works functionally but displays as an empty oval without the inner circle/knob. The Switch component styling needs to be fixed.","notes":"conductor_session: ctt-conductor-f438d3fa\nworker_session: ctt-worker-146-f1bc8d6a\nstarted_at: 2026-01-09T13:56:37-05:00","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-05T16:36:03.416207719-05:00","updated_at":"2026-01-09T13:58:49.211455425-05:00","closed_at":"2026-01-09T13:58:49.211455425-05:00","close_reason":"Fixed Switch component thumb visibility in dark mode by adding dark:data-[state=unchecked]:bg-foreground and dark:data-[state=checked]:bg-primary-foreground classes per shadcn/ui reference","labels":["setup-wizard","ui"]}
{"id":"personal-homepage-1a7j","title":"Projects: Add Agent Config tab for per-project agents","description":"Add a new tab to the project page showing agent configurations that apply to this project.\n\n## Context\nTies into personal-homepage-nlpj (agent config transparency). Once agents are file-based, projects can have their own agents/ folder.\n\n## Tasks\n- [ ] Add 'Agents' tab to project page tabs\n- [ ] Show agents from `{project}/agents/` directory if exists\n- [ ] Link to AI Workspace for editing (or inline edit if nlpj complete)\n- [ ] Show 'No agents configured' with 'Create Agent' CTA if empty\n\n## Dependencies\n- Benefits from nlpj (file-based agent config) but can show read-only view first\n\n## Acceptance Criteria\n- New Agents tab visible on project pages\n- Shows project-specific agent configurations\n- Clear path to create/edit agents","notes":"## Retro\n- Straightforward implementation following ProjectLinks pattern\n- Created API endpoint to scan agents/ dir and read agent.json + CLAUDE.md\n- Component shows model, temperature, personality badges\n- Collapsible system prompt preview\n- Empty states for both missing dir and empty dir cases\n- Build passes, lint config has worktree issue (unrelated)","status":"closed","priority":3,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-23T18:49:16.535246782-05:00","created_by":"GGPrompts","updated_at":"2026-01-25T20:24:56.311315741-05:00","closed_at":"2026-01-25T20:24:56.311315741-05:00","close_reason":"Done: Added Agents tab to project pages with API endpoint and component","labels":["agents","frontend","gate:codex-review","gate:test-runner","projects","ready"],"dependencies":[{"issue_id":"personal-homepage-1a7j","depends_on_id":"personal-homepage-nlpj","type":"blocks","created_at":"2026-01-23T18:49:27.129015388-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-1ca","title":"Fix JSON Parse Error in removeTracks when toggling like","description":"## Bug\n`removeTracks` in lib/spotify.ts:474 fails with \"Unexpected end of JSON input\" when toggling like.\n\n## Root Cause Investigation\n- Check if DELETE request returns empty body\n- Spotify API may return 200 with no JSON body\n- Handle empty response gracefully\n\n## Files\n- lib/spotify.ts:474 (removeTracks function)","notes":"## Retro\nStraightforward fix - the issue description was accurate and complete. Changed line 480 to trim whitespace before the empty check. Build passes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T23:34:57.744920591-05:00","updated_at":"2026-01-20T23:43:21.740476257-05:00","closed_at":"2026-01-20T23:43:21.740476257-05:00","close_reason":"Fixed: trimmed response text before empty check to handle whitespace-only API responses","labels":["music-player","ready","spotify"]}
{"id":"personal-homepage-1e3","title":"codex-review: 1ca (JSON Parse Error)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-20T23:36:57.672906386-05:00","created_by":"GGPrompts","updated_at":"2026-01-20T23:57:25.569690869-05:00","closed_at":"2026-01-20T23:57:25.569690869-05:00","close_reason":"Codex review passed: Fix correctly handles whitespace-only API responses by trimming before empty check","labels":["codex-review","gate"],"dependencies":[{"issue_id":"personal-homepage-1e3","depends_on_id":"personal-homepage-1ca","type":"blocks","created_at":"2026-01-20T23:37:11.046474369-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-1gi","title":"Video Player: Replace mock data with real YouTube API data","description":"The Video Player has several placeholder/mock components:\n1. Chat discussion under the main video (fake comments)\n2. Next.js course component with fake video list\n\nAfter researching YouTube API capabilities, wire up real data or remove non-functional placeholders.","notes":"conductor_session: ctt-conductor-f438d3fa\nworker_session: ctt-worker-1gi-6b7f21f9\nstarted_at: 2026-01-09T13:56:37-05:00","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T16:36:11.255498235-05:00","updated_at":"2026-01-09T14:03:55.565565477-05:00","closed_at":"2026-01-09T14:03:55.565565477-05:00","close_reason":"feat(video-player): replace mock data with real YouTube API data","labels":["ui","video-player","youtube"],"dependencies":[{"issue_id":"personal-homepage-1gi","depends_on_id":"personal-homepage-3nx","type":"blocks","created_at":"2026-01-05T16:36:11.264906411-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-1hp","title":"Video Player: yt-dlp download integration","description":"Add download functionality to the Video Player section using yt-dlp, with visual options for format selection. Allow downloading audio-only for building a local music collection.","design":"## Features\n1. Download button on video search results and current video\n2. Format selection modal with options:\n   - Audio only: MP3, M4A, OPUS, FLAC\n   - Video: MP4, WebM (various qualities)\n   - Best audio/video automatic selection\n3. Quality presets (Best, Good, Small file size)\n4. Download progress indicator\n5. Download history/queue\n\n## Implementation\n- Create API route that spawns yt-dlp process\n- Use Server-Sent Events or WebSocket for progress updates\n- Configure download directory (default: ~/Music or ~/Downloads)\n- Parse yt-dlp output for progress percentage\n\n## yt-dlp commands\n- Audio only: `yt-dlp -x --audio-format mp3 \u003curl\u003e`\n- Best audio: `yt-dlp -f bestaudio \u003curl\u003e`\n- Video: `yt-dlp -f 'bestvideo[height\u003c=1080]+bestaudio' \u003curl\u003e`\n\n## UI\n- Download icon button on each video result\n- Modal with format/quality radio buttons\n- Progress bar during download\n- Toast notification on completion\n- Link to open download folder","acceptance_criteria":"- Can download audio-only from YouTube videos\n- Format selection (MP3, M4A, etc.)\n- Quality/size options\n- Progress feedback during download\n- Downloaded files saved to configurable location\n- Works with YouTube search results in Video Player","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T15:21:02.289190665-05:00","updated_at":"2026-01-05T15:53:44.900176894-05:00","closed_at":"2026-01-05T15:53:44.900176894-05:00","close_reason":"Implemented yt-dlp download integration with format selection modal, SSE progress, and download buttons","labels":["downloads","video-player","youtube","yt-dlp"]}
{"id":"personal-homepage-1kd","title":"Fix Device Selector not loading on initial startup","description":"## Bug\nPlayback devices do not appear on initial load, requires manual refresh.\n\n## Investigation\n- Check when getDevices() is called\n- May need to wait for Spotify SDK ready event\n- Check race condition between auth and device fetch\n\n## Files\n- hooks/useSpotifyPlayer.ts (device management)\n- app/sections/music-player.tsx (initial load)","notes":"## Retro\n- The root cause was clear from the issue description - race condition between SDK ready and device API\n- Fix involved:\n  1. Changed useEffect dependency to require isReady before fetching devices\n  2. Increased retry count with exponential backoff for more robustness\n  3. Added consistent logging for debugging\n- Total retry window went from 2.5s (5×500ms) to ~15s with exponential backoff\n- No discovered work - straightforward fix","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T23:34:58.647728815-05:00","updated_at":"2026-01-20T23:47:31.588751024-05:00","closed_at":"2026-01-20T23:47:31.588751024-05:00","close_reason":"Done: Fixed device selector race condition by requiring SDK ready before device fetch and adding exponential backoff retry logic","labels":["music-player","ready","spotify"]}
{"id":"personal-homepage-1le","title":"Kanban: add ability to create new beads issues directly from board","description":"The Kanban page should have a way to add new issues directly, similar to how Scratchpad works. Could integrate with the beads kanban board or have an \"Add Issue\" button.","status":"deferred","priority":2,"issue_type":"feature","created_at":"2026-01-21T20:41:00.037337648-05:00","updated_at":"2026-01-21T20:47:36.267746415-05:00","labels":["beads","kanban"]}
{"id":"personal-homepage-1nv","title":"Music Audit: Fix 'no list was loaded' SDK error","description":"Spotify SDK throws 'Cannot perform operation; no list was loaded' when controlling playback. This happens when trying to play/pause without a loaded queue. Add proper state checks before playback operations.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-09T14:43:18.228174884-05:00","created_by":"marci","updated_at":"2026-01-10T18:57:30.526412959-05:00","closed_at":"2026-01-10T18:57:30.526412959-05:00","close_reason":"Fixed SDK 'no list was loaded' error by adding isActive state checks and REST API fallback"}
{"id":"personal-homepage-1tw","title":"Music Player: Device not available on initial load","description":"When loading the app, trying to play a song shows \"device not available\". User must manually go to the device picker in the header and click refresh for \"personal-homepage\" device to appear and work.\n\nLikely issues:\n1. Spotify Web Playback SDK not fully initialized before playback attempted\n2. Device list not auto-refreshing after SDK registers the device\n3. Race condition between SDK ready state and UI availability","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T16:36:33.63956527-05:00","updated_at":"2026-01-08T13:03:24.488408241-05:00","closed_at":"2026-01-08T13:03:24.488408241-05:00","close_reason":"Fixed SDK race condition with retry logic and auto-device activation","labels":["music-player","spotify","ux"]}
{"id":"personal-homepage-1vt","title":"Fix Spotify SDK \"no list was loaded\" error","description":"## Bug\nSpotify SDK throws \"Cannot perform operation; no list was loaded\" when controlling playback.\n\n## Investigation\n- Check if playlist/album context is required\n- May need to set playback context before controls work\n- Check SDK initialization sequence\n\n## Files\n- hooks/useSpotifyPlayer.ts (SDK initialization)\n- components/SpotifyPlayer.tsx (SDK player)","notes":"## Retro\n- Root cause: SDK `isActive` flag only means \"has player state\" not \"has loaded context\"\n- Fix: Added `hasContext` state tracked from `state.context.uri` in player_state_changed\n- Control functions (togglePlay, skip, seek) now check `isActive \u0026\u0026 hasContext` before SDK calls\n- When no context, gracefully falls back to REST API which can resume last played content\n- No breaking changes - `hasContext` is additive to SpotifyPlayerState interface","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T23:35:00.460096823-05:00","updated_at":"2026-01-20T23:50:16.565928694-05:00","closed_at":"2026-01-20T23:50:16.565928694-05:00","close_reason":"Done: Added hasContext state tracking and proactive SDK fallback to REST API","labels":["music-player","ready","spotify"]}
{"id":"personal-homepage-246","title":"GATE: User approval for TabzChrome code removal","description":"## Gate\nManual approval required before removing any code from TabzChrome.\n\n## Prerequisites\n- Files section fully working in personal-homepage\n- All file operations tested\n- User confirms migration is complete\n\n## Action\nRun `bd gate resolve` after user approval.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:35:19.281399588-05:00","updated_at":"2026-01-21T00:53:11.416424367-05:00","closed_at":"2026-01-21T00:53:11.416424367-05:00","close_reason":"Not needed - decided not to remove TabzChrome code","labels":["files","gate","human"],"dependencies":[{"issue_id":"personal-homepage-246","depends_on_id":"personal-homepage-7xc","type":"blocks","created_at":"2026-01-20T23:35:30.683028807-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-29y","title":"Copy FileTree and FileViewer components from TabzChrome","description":"## Task\nCopy file navigation components from TabzChrome to personal-homepage.\n\n## Components\n- FileTree.tsx - Tree navigation component\n- FileViewer.tsx - Syntax-highlighted file viewer\n\n## Requirements\n- Match glass-dark aesthetic from docs/design-system.md\n- Keep TabzChrome code intact (copy, not move)\n- Add to app/components/files/","notes":"## Retro\n- Components already existed and were well-implemented\n- FileTree.tsx uses terminal-glow on header, proper selection styling, keyboard nav, git status indicators, lazy loading\n- FileViewer.tsx already uses glass-dark class, has tabs with pin/preview, syntax highlighting with oneDark theme\n- Parent files.tsx wraps FileTree in glass-dark container\n- All data-tabz-* attributes present for TabzChrome integration\n- Build passes successfully","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T23:35:15.527878552-05:00","updated_at":"2026-01-20T23:51:48.29466865-05:00","closed_at":"2026-01-20T23:51:48.29466865-05:00","close_reason":"Verified: FileTree.tsx and FileViewer.tsx already exist with glass-dark styling, terminal-glow headers, TabzChrome attributes, keyboard navigation, git status indicators, and syntax highlighting. Build passes.","labels":["files","migration","ready"]}
{"id":"personal-homepage-2a5","title":"Extract YouTube links from ggprompts-next news pages for Video Player seed data","description":"The ~/projects/ggprompts-next project has generated news pages that contain YouTube video links. Extract these to seed the Video Player with real content.\n\n**Tasks:**\n1. Scan ggprompts-next for YouTube URLs in generated content\n2. Extract video IDs and any associated metadata (title, context)\n3. Create a seed data file for the Video Player\n4. Optionally fetch video metadata via YouTube oEmbed (no API key needed)\n\n**Files to Check:**\n- Look for .md, .mdx, or .json files with youtube.com or youtu.be links\n- Check any news/articles/posts directories\n- May be in frontmatter or inline content\n\n**Output Format:**\nJSON array of videos with:\n- youtubeId\n- title (from context or fetched)\n- category/tag (from source page context)\n- sourceFile (where it was found)\n\n**Integration:**\n- Replace mock `recommendations` array in video-player.tsx\n- Or create /api/videos/seed endpoint\n- Could become \"Recommended\" or \"Saved\" videos section","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T12:38:09.371800666-05:00","updated_at":"2026-01-05T12:55:47.953866308-05:00","closed_at":"2026-01-05T12:55:47.953866308-05:00","close_reason":"Implemented: YouTube seed data extracted from ggprompts-next, video-player.tsx updated with real recommendations"}
{"id":"personal-homepage-2bx","title":"Add TTS/Read Aloud for file content","description":"Port TTS features from TabzChrome\n\nFeatures:\n- Read Aloud button in file viewer toolbar\n- Read Aloud option in context menu\n- Support for short text (direct playback) and long text (MP3 generation)\n- Customizable voice, rate, pitch settings\n- 12 neural voices (en-US, en-GB, en-AU)\n- Content reading settings separate from main audio settings\n\nRequires TabzChrome backend endpoints:\n- /api/audio/generate (POST) - Generate MP3\n- /api/audio/speak (POST) - Direct playback\n\nReference: TabzChrome/extension/dashboard/sections/Files.tsx (lines 183-254)","notes":"completed_at: 2026-01-10T19:19:49-05:00\ncommit: 90eaa78","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T01:12:59.739307907-05:00","created_by":"marci","updated_at":"2026-01-10T19:19:51.134139118-05:00","closed_at":"2026-01-10T19:19:51.134139118-05:00","close_reason":"Implemented TTS/Read Aloud: API route, FileViewer toolbar button, FileTree context menu option"}
{"id":"personal-homepage-2di","title":"Implement Radio Browser API for Music Player","description":"Add free internet radio streaming using Radio Browser API as the quickest win for the Music Player.\n\n**Based on:** docs/research/music-player-integration.md (Phase 2)\n\n**Implementation:**\n1. Create `app/api/radio/search/route.ts` - proxy to Radio Browser API\n2. Create `hooks/useRadioStations.ts` - search, browse by genre/country\n3. Add Radio tab to Music Player section\n4. Native `\u003caudio\u003e` element for playback (no SDK needed)\n5. Favorites stored in localStorage\n\n**API Endpoints to wrap:**\n- `/json/stations/search` - Advanced search\n- `/json/stations/bytag/{tag}` - Browse by genre\n- `/json/stations/topclick` - Popular stations\n\n**UI Components:**\n- Search input with genre/country filters\n- Station cards with favicon, name, country, bitrate\n- Play/stop controls\n- Favorites toggle\n\n**Why first:** No auth required, 30K+ stations, low complexity.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T13:00:33.986601021-05:00","updated_at":"2026-01-05T15:49:38.951528186-05:00","closed_at":"2026-01-05T15:49:38.951528186-05:00","close_reason":"Implemented: Radio Browser API integration for Music Player with search, filters, favorites, and native audio playback"}
{"id":"personal-homepage-2ey","title":"Agent Cards: Floating agent button for sections","description":"Add optional floating assistant button to sections. Shows agent avatar. Click opens mini-chat popover. Section passes its context to agent.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:25:08.340120597-05:00","created_by":"marci","updated_at":"2026-01-09T01:44:40.418045769-05:00","closed_at":"2026-01-09T01:44:40.418045769-05:00","close_reason":"Created FloatingAgentButton component with glass styling, pulse/glow on hover, avatar display, and agentId prop","dependencies":[{"issue_id":"personal-homepage-2ey","depends_on_id":"personal-homepage-9nq","type":"blocks","created_at":"2026-01-08T18:25:40.248226681-05:00","created_by":"marci"}]}
{"id":"personal-homepage-2gs","title":"Fix Analytics page showing incorrect token usage","description":"## Bug\nAnalytics page shows 376.4k total tokens for last 7 days, but Claude Code /stats shows much higher usage:\n\n**Claude Code /stats (Last 7 days):**\n- Opus 4.5 (94.2%): In: 1.7m, Out: 282.2k\n- Haiku 4.5 (3.3%): In: 67.4k, Out: 441\n- Sonnet 4.5 (2.5%): In: 51.7k, Out: 654\n\nTotal should be ~2.1M tokens, not 376.4k.\n\n## Investigation\n- Check how Analytics page calculates token usage\n- Verify data source matches Claude Code stats\n- May be reading from wrong file or incorrect time range\n- Check if only counting output tokens or missing input tokens\n\n## Files\n- app/sections/analytics.tsx\n- Related data fetching hooks/API","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:58:44.290893381-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:59:12.037159979-05:00","closed_at":"2026-01-21T00:59:12.037159979-05:00","close_reason":"Duplicate of b5y","labels":["analytics","ui"]}
{"id":"personal-homepage-2ld","title":"Kanban: Enhance done column with completion metadata","description":"The done column shows completed issues but lacks useful context like when it was completed, associated commits, and outcome notes. The data exists in beads but isn't displayed.","design":"## Current State\n\nDone column shows:\n- Issue title\n- (that's about it)\n\n## Available Data (already in beads)\n\n| Field | Available | Currently Shown |\n|-------|-----------|----------------|\n| `closed_at` | ✅ | ❌ |\n| `updated_at` | ✅ | ❌ |\n| `notes` | ✅ (often null) | ❌ |\n| `external_ref` | ✅ (often null) | ❌ |\n| `labels` | ✅ | ❌ |\n| `issue_type` | ✅ | ❌ |\n\n## Proposed UI Enhancements\n\n### Done Card Display\n\n```\n┌─────────────────────────────────┐\n│ ✓ Video Player: yt-dlp...      │\n│ feature • video-player         │  ← type + labels\n│ Closed Jan 5, 3:53 PM          │  ← closed_at\n│ [abc1234]                      │  ← commit link (if external_ref set)\n│ \"Added download modal...\"      │  ← notes excerpt (if set)\n└─────────────────────────────────┘\n```\n\n### Hover/Expand for Details\n\n- Full notes text\n- Click commit SHA to open diff\n- Time since closed (\"2 hours ago\")\n\n## Implementation\n\n### 1. Update Kanban API to return full issue data\n\nEnsure `/api/beads/list` or equivalent returns:\n- `closed_at`\n- `notes`\n- `external_ref`\n- `labels`\n- `issue_type`\n\n### 2. Update Kanban card component\n\nIn `app/sections/kanban.tsx`:\n- Show `closed_at` formatted as relative time or date\n- Show `external_ref` as clickable commit link (if present)\n- Show truncated `notes` (if present)\n- Show labels as small badges\n- Show issue_type icon/badge\n\n### 3. Consider grouping/sorting done items\n\n- Group by date (Today, Yesterday, This Week, Older)\n- Or sort by closed_at desc (most recent first)\n- Maybe collapse older items\n\n## Related: Populate the data\n\nFor this to be useful, workers need to populate:\n- `notes` with outcome/summary\n- `external_ref` with commit SHA\n\nThis could be part of the `/close-issue` atomic command (see TabzChrome-56k):\n\n```bash\nCOMMIT=$(git rev-parse HEAD)\nbd update $ISSUE_ID --notes \"Implemented: $SUMMARY\" --external-ref \"$COMMIT\"\nbd close $ISSUE_ID\n```","acceptance_criteria":"1. Done column shows closed_at timestamp (relative or absolute)\n2. Done column shows commit link if external_ref is set\n3. Done column shows notes excerpt if notes field is populated\n4. Done column shows labels/type badges\n5. Most recently closed items appear first\n6. Older done items can be collapsed or paginated","notes":"prepared.skills: frontend:frontend-development, frontend:ui-styling\nprepared.files: app/sections/kanban.tsx, app/components/kanban/\nprepared.prompt: |\n  ## Feature: Kanban - Enhance done column with completion metadata\n  \n  ### Context\n  Add completion metadata (timestamps, duration, etc.) to done column.\n  \n  ### Key Files\n  - app/sections/kanban.tsx (kanban section)\n  - app/components/kanban/ (kanban components)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /frontend:ui-styling for UI enhancements\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-2ld","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T17:26:15.373135871-05:00","updated_at":"2026-01-11T03:30:33.826426777-05:00","closed_at":"2026-01-11T03:30:33.826426777-05:00","close_reason":"Added completion metadata to done column: duration display, closedAt tracking, interactive transcript badge","labels":["beads","kanban","ux"]}
{"id":"personal-homepage-2nn","title":"Replace Done column cards with compact list view","description":"The Done column shows full KanbanCards which take up too much vertical space when many issues are completed. Replace with a collapsible/paginated list view.\n\n## Current behavior\n- Done column renders KanbanCard for each completed issue\n- Has Show more pagination but cards still dominate the board\n- Each card shows title, priority, labels, duration, close reason, completion date\n\n## Expected behavior\n- Compact list rows (single line per issue: checkbox/icon + title + duration badge)\n- Collapsible sections by date (Today, This Week, Older)\n- Click to expand inline details or open modal\n- Total count badge in column header\n- Optional: Virtual scrolling for large lists\n\n## Design\n```\nDone (162)\n---------\nToday (3)\n  ✓ Fix hydration error         2h\n  ✓ Add animations              45m\n  ✓ Update docs                 1h\nThis Week (12)  [collapsed]\nOlder (147)     [collapsed]\n```\n\n## Files to modify\n- app/components/kanban/board/KanbanColumn.tsx (conditional rendering for done)\n- NEW: app/components/kanban/board/DoneList.tsx (compact list component)\n- app/components/kanban/board/KanbanCard.tsx (may need compact variant)","notes":"## Retro\n- Straightforward implementation following the spec\n- formatDuration was already defined in KanbanCard.tsx - copied instead of extracting (could be refactored to shared util later)\n- DoneList handles empty state internally with nice message\n- The prepared prompt was comprehensive and clear","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T02:06:56.105619044-05:00","updated_at":"2026-01-23T02:48:08.702169612-05:00","closed_at":"2026-01-23T02:48:08.702169612-05:00","close_reason":"Done: Replaced Done column KanbanCards with compact DoneList component featuring collapsible date-grouped sections (Today/This Week/Older), single-line rows with checkmark+title+duration, and smooth Framer Motion animations","labels":["kanban","ui","wave-2"]}
{"id":"personal-homepage-2ps","title":"Fix Spotify player next/previous not working from liked songs","description":"## Bug\nThe persistent Spotify music player at the bottom of the page cannot switch between songs. Pressing next/previous does nothing, even when on the Music page viewing Liked songs.\n\n## Steps to Reproduce\n1. Go to Music page\n2. Play from Liked songs\n3. Press next button on persistent player\n4. Nothing happens\n\n## Investigation\n- Check if playback context is being set correctly\n- May be related to recent 1vt fix (hasContext tracking)\n- Check if next/previous calls are reaching Spotify API\n\n## Files\n- components/PersistentMusicDrawer.tsx\n- hooks/useSpotifyPlayer.ts\n- lib/spotify.ts","notes":"## Retro\n- Root cause: The `handleSkipNext` and `handleSkipPrevious` functions required both `isActive \u0026\u0026 hasContext` before using SDK methods\n- Liked Songs has no context URI (it's a user library collection, not a playlist), so `hasContext` was always false\n- The SDK's `nextTrack()`/`previousTrack()` methods work on queue-based playback even without a context URI\n- Fix: Removed `hasContext` requirement from skip conditions - only `isActive` is needed\n- The worker prompt analysis was accurate and helpful","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:56:52.403480838-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T01:19:11.155041888-05:00","closed_at":"2026-01-21T01:19:11.155041888-05:00","close_reason":"Fixed: Removed hasContext requirement from skip next/previous functions - SDK methods work with queue-based playback even without context URI","labels":["gate:codex-review","music-player","spotify"]}
{"id":"personal-homepage-2y4","title":"AIDrawer: Smooth animations with Framer Motion","description":"Add polished animations for a premium feel:\n\n1. **Drawer transitions**\n   - Smooth expand/collapse (spring physics)\n   - Minimized bar slide\n   - Backdrop fade\n\n2. **Message animations**\n   - New message appear (fade + slide up)\n   - Streaming text reveal\n   - Tool use expand/collapse\n\n3. **Micro-interactions**\n   - Button hover states\n   - Input focus transitions\n   - Send button feedback\n\nUse Framer Motion. Keep animations snappy (200-300ms), not sluggish.","notes":"## Retro\n- Straightforward implementation following existing Framer Motion patterns\n- Used spring physics (stiffness: 400, damping: 35) for snappy feel\n- Added prefers-reduced-motion support throughout with useReducedMotion hook\n- TypeScript required `as const` assertions for animation variant types\n- Tool use block animations use custom expand/collapse with height: auto\n- FAB button has hover/tap states plus ping animation for notifications\n- Input focus state adds ring + shadow for clear visual feedback\n- Quick action buttons use staggerChildren for sequential reveal","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T23:41:08.280258751-05:00","updated_at":"2026-01-23T00:11:44.35638093-05:00","closed_at":"2026-01-23T00:11:44.35638093-05:00","close_reason":"Done: Added Framer Motion animations for AIDrawer - spring physics for drawer transitions, message animations with fade/slide, tool use expand/collapse, button hover/tap states, input focus transitions, prefers-reduced-motion support","labels":["ai-drawer","ui","wave-2"],"dependencies":[{"issue_id":"personal-homepage-2y4","depends_on_id":"personal-homepage-9y2","type":"blocks","created_at":"2026-01-22T23:41:08.282741574-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-2zr0","title":"Prompts Playground Phase 1: Foundation - model registry, dynamic panels, workspace picker","notes":"## Retro\n- What worked: Clean separation of model registry, dynamic panel system, and workspace picker\n- What was unclear: Next.js 16 build issue with pages-manifest.json unrelated to changes","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T22:47:59.610854639-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T23:38:23.558514853-05:00","closed_at":"2026-01-28T23:38:23.558514853-05:00","close_reason":"Done: Created model registry with Claude/GPT/Gemini models, ModelSelector with family colors, WorkspacePicker for project folders, refactored panels for dynamic add/remove, created DynamicPanelViewer and DynamicBrowserPanel components","dependencies":[{"issue_id":"personal-homepage-2zr0","depends_on_id":"personal-homepage-c1wu","type":"discovered-from","created_at":"2026-01-28T22:47:59.613087513-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-358","title":"Split Projects page into Local Projects and GitHub Activity","description":"The Projects page currently combines both local projects and GitHub repos, which becomes overwhelming with many repos.\n\nProposed split:\n- **Projects** → Focus on local projects only (~/projects/ directory)\n- **GitHub Activity** → Already exists separately, enhance to include full repo browsing\n\nImplementation tasks:\n- Remove GitHub integration from projects-dashboard.tsx\n- Keep local project scanning and display\n- Ensure GitHub Activity section has adequate repo browsing/filtering\n- Update navigation labels if needed\n- Consider what metadata/features each section needs independently","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-04T22:52:48.676743744-05:00","created_by":"matt","updated_at":"2026-01-05T11:32:36.870836934-05:00","closed_at":"2026-01-05T11:32:36.870836934-05:00","close_reason":"Deferred - local filter already added to Projects page, revisit later if needed","comments":[{"id":1,"issue_id":"personal-homepage-358","author":"matt","text":"Reference implementations to look at:\n\n1. **~/projects/portfolio-style-guides** - git-dashboard page with nice styling\n\n2. **~/projects/TabzChrome** - Source Control dashboard with:\n   - Auto commit message generation using Haiku\n   - Bulk sync operations (fetch/pull) for multiple projects at once\n\nThese could inform the GitHub Activity section enhancements or be merged into the local Projects view for git operations.","created_at":"2026-01-05T03:54:08Z"}]}
{"id":"personal-homepage-392","title":"Agent Cards: Create seed agents for key sections","description":"Create default agents using selector reference from docs/tabz-integration.md: Trading Assistant (stocks selectors), Music DJ (music-player selectors), Research Librarian (bookmarks + search-hub selectors), Weather Guide (weather selectors). Include personalities, suggested prompts, and section-specific selector tables in each agent's knowledge.","notes":"conductor_session: ctt-conductor-cfa5e311\nworker_session: ctt-personal-homepage-39-5cef5fa2\nstarted_at: 2026-01-09T14:10:36-05:00","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:25:21.575065304-05:00","created_by":"marci","updated_at":"2026-01-09T14:14:01.260383327-05:00","closed_at":"2026-01-09T14:14:01.260383327-05:00","close_reason":"Added 3 seed agents: Trading Assistant (stocks), Music DJ (music-player), Research Librarian (bookmarks + search-hub)","dependencies":[{"issue_id":"personal-homepage-392","depends_on_id":"personal-homepage-jjz","type":"blocks","created_at":"2026-01-08T18:25:40.561017535-05:00","created_by":"marci"},{"issue_id":"personal-homepage-392","depends_on_id":"personal-homepage-633","type":"blocks","created_at":"2026-01-08T18:25:40.662907682-05:00","created_by":"marci"}]}
{"id":"personal-homepage-3f5","title":"Add category editing and creation in Settings","description":"Currently Settings only allows reordering sections within categories, but categories themselves cannot be edited or created.\n\n**Current Limitations:**\n1. Cannot rename existing categories\n2. Cannot create new custom categories\n3. Cannot delete empty categories\n4. Cannot change category icons\n5. Default categories are hardcoded\n\n**Requested Features:**\n1. **Edit Category**: Click category name to rename it\n2. **Add Category**: Button to create new custom category\n3. **Delete Category**: Remove empty categories (move sections to Uncategorized first)\n4. **Category Icons**: Pick icon for each category from icon library\n5. **Category Order**: Drag to reorder categories themselves (not just sections within)\n\n**Implementation:**\n1. Store custom categories in localStorage alongside section preferences\n2. Add 'Edit' and 'Delete' buttons on category headers in Settings\n3. Add 'New Category' button at bottom of category list\n4. Icon picker modal (reuse lucide-react icons already imported)\n5. Make CATEGORIES mutable with user overrides\n\n**UI Considerations:**\n- Keep it simple - inline edit for rename\n- Confirmation before delete\n- Show section count on each category\n- Prevent deleting category with sections (must move them first)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T12:15:32.082242553-05:00","created_by":"matt","updated_at":"2026-01-05T12:30:53.112422266-05:00","closed_at":"2026-01-05T12:30:53.112422266-05:00","close_reason":"Implemented category editing and creation in Settings with drag-and-drop reordering, icon picker, and localStorage persistence"}
{"id":"personal-homepage-3h58","title":"Projects: Replace TFE file browser with React FileTree","description":"Swap the terminal file explorer (TFE) launcher for the React FileTree component that already exists.\n\n## Current State\n- ProjectOverview.tsx has 'Browse Files' icon that spawns `tfe` in terminal\n- `app/components/files/FileTree.tsx` is a full React file browser\n\n## Tasks\n- [ ] Replace TFE icon action with inline FileTree component or modal\n- [ ] Consider: inline panel vs modal vs link to Files page with path\n- [ ] Remove terminal extension dependency for file browsing\n\n## Files\n- Modify: `components/projects/ProjectOverview.tsx`\n- Use: `app/components/files/FileTree.tsx`, `FileViewer.tsx`\n\n## Design Decision\nOption A: Embed FileTree in a slide-out panel\nOption B: Open Files page with project path pre-selected\nOption C: Modal with FileTree\n\n## Acceptance Criteria\n- Users can browse project files without terminal\n- File viewing/editing works inline\n- No TFE spawning for basic file browsing","notes":"## Retro\n- Clear requirements, straightforward implementation\n- FileTree/FileViewer components already handle all file browsing functionality\n- FilesProvider wrapper needed inside Sheet for context\n- Sheet side=\"right\" with custom width for better UX","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-23T18:49:15.693478039-05:00","created_by":"GGPrompts","updated_at":"2026-01-23T18:56:35.080404884-05:00","closed_at":"2026-01-23T18:56:35.080404884-05:00","close_reason":"Done: Replaced TFE terminal launcher with React FileTree slide-out drawer. Browse Files button now opens a Sheet with FileTree + FileViewer instead of spawning terminal.","labels":["files","frontend","gate:test-runner","projects","ready"]}
{"id":"personal-homepage-3ns","title":"Fix accessibility and styling issues on gallery/analytics pages","description":"Two issues to fix:\n\n## 1. Photo Gallery - DialogContent accessibility error\n\nGetting console error:\n```\nDialogContent requires a DialogTitle for the component to be accessible for screen reader users.\n```\n\nStack trace points to:\n- components/ui/dialog.tsx:38:5\n- app/sections/photo-gallery.tsx:1690:11\n\nFix: Add a DialogTitle (can wrap with VisuallyHidden if you want to hide it visually).\n\n## 2. Analytics Page - Bar chart styling issues\n\n- Input tokens bar chart color is missing/transparent\n- Hover tooltip over bar chart has transparent background - should be fully opaque so text is readable\n\nCheck the analytics page chart components and fix the colors.","notes":"## Retro\n- Straightforward fixes\n- Photo gallery needed DialogTitle from radix-ui wrapped in VisuallyHidden for a11y\n- Analytics tooltip used glass class (transparent) - switched to bg-popover\n- Input tokens bar used bg-primary/70 which had visibility issues - switched to explicit bg-blue-500","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-23T01:50:04.930284378-05:00","updated_at":"2026-01-23T01:53:30.418459413-05:00","closed_at":"2026-01-23T01:53:30.418459413-05:00","close_reason":"Done: Added VisuallyHidden DialogTitle for a11y, fixed tooltip background to be opaque, changed input tokens bar to visible blue color"}
{"id":"personal-homepage-3nx","title":"Research YouTube API capabilities for Video Player real data","description":"Investigate what YouTube Data API endpoints can provide to replace mock/placeholder data in the Video Player section. Look at comments, related videos, playlists, channels, etc.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T16:36:02.527871179-05:00","updated_at":"2026-01-08T13:12:31.752418732-05:00","closed_at":"2026-01-08T13:12:31.752418732-05:00","close_reason":"Research completed. Documentation created at docs/research/youtube-api-research.md covering: YouTube API endpoints, quota costs (search=100, video/comments/channel=1 unit each), rate limits, and implementation recommendations for replacing mock data in Video Player section.","labels":["research","video-player","youtube"]}
{"id":"personal-homepage-3z3","title":"Wire up Video Player section","description":"Video Player component has been copied to app/sections/video-player.tsx.\n\nWire-up tasks:\n1. Remove the full-page layout wrapper (min-h-screen, etc.)\n2. Convert default export to named section component pattern\n3. Add 'video-player' to Section type in app/page.tsx\n4. Add to navigationItems array with Video icon\n5. Add to CATEGORIES under Entertainment\n6. Add case to renderContent() switch\n7. Add dynamic import for lazy loading\n8. Add TabzChrome data-tabz-* attributes to key elements\n9. Default to hidden in Settings visibility\n10. Test all themes and responsive layout\n\nThe component is fully functional - just needs integration with the homepage shell.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T10:34:40.502737402-05:00","created_by":"matt","updated_at":"2026-01-05T10:53:39.120194982-05:00","closed_at":"2026-01-05T10:53:39.120194982-05:00","close_reason":"Implemented: Wired up Video Player section with navigation, lazy loading, and TabzChrome attributes"}
{"id":"personal-homepage-4aa0","title":"Phase 4: Wire CLI flags to backend integrations","description":"Update lib/ai/*.ts to pass all settings to CLI commands.\n\n## Current State\n- lib/ai/claude.ts passes limited flags (model, permissionMode, additionalDirs)\n- lib/ai/codex.ts passes minimal flags\n- lib/ai/gemini.ts passes minimal flags\n- Many flags from research not wired up\n\n## Changes to lib/ai/claude.ts\n\n```typescript\nexport async function streamClaude(\n  messages: ChatMessage[],\n  settings?: ChatSettings,\n  cwd?: string,\n  sessionId?: string\n): Promise\u003cClaudeStreamResult\u003e {\n  const claudeSettings = settings?.claude || {}\n  const args = ['--print', '--output-format', 'stream-json', '--verbose']\n  \n  // Model\n  if (claudeSettings.model) args.push('--model', claudeSettings.model)\n  if (claudeSettings.agent) args.push('--agent', claudeSettings.agent)\n  \n  // Permissions\n  if (claudeSettings.permissionMode) args.push('--permission-mode', claudeSettings.permissionMode)\n  if (claudeSettings.allowedTools?.length) args.push('--allowedTools', claudeSettings.allowedTools.join(','))\n  if (claudeSettings.disallowedTools?.length) args.push('--disallowedTools', claudeSettings.disallowedTools.join(','))\n  \n  // Tools/MCP\n  if (claudeSettings.tools) args.push('--tools', ...claudeSettings.tools)\n  if (claudeSettings.mcpConfig?.length) args.push('--mcp-config', ...claudeSettings.mcpConfig)\n  if (claudeSettings.strictMcpConfig) args.push('--strict-mcp-config')\n  if (claudeSettings.disableSlashCommands) args.push('--disable-slash-commands')\n  \n  // Plugins/Dirs\n  if (claudeSettings.pluginDirs?.length) args.push('--plugin-dir', ...claudeSettings.pluginDirs)\n  if (claudeSettings.additionalDirs?.length) args.push('--add-dir', ...claudeSettings.additionalDirs)\n  \n  // Advanced\n  if (claudeSettings.maxBudgetUsd) args.push('--max-budget-usd', String(claudeSettings.maxBudgetUsd))\n  if (claudeSettings.betas?.length) args.push('--betas', ...claudeSettings.betas)\n  \n  // ... rest\n}\n```\n\n## Similar updates for:\n- lib/ai/codex.ts (sandbox, approvalPolicy, profile, etc.)\n- lib/ai/gemini.ts (approvalMode, extensions, etc.)\n\n## API Route Updates\n- app/api/ai/chat/route.ts - Accept full settings object\n- Validate settings before passing to backend","notes":"## Retro\n- Straightforward implementation of CLI flag wiring\n- Pattern: Create buildXxxArgs helper functions for each backend\n- Key insight: Support both nested settings (settings.claude) and legacy flat settings\n- Validation added to API route prevents invalid values from reaching CLIs\n- Build passed without issues","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T15:40:04.583506794-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T19:41:43.979469671-05:00","closed_at":"2026-01-28T19:41:43.979469671-05:00","close_reason":"Done: Wired all CLI flags from Settings UI to backends - Claude (10 flags), Codex (2 flags), Gemini (4 flags), plus API validation","labels":["ready"],"dependencies":[{"issue_id":"personal-homepage-4aa0","depends_on_id":"personal-homepage-dah8","type":"blocks","created_at":"2026-01-28T15:40:24.219511956-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-4aa0","depends_on_id":"personal-homepage-0plv","type":"blocks","created_at":"2026-01-28T15:40:24.320281106-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-4fn","title":"Add YouTube search and playlist loading to Video Player","description":"Integrate YouTube Data API for search and playlist features.\n\n**Based on:** docs/research/video-player-integration.md (Phase 2)\n\n**Prerequisites:**\n- Get YouTube API key from Google Cloud Console\n- Add YOUTUBE_API_KEY to settings/env\n\n**Implementation:**\n1. Add YouTube API key field to Settings/Setup section\n2. Create `app/api/youtube/search/route.ts` (100 units/search)\n3. Create `app/api/youtube/video/route.ts` (1 unit/batch of 50)\n4. Create `app/api/youtube/playlist/route.ts` (1 unit/request)\n5. Search UI with filters (duration, date, relevance)\n6. Playlist URL input - load any public playlist\n7. Display real metadata (views, likes, duration)\n\n**Quota Budget (10k/day):**\n- ~100 searches = 10,000 units\n- OR ~10,000 video lookups\n- Recommend: Cache aggressively, batch video IDs\n\n**Files to create:**\n- `app/api/youtube/search/route.ts`\n- `app/api/youtube/video/route.ts`\n- `app/api/youtube/playlist/route.ts`\n- `hooks/useYouTubeSearch.ts`","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T13:01:12.035406329-05:00","updated_at":"2026-01-05T13:16:28.08147867-05:00","closed_at":"2026-01-05T13:16:28.08147867-05:00","close_reason":"Implemented YouTube search and playlist loading in Video Player"}
{"id":"personal-homepage-4fp","title":"Fix working directory in sidebar not clickable to change/set","description":"## Bug\nThe working directory display in the left sidebar can no longer be clicked to change or set it. This is a regression.\n\n## Expected\nClicking the working directory should open a dialog or input to change/set the working directory.\n\n## Files\n- Check sidebar component for working directory display\n- Look for onClick handler that may have been removed or broken","notes":"## Retro\n\n**Root cause:** Nested asChild pattern issue. The DropdownMenuTrigger was wrapping a Tooltip which wrapped TooltipTrigger which wrapped the Button. This prevented click events from reaching the DropdownMenuTrigger.\n\n**Fix:** Reordered to: DropdownMenu \u003e Tooltip \u003e TooltipTrigger asChild \u003e DropdownMenuTrigger asChild \u003e Button. Now DropdownMenuTrigger directly wraps the Button, allowing click events to work properly.\n\n**What would help:** Document common patterns for combining Radix UI primitives with asChild prop.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T01:51:39.971481526-05:00","updated_at":"2026-01-21T20:03:16.864505705-05:00","closed_at":"2026-01-21T20:03:16.864505705-05:00","close_reason":"Fixed: Reordered nested asChild components in WorkingDirSelector.tsx so DropdownMenuTrigger directly wraps the Button, allowing click events to work properly","labels":["ready","regression","sidebar","ui"]}
{"id":"personal-homepage-4gf","title":"Kanban: Done column overwhelmed with ~200 items, poor performance","description":"Some projects have ~200 items in Done column and many in Backlog. The Done cards have notes displayed in tiny gray text on gray background (poor contrast). When clicking into a card, those notes are not visible in the detail view.","notes":"## Retro\n- Investigation notes in the issue were excellent and accurate\n- All three issues addressed: contrast, modal display, and performance\n- Used progressive loading instead of virtualization (simpler, no new dependencies)\n- Future consideration: could add full virtualization if users load 1000+ items","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T20:41:01.733321934-05:00","updated_at":"2026-01-21T20:55:31.233576551-05:00","closed_at":"2026-01-21T20:55:31.233576551-05:00","close_reason":"Done: Fixed contrast (text-zinc-500→300, 10px→xs), added completion summary to modal, implemented progressive loading (20 initial, 30 more per click) for Done column performance","labels":["kanban","performance","ui"]}
{"id":"personal-homepage-4gi","title":"Add breadcrumb navigation and tree controls","description":"Port navigation controls from TabzChrome\n\nFeatures:\n- Home button (navigate to root)\n- Up arrow (navigate to parent directory)\n- Current path display\n- Quick Open button (Ctrl+P file search)\n- Expand All button\n- Collapse All button\n- Folder filter input\n- File search input\n- Hidden file toggle (eye/eye-off icon)\n\nReference: TabzChrome/extension/dashboard/components/files/FileTree.tsx (lines 1024-1089)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T01:13:24.508887753-05:00","created_by":"marci","updated_at":"2026-01-10T19:17:30.290625475-05:00","closed_at":"2026-01-10T19:17:30.290625475-05:00","close_reason":"Added breadcrumb navigation and tree controls (expand/collapse all)"}
{"id":"personal-homepage-4mi","title":"Add file tree context menu with right-click actions","description":"Port context menu from TabzChrome FileTreeContextMenu.tsx\n\nActions to include:\n- Copy Path (full path to clipboard)\n- Copy @Path (path with @ prefix for Claude references)\n- Add/Remove from Favorites\n- Pin file (open as pinned tab)\n- Send to Chat\n- Paste to Terminal\n- Open in Editor ($EDITOR or nano)\n- Set folder as Working Dir (folders only)\n\n**REUSE NOTE:** Consider sharing context menu component between:\n- FileTree.tsx (local files)\n- quick-notes.tsx (GitHub files)\n\nReference: TabzChrome/extension/dashboard/components/files/FileTreeContextMenu.tsx","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T01:12:59.439978743-05:00","created_by":"marci","updated_at":"2026-01-09T01:35:44.850884255-05:00","closed_at":"2026-01-09T01:35:44.850884255-05:00","close_reason":"Implemented FileTreeContextMenu with right-click actions for both Local and GitHub file trees. Actions include copy path, copy @path, favorites, pin file, terminal integration, and source-specific options.","dependencies":[{"issue_id":"personal-homepage-4mi","depends_on_id":"personal-homepage-gh5","type":"blocks","created_at":"2026-01-09T01:16:41.035078534-05:00","created_by":"marci"}]}
{"id":"personal-homepage-4rui","title":"Bug: CLAUDE_EVENT markers showing in chat UI","description":"The raw __CLAUDE_EVENT__ JSON markers are showing in the chat output instead of being filtered/parsed.\n\nExample showing in UI:\n```\n__CLAUDE_EVENT__{\"type\":\"tool_start\",...}__END_EVENT__\n__CLAUDE_EVENT__{\"type\":\"tool_end\",...}__END_EVENT__\n```\n\nThese should be parsed internally and not displayed to users.\n\n## Files\n- Likely in the stream parsing logic for kanban AI chat\n- Check how events are being rendered vs filtered","notes":"## prepared.prompt\n\n**Task:** Filter out __CLAUDE_EVENT__ markers from chat UI display.\n\n**Problem:** Raw event JSON showing in kanban chat output.\n\n**Files to check:**\n- `app/components/kanban/` - look for chat/AI components\n- Stream parsing logic - events should be parsed not displayed\n\n**Fix:** Filter lines matching `__CLAUDE_EVENT__` pattern before rendering to UI.\n\nWhen done, run `bd close personal-homepage-4rui`.","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:06:05.325948012-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T21:14:42.524775053-05:00","closed_at":"2026-01-28T21:14:42.524775053-05:00","close_reason":"Done: Added stripClaudeEventMarkers() function in useClaudeChat.ts to filter __CLAUDE_EVENT__...__END_EVENT__ markers from streaming content and persisted messages before displaying in the kanban chat UI","labels":["ai-workspace","bug","kanban","ready"]}
{"id":"personal-homepage-4sf1","title":"Tests: UI hooks (useMediaLibrary, usePageBackground, useTheme)","description":"Add vitest tests for UI/media hooks.\n\n## Hooks to test\n- hooks/useMediaLibrary.ts\n- hooks/usePageBackground.tsx\n- hooks/useTheme.ts\n- hooks/useTerminalExtension.ts\n\n## Test coverage\n- LocalStorage interactions\n- State management\n- Theme switching\n- Media directory handling","notes":"## prepared.prompt\n\n**Task:** Write vitest tests for UI/media hooks.\n\n**Files to test:**\n- `hooks/useMediaLibrary.ts`\n- `hooks/usePageBackground.tsx`\n- `hooks/useTheme.ts`\n- `hooks/useTerminalExtension.ts`\n\n**Output:** `__tests__/hooks/useUI*.test.ts` or similar\n\nMock localStorage and test state changes.\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:15:49.215154599-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:40:31.426763593-05:00","closed_at":"2026-01-28T22:40:31.426763593-05:00","close_reason":"Done: Created comprehensive vitest tests for UI/media hooks - useMediaLibrary.ts (directories, browser, utilities), usePageBackground.tsx (context provider, settings persistence), useTheme from ThemeProvider.tsx (theme switching, persistence), and useTerminalExtension.ts (TabzChrome API integration). Tests cover localStorage mocking, state changes, async operations, error handling. 57 new tests in __tests__/hooks/useUIHooks.test.ts","labels":["hooks","ready","tests"]}
{"id":"personal-homepage-4yqz","title":"Research and expose CLI flags for all AI backends","description":"The AI Workspace Settings currently only exposes a few CLI options. Need to research all available flags for each backend and expose them properly.\n\n## Problem\n- Model selection is just 1 part of configuring an 'agent'\n- Many CLI flags are missing from Settings\n- Users can't access full CLI capabilities through the UI\n\n## Backends to Research\n\n### Claude CLI (`claude --help`)\nKnown flags to document:\n- `--model` (sonnet, opus, haiku)\n- `--plugin-dir` - Plugin directory for custom tools\n- `--add-dir` - Additional CLAUDE.md context directories\n- `--permission-mode` (default, acceptEdits, bypassPermissions, plan)\n- `--allowed-tools` / `--disallowed-tools`\n- `--resume` - Resume session\n- Many more...\n\n### Codex CLI (`codex --help`)\n- Model selection\n- Reasoning effort\n- Sandbox mode\n- Others TBD\n\n### Gemini CLI (`gemini --help`)\n- Model selection\n- Others TBD\n\n### Copilot CLI (`copilot --help` or `gh copilot`)\n- TBD\n\n## Tasks\n1. Run `--help` for each CLI and document all flags\n2. Categorize flags (model, context, permissions, tools, etc.)\n3. Update Settings UI to expose relevant flags\n4. Update agent.json schema to support CLI-specific config\n5. Wire up flags to API calls in lib/ai/*.ts\n\n## Goal\nFull CLI configurability through the UI, making 'agents' = model + all relevant flags","design":"## Updated ChatSettings Interface Design\n\n```typescript\n// lib/ai/types.ts\n\nexport type MessageRole = 'user' | 'assistant' | 'system'\nexport type AIBackend = 'claude' | 'gemini' | 'codex' | 'docker' | 'mock'\n\n// Permission modes across backends\nexport type ClaudePermissionMode = 'acceptEdits' | 'bypassPermissions' | 'default' | 'delegate' | 'dontAsk' | 'plan'\nexport type CodexSandboxMode = 'read-only' | 'workspace-write' | 'danger-full-access'\nexport type CodexApprovalPolicy = 'untrusted' | 'on-failure' | 'on-request' | 'never'\nexport type GeminiApprovalMode = 'default' | 'auto_edit' | 'yolo' | 'plan'\nexport type OutputFormat = 'text' | 'json' | 'stream-json'\n\n// Common settings that apply to all backends\nexport interface CommonSettings {\n  temperature?: number\n  maxTokens?: number\n  systemPrompt?: string\n  appendSystemPrompt?: string\n  additionalDirs?: string[]\n}\n\n// Claude-specific CLI settings\nexport interface ClaudeSettings extends CommonSettings {\n  model?: string  // sonnet, opus, haiku, or full model name\n  agent?: string  // agent from ~/.claude/agents/\n  \n  // Permissions\n  permissionMode?: ClaudePermissionMode\n  allowedTools?: string[]  // e.g. [\"Bash(git:*)\", \"Edit\"]\n  disallowedTools?: string[]\n  dangerouslySkipPermissions?: boolean\n  \n  // Tools/MCP\n  tools?: string[]  // \"\" (none), \"default\" (all), or tool names\n  mcpConfig?: string[]  // JSON files or strings\n  strictMcpConfig?: boolean\n  disableSlashCommands?: boolean\n  \n  // Plugins\n  pluginDirs?: string[]\n  \n  // Session\n  sessionId?: string\n  forkSession?: boolean\n  noSessionPersistence?: boolean\n  \n  // Output\n  outputFormat?: OutputFormat\n  jsonSchema?: string  // JSON Schema for structured output\n  verbose?: boolean\n  \n  // Advanced\n  betas?: string[]  // Beta features\n  maxBudgetUsd?: number\n  settingSources?: string[]  // user, project, local\n  \n  // IDE/Chrome\n  ide?: boolean\n  chrome?: boolean\n}\n\n// Codex-specific CLI settings\nexport interface CodexSettings extends CommonSettings {\n  model?: string\n  \n  // Local providers\n  useOss?: boolean  // Use local LLM\n  localProvider?: 'lmstudio' | 'ollama' | 'ollama-chat'\n  \n  // Permissions\n  sandbox?: CodexSandboxMode\n  approvalPolicy?: CodexApprovalPolicy\n  fullAuto?: boolean\n  \n  // Config\n  profile?: string  // Config profile from config.toml\n  configOverrides?: Record\u003cstring, unknown\u003e  // key=value overrides\n  features?: Record\u003cstring, boolean\u003e  // Enable/disable features\n  \n  // Search\n  webSearch?: boolean\n  \n  // Display\n  noAltScreen?: boolean\n}\n\n// Gemini-specific CLI settings\nexport interface GeminiSettings extends CommonSettings {\n  model?: string\n  \n  // Permissions\n  sandbox?: boolean\n  yolo?: boolean\n  approvalMode?: GeminiApprovalMode\n  allowedTools?: string[]\n  allowedMcpServers?: string[]\n  \n  // Output\n  outputFormat?: OutputFormat\n  \n  // Extensions\n  extensions?: string[]\n  experimentalAcp?: boolean\n  \n  // Accessibility\n  screenReader?: boolean\n}\n\n// Unified ChatSettings with backend-specific sections\nexport interface ChatSettings {\n  // Common fields (backwards compatible)\n  temperature?: number\n  maxTokens?: number\n  systemPrompt?: string\n  additionalDirs?: string[]\n  \n  // Backend-specific settings\n  claude?: ClaudeSettings\n  codex?: CodexSettings\n  gemini?: GeminiSettings\n  \n  // Legacy fields (deprecated, use claude.* instead)\n  claudeModel?: string\n  claudeAgent?: string\n  allowedTools?: string[]\n  disallowedTools?: string[]\n  permissionMode?: ClaudePermissionMode\n  codexModel?: string\n  reasoningEffort?: 'low' | 'medium' | 'high'\n  sandbox?: 'read-only' | 'full' | 'off'\n  geminiModel?: string\n}\n```\n\n## Updated agent.json Schema Design\n\n```typescript\n// lib/agents/types.ts\n\ninterface AgentConfig {\n  name: string\n  avatar?: string\n  description: string\n  personality?: string[]\n  sections?: string[]  // Sections where agent is available\n  enabled?: boolean\n  \n  // Backend selection\n  backend: AIBackend  // 'claude' | 'codex' | 'gemini'\n  \n  // Unified config (applied to all backends)\n  config: {\n    // Common settings\n    model?: string\n    temperature?: number\n    maxTokens?: number\n    stream?: boolean\n    \n    // System prompt\n    systemPrompt?: string\n    appendSystemPrompt?: string  // Append to default\n    \n    // Directories\n    additionalDirs?: string[]\n    workingDir?: string  // cwd for CLI\n  }\n  \n  // Backend-specific overrides\n  claude?: {\n    permissionMode?: ClaudePermissionMode\n    allowedTools?: string[]\n    disallowedTools?: string[]\n    tools?: string[]\n    mcpConfig?: string[]\n    strictMcpConfig?: boolean\n    pluginDirs?: string[]\n    disableSlashCommands?: boolean\n    maxBudgetUsd?: number\n    betas?: string[]\n    jsonSchema?: string\n  }\n  \n  codex?: {\n    sandbox?: CodexSandboxMode\n    approvalPolicy?: CodexApprovalPolicy\n    fullAuto?: boolean\n    profile?: string\n    useOss?: boolean\n    localProvider?: string\n    webSearch?: boolean\n    features?: Record\u003cstring, boolean\u003e\n  }\n  \n  gemini?: {\n    sandbox?: boolean\n    yolo?: boolean\n    approvalMode?: GeminiApprovalMode\n    allowedTools?: string[]\n    allowedMcpServers?: string[]\n    extensions?: string[]\n    experimentalAcp?: boolean\n  }\n  \n  // MCP tools configuration (existing)\n  mcp_tools?: McpTool[]\n  selectors?: Selector[]\n}\n```\n\n## Example agent.json with New Schema\n\n```json\n{\n  \"name\": \"Code Agent\",\n  \"avatar\": \"/avatars/code-agent.png\",\n  \"description\": \"Programming assistant with full file access\",\n  \"personality\": [\"technical\", \"detailed\"],\n  \"backend\": \"claude\",\n  \"sections\": [\"ai-workspace\"],\n  \"enabled\": true,\n  \n  \"config\": {\n    \"model\": \"claude-sonnet-4-20250514\",\n    \"temperature\": 0.3,\n    \"maxTokens\": 4096,\n    \"stream\": true,\n    \"appendSystemPrompt\": \"Focus on code quality and best practices.\",\n    \"additionalDirs\": [\"/home/user/projects\"]\n  },\n  \n  \"claude\": {\n    \"permissionMode\": \"acceptEdits\",\n    \"allowedTools\": [\"Read\", \"Edit\", \"Write\", \"Bash(git:*)\"],\n    \"disallowedTools\": [\"WebFetch\"],\n    \"mcpConfig\": [\"~/.claude/mcp-servers.json\"],\n    \"maxBudgetUsd\": 10\n  },\n  \n  \"mcp_tools\": [...],\n  \"selectors\": [...]\n}\n```\n\n## Per-Agent Settings UX Design\n\n### Settings Panel Layout\n\n```\n+--------------------------------------------------+\n|  Agent Settings: Code Agent                      |\n+--------------------------------------------------+\n| [General] [Claude] [Permissions] [Tools] [MCP]   |\n+--------------------------------------------------+\n\n### General Tab ###\n+--------------------------+------------------------+\n| Name          [Code Agent_____________________] |\n| Description   [Programming assistant...________] |\n| Backend       [v Claude    ]  [Codex] [Gemini]  |\n| Model         [v sonnet___________________]     |\n| Temperature   [=====0.3==========] 0.3          |\n| Max Tokens    [4096_____]                       |\n+--------------------------+------------------------+\n\n### Claude Tab (shown when backend=claude) ###\n+--------------------------+------------------------+\n| Permission Mode                                  |\n| ( ) Default - Ask for each tool use             |\n| (*) Accept Edits - Auto-approve file edits      |\n| ( ) Plan - Read-only mode                       |\n| ( ) Delegate - Trust agent decisions            |\n| ( ) Bypass - No permission checks (dangerous)   |\n+--------------------------+------------------------+\n| System Prompt Override                           |\n| [  ] Override default prompt                    |\n| [Multi-line textarea for system prompt________] |\n| [____________________________________________] |\n+--------------------------+------------------------+\n| Additional Directories                           |\n| [/home/user/projects              ] [x]         |\n| [/opt/shared-libs                 ] [x]         |\n| [+ Add directory]                               |\n+--------------------------+------------------------+\n\n### Permissions Tab ###\n+--------------------------+------------------------+\n| Allowed Tools                                    |\n| [x] Read        [x] Edit        [x] Write       |\n| [x] Bash(git:*) [ ] Bash(*)     [ ] WebFetch    |\n| [ ] WebSearch   [x] Glob        [x] Grep        |\n|                                                  |\n| Custom patterns: [Bash(npm:*), Bash(node:*)___] |\n+--------------------------+------------------------+\n| Disallowed Tools                                 |\n| [ ] Read        [ ] Edit        [ ] Write       |\n| [ ] Bash(git:*) [x] Bash(rm:*)  [ ] WebFetch    |\n|                                                  |\n| Custom patterns: [Bash(sudo:*)________________] |\n+--------------------------+------------------------+\n\n### Tools Tab ###\n+--------------------------+------------------------+\n| Built-in Tools                                   |\n| (*) All default tools                           |\n| ( ) Custom selection:                           |\n|     [x] Bash  [x] Edit  [x] Read  [x] Write    |\n|     [x] Glob  [x] Grep  [ ] WebFetch           |\n| ( ) No tools (chat only)                        |\n+--------------------------+------------------------+\n| Skills                                           |\n| [x] Enable slash commands                       |\n+--------------------------+------------------------+\n\n### MCP Tab ###\n+--------------------------+------------------------+\n| MCP Configuration Files                          |\n| [~/.claude/mcp-servers.json       ] [x]         |\n| [./project-mcp.json               ] [x]         |\n| [+ Add config file]                             |\n+--------------------------+------------------------+\n| [ ] Strict MCP mode (ignore other configs)      |\n+--------------------------+------------------------+\n| Plugin Directories                               |\n| [~/.claude/plugins                ] [x]         |\n| [+ Add plugin directory]                        |\n+--------------------------+------------------------+\n\n### Budget/Limits Tab ###\n+--------------------------+------------------------+\n| Budget Controls                                  |\n| Max budget: [$____10.00] per session            |\n| [ ] Warn at 80% budget                          |\n+--------------------------+------------------------+\n| Beta Features                                    |\n| [x] extended-thinking                           |\n| [ ] computer-use                                |\n+--------------------------+------------------------+\n```\n\n### Codex-Specific Tab (shown when backend=codex)\n\n```\n### Codex Tab ###\n+--------------------------+------------------------+\n| Sandbox Mode                                     |\n| (*) Read-only - Only read files                 |\n| ( ) Workspace write - Write to workspace        |\n| ( ) Full access - DANGEROUS                     |\n+--------------------------+------------------------+\n| Approval Policy                                  |\n| (*) Untrusted - Approve non-trusted commands    |\n| ( ) On failure - Approve only failed commands   |\n| ( ) On request - Agent decides when to ask      |\n| ( ) Never - Auto-approve everything             |\n+--------------------------+------------------------+\n| [ ] Full auto mode (workspace-write + on-request)|\n+--------------------------+------------------------+\n| Local LLM                                        |\n| [ ] Use local model (OSS)                       |\n| Provider: [v Ollama      ]                      |\n+--------------------------+------------------------+\n| [ ] Enable web search                           |\n+--------------------------+------------------------+\n```\n\n### Gemini-Specific Tab (shown when backend=gemini)\n\n```\n### Gemini Tab ###\n+--------------------------+------------------------+\n| Approval Mode                                    |\n| (*) Default - Ask for approval                  |\n| ( ) Auto-edit - Auto-approve file edits         |\n| ( ) YOLO - Auto-approve everything              |\n| ( ) Plan - Read-only mode                       |\n+--------------------------+------------------------+\n| [ ] Enable sandbox                              |\n+--------------------------+------------------------+\n| Extensions                                       |\n| [code-execution        ] [x]                    |\n| [web-search            ] [x]                    |\n| [+ Add extension]                               |\n+--------------------------+------------------------+\n| Allowed MCP Servers                              |\n| [beads                 ] [x]                    |\n| [shadcn                ] [x]                    |\n| [+ Add server]                                  |\n+--------------------------+------------------------+\n```\n\n## Implementation Notes\n\n### Migration Path\n1. Add new backend-specific fields to ChatSettings (non-breaking)\n2. Update lib/ai/claude.ts to read from `settings.claude.*` with fallback to legacy fields\n3. Update lib/ai/codex.ts similarly\n4. Add lib/ai/gemini.ts if missing\n5. Update agent.json loader to merge config sections\n6. Update Settings UI progressively\n\n### UI Components Needed\n- PermissionModeSelect (radio group)\n- ToolCheckboxGrid (multi-select with patterns)\n- DirectoryListInput (array input with file picker)\n- McpConfigList (file path array)\n- BudgetInput (currency input with limits)\n- BackendTabs (show/hide based on selection)\n\n### Storage\n- Agent configs stored in `/agents/{name}/agent.json`\n- User overrides stored in localStorage under `agent-settings-{agentId}`\n- Session-specific overrides passed via ChatSettings","notes":"## CLI Flags Research - COMPLETE\n\n### Claude CLI Flags (claude --help)\n\n#### Model Selection\n| Flag | Description |\n|------|-------------|\n| `--model \u003cmodel\u003e` | Model for session. Alias (sonnet, opus) or full name (claude-sonnet-4-5-20250929) |\n| `--fallback-model \u003cmodel\u003e` | Automatic fallback when default model overloaded (--print only) |\n\n#### Context/Directories\n| Flag | Description |\n|------|-------------|\n| `--add-dir \u003cdirectories...\u003e` | Additional directories to allow tool access to |\n| `--plugin-dir \u003cpaths...\u003e` | Load plugins from directories for this session only |\n\n#### Permissions/Security\n| Flag | Description |\n|------|-------------|\n| `--permission-mode \u003cmode\u003e` | Mode: acceptEdits, bypassPermissions, default, delegate, dontAsk, plan |\n| `--allowedTools \u003ctools...\u003e` | Comma/space-separated tool names to allow (e.g. \"Bash(git:*) Edit\") |\n| `--disallowedTools \u003ctools...\u003e` | Comma/space-separated tool names to deny |\n| `--dangerously-skip-permissions` | Bypass all permission checks (sandboxes only) |\n| `--allow-dangerously-skip-permissions` | Enable bypass option without enabling by default |\n\n#### Tools/MCP\n| Flag | Description |\n|------|-------------|\n| `--tools \u003ctools...\u003e` | Available tools: \"\" (none), \"default\" (all), or tool names |\n| `--mcp-config \u003cconfigs...\u003e` | Load MCP servers from JSON files or strings |\n| `--strict-mcp-config` | Only use MCP servers from --mcp-config |\n| `--mcp-debug` | [DEPRECATED] Use --debug instead |\n| `--disable-slash-commands` | Disable all skills |\n\n#### Session Management\n| Flag | Description |\n|------|-------------|\n| `--resume [value]` | Resume conversation by session ID, or open picker |\n| `--continue` | Continue most recent conversation in current directory |\n| `--session-id \u003cuuid\u003e` | Use specific session ID (must be valid UUID) |\n| `--fork-session` | Create new session ID when resuming |\n| `--no-session-persistence` | Disable session persistence (--print only) |\n\n#### Output Format\n| Flag | Description |\n|------|-------------|\n| `--print` | Print response and exit (non-interactive) |\n| `--output-format \u003cformat\u003e` | text (default), json, stream-json |\n| `--input-format \u003cformat\u003e` | text (default), stream-json |\n| `--include-partial-messages` | Include partial chunks (--print + stream-json) |\n| `--replay-user-messages` | Re-emit user messages for acknowledgment |\n| `--json-schema \u003cschema\u003e` | JSON Schema for structured output validation |\n| `--verbose` | Override verbose mode setting |\n\n#### System Prompt\n| Flag | Description |\n|------|-------------|\n| `--system-prompt \u003cprompt\u003e` | System prompt for session |\n| `--append-system-prompt \u003cprompt\u003e` | Append to default system prompt |\n\n#### Agent Configuration\n| Flag | Description |\n|------|-------------|\n| `--agent \u003cagent\u003e` | Agent for session (overrides 'agent' setting) |\n| `--agents \u003cjson\u003e` | JSON object defining custom agents |\n\n#### API/Advanced\n| Flag | Description |\n|------|-------------|\n| `--betas \u003cbetas...\u003e` | Beta headers for API requests (API key users only) |\n| `--max-budget-usd \u003camount\u003e` | Maximum spend on API calls (--print only) |\n| `--setting-sources \u003csources\u003e` | Comma-separated: user, project, local |\n| `--settings \u003cfile-or-json\u003e` | Path to settings JSON or JSON string |\n| `--debug [filter]` | Debug mode with optional category filtering |\n| `--debug-file \u003cpath\u003e` | Write debug logs to file |\n\n#### IDE/Browser\n| Flag | Description |\n|------|-------------|\n| `--ide` | Auto-connect to IDE on startup |\n| `--chrome` | Enable Claude in Chrome integration |\n| `--no-chrome` | Disable Chrome integration |\n\n#### File Handling\n| Flag | Description |\n|------|-------------|\n| `--file \u003cspecs...\u003e` | File resources to download at startup (file_id:path) |\n\n---\n\n### Codex CLI Flags (codex --help)\n\n#### Model Selection\n| Flag | Description |\n|------|-------------|\n| `-m, --model \u003cMODEL\u003e` | Model the agent should use |\n| `--oss` | Use local open source model provider (lmstudio/ollama) |\n| `--local-provider \u003cprovider\u003e` | Specify local provider: lmstudio, ollama, ollama-chat |\n\n#### Context/Directories\n| Flag | Description |\n|------|-------------|\n| `-C, --cd \u003cDIR\u003e` | Working root directory |\n| `--add-dir \u003cDIR\u003e` | Additional writable directories alongside workspace |\n\n#### Permissions/Security\n| Flag | Description |\n|------|-------------|\n| `-s, --sandbox \u003cmode\u003e` | Sandbox policy: read-only, workspace-write, danger-full-access |\n| `-a, --ask-for-approval \u003cpolicy\u003e` | Approval policy: untrusted, on-failure, on-request, never |\n| `--full-auto` | Low-friction sandboxed execution (-a on-request, --sandbox workspace-write) |\n| `--dangerously-bypass-approvals-and-sandbox` | Skip all prompts, no sandboxing (DANGEROUS) |\n\n#### Configuration\n| Flag | Description |\n|------|-------------|\n| `-c, --config \u003ckey=value\u003e` | Override config.toml values (dotted path, TOML format) |\n| `-p, --profile \u003cprofile\u003e` | Configuration profile from config.toml |\n| `--enable \u003cFEATURE\u003e` | Enable a feature (repeatable) |\n| `--disable \u003cFEATURE\u003e` | Disable a feature (repeatable) |\n\n#### Session Management\n| Flag | Description |\n|------|-------------|\n| `resume` | Resume previous session (subcommand) |\n| `fork` | Fork previous session (subcommand) |\n\n#### Search/Input\n| Flag | Description |\n|------|-------------|\n| `--search` | Enable live web search (Responses web_search tool) |\n| `-i, --image \u003cFILE\u003e...` | Image(s) to attach to initial prompt |\n\n#### Display\n| Flag | Description |\n|------|-------------|\n| `--no-alt-screen` | Inline mode, preserve terminal scrollback |\n\n---\n\n### Gemini CLI Flags (gemini --help)\n\n#### Model Selection\n| Flag | Description |\n|------|-------------|\n| `-m, --model` | Model to use |\n\n#### Context/Directories\n| Flag | Description |\n|------|-------------|\n| `--include-directories` | Additional workspace directories (comma-separated or multiple flags) |\n\n#### Permissions/Security\n| Flag | Description |\n|------|-------------|\n| `-s, --sandbox` | Run in sandbox (boolean) |\n| `-y, --yolo` | Auto-accept all actions |\n| `--approval-mode` | default, auto_edit, yolo, plan |\n| `--allowed-tools` | Tools allowed without confirmation |\n| `--allowed-mcp-server-names` | Allowed MCP server names |\n\n#### Session Management\n| Flag | Description |\n|------|-------------|\n| `-r, --resume` | Resume previous session (\"latest\" or index) |\n| `--list-sessions` | List available sessions |\n| `--delete-session` | Delete session by index |\n\n#### Output Format\n| Flag | Description |\n|------|-------------|\n| `-o, --output-format` | text, json, stream-json |\n\n#### Prompt Modes\n| Flag | Description |\n|------|-------------|\n| `-p, --prompt` | Non-interactive prompt |\n| `-i, --prompt-interactive` | Execute prompt then continue interactively |\n\n#### Extensions\n| Flag | Description |\n|------|-------------|\n| `-e, --extensions` | List of extensions to use |\n| `-l, --list-extensions` | List available extensions |\n| `--experimental-acp` | Start in ACP mode |\n\n#### Other\n| Flag | Description |\n|------|-------------|\n| `-d, --debug` | Debug mode (F12 for console) |\n| `--screen-reader` | Accessibility mode |\n\n---\n\n### GitHub Copilot CLI\n\n**Status:** Not available (`gh copilot` extension not installed)\n\n---\n\n## Flags Categorization Summary\n\n### By Category (Cross-Backend)\n\n**Model Selection:** All three backends support model selection\n- Claude: `--model` with aliases or full names\n- Codex: `-m/--model` with local provider support\n- Gemini: `-m/--model`\n\n**Context/Directories:** All support additional directories\n- Claude: `--add-dir`, `--plugin-dir`\n- Codex: `--add-dir`, `-C/--cd`\n- Gemini: `--include-directories`\n\n**Permissions/Security:** All have permission modes\n- Claude: `--permission-mode` (6 modes), `--allowed-tools`, `--disallowed-tools`\n- Codex: `--sandbox` (3 modes), `--ask-for-approval` (4 policies)\n- Gemini: `--approval-mode` (4 modes), `--sandbox`, `--allowed-tools`\n\n**Session Management:** All support resume\n- Claude: `--resume`, `--continue`, `--session-id`, `--fork-session`\n- Codex: `resume` and `fork` subcommands\n- Gemini: `--resume`, `--list-sessions`, `--delete-session`\n\n**Output Format:** All support JSON output\n- Claude: `--output-format` (text/json/stream-json)\n- Codex: Output comes from `exec` subcommand\n- Gemini: `-o/--output-format` (text/json/stream-json)\n\n**MCP/Tools:** Claude has strongest MCP support\n- Claude: `--mcp-config`, `--strict-mcp-config`, `--tools`\n- Codex: MCP via subcommand\n- Gemini: `--allowed-mcp-server-names`","status":"closed","priority":1,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T14:29:18.047712015-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T14:53:21.166805035-05:00","closed_at":"2026-01-28T14:53:21.166805035-05:00","close_reason":"Done: Documented all CLI flags for Claude (45+ flags), Codex (15+ flags), and Gemini (20+ flags). Categorized by purpose (model, context, permissions, tools, session, output). Designed updated ChatSettings TypeScript interface with backend-specific sections. Designed updated agent.json schema with config inheritance. Created detailed UX mockup for per-agent settings with tabbed interface showing General/Permissions/Tools/MCP tabs.","labels":["ai-workspace","cli","ready","settings"]}
{"id":"personal-homepage-4ys","title":"Music Audit: Fix device selector not loading on startup","description":"## Bug: Device Selector Not Loading on Startup\n\n### Root Cause Analysis\nThe device refresh logic in `useSpotifyPlayer.ts` has a timing issue:\n\n**Lines 522-530:**\n```typescript\nuseEffect(() =\u003e {\n  if (isAuthenticated \u0026\u0026 isPremium \u0026\u0026 !isReady) {\n    // Fetch initial device list before SDK is ready\n    refreshDevices()\n  }\n}, [isAuthenticated, isPremium, isReady, refreshDevices])\n```\n\n**The Problem:**\n- This effect only runs when `!isReady` (SDK not ready yet)\n- Once SDK becomes ready (`isReady = true`), this effect doesn't re-run\n- The SDK ready handler (lines 252-292) has retry logic but may miss devices\n\n**Race Condition:**\n1. User authenticates → isAuthenticated=true\n2. Effect runs → refreshDevices() → devices loaded\n3. SDK initializes → isReady=true → effect doesn't re-run\n4. SDK ready handler retries but devices array may be stale\n\n### Additional Issue\nThe ready event handler (line 252) fetches devices but only updates if our device is found:\n```typescript\nif (ourDevice) {\n  setDevices(deviceList)  // Only updates if our device exists\n  // ...\n}\n```\n\nIf other devices exist but ours isn't registered yet, devices won't update.\n\n### Fix Location\n`hooks/useSpotifyPlayer.ts` lines 522-530 and 252-292\n\n### Solution\n1. Change useEffect to also run when `isReady` becomes true\n2. In ready handler, always setDevices even if our device isn't found yet\n3. Add periodic refresh when devices array is empty\n\n### Test Steps\n1. Clear all localStorage\n2. Login to Spotify\n3. Verify devices appear immediately without manual refresh","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T14:43:18.23155263-05:00","created_by":"marci","updated_at":"2026-01-09T15:16:00.832586386-05:00","closed_at":"2026-01-09T15:16:00.832586386-05:00","close_reason":"Fixed in commits 944f992 and 2cfa67a"}
{"id":"personal-homepage-51x","title":"Video Player: Add actual video playback with HTML5 Video","description":"Replace simulated progress with real video playback using HTML5 Video API.\n\nCurrent state: Fake progress bar with setInterval simulation.\n\nFeatures to add:\n1. **HTML5 Video Element**: Real video playback\n2. **URL Support**: Play video from remote URLs (.mp4, .webm, .ogg)\n3. **YouTube Embed**: Option to paste YouTube URLs and embed player\n4. **File Picker**: Load local video files via browser File API\n5. **Real Controls**: Play/pause, seek, volume, fullscreen actually work\n\nImplementation:\n- Add videoRef with HTMLVideoElement\n- Wire up custom controls to video element methods\n- Sync progress bar with video.currentTime/duration\n- Handle video events (ended, timeupdate, loadedmetadata)\n- Quality selector (if multiple sources available)\n- Playback speed control\n- Picture-in-Picture support\n- Keyboard shortcuts (space, arrows, f for fullscreen)\n\nVideo sources to support:\n- Direct video URLs (.mp4, .webm)\n- YouTube/Vimeo embeds (detect URL pattern)\n- Local files via File API\n- (Future) HLS/DASH streaming","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T10:41:01.66532338-05:00","created_by":"matt","updated_at":"2026-01-05T11:45:55.44265506-05:00","closed_at":"2026-01-05T11:45:55.44265506-05:00","close_reason":"Implemented: Real HTML5 video playback with URL/YouTube/file support, controls, PiP, and keyboard shortcuts","dependencies":[{"issue_id":"personal-homepage-51x","depends_on_id":"personal-homepage-3z3","type":"blocks","created_at":"2026-01-05T10:41:10.855548915-05:00","created_by":"matt"}]}
{"id":"personal-homepage-553z","title":"Bug: Context percentage shows 0% on first message before response","description":"In AI Workspace chat, the context percentage display shows 0% when sending the first message, then updates to the correct value (~9%) after the response arrives.\n\n## Current Behavior\n\n1. User sends first message\n2. Context shows: 0% (only counting 3 input tokens)\n3. Response arrives\n4. Context shows: 9% (correctly includes system prompt + MCP tools + message)\n\n## Expected Behavior\n\nFirst message should show realistic context usage, accounting for:\n- System prompt tokens\n- MCP tool schemas (if known)\n- User message\n\n## Root Cause\n\nThe token tracking only updates after receiving usage data from Claude API response. On send, it doesnt know the full context yet.\n\n## Possible Fixes\n\n1. **Show placeholder**: Display \"calculating...\" or spinner instead of 0% on first message\n2. **Estimate upfront**: Use known system prompt size (~27k from cache creation) as baseline\n3. **Track cumulative**: Keep running total that includes cached context\n\n## Files\n\n- `hooks/useAIChat.ts` - Token tracking logic\n- `app/sections/ai-workspace.tsx` - Context display UI","notes":"## Retro\nStraightforward fix. The isCalculatingUsage state correctly detects when we are waiting for first usage data and shows a spinner instead of 0%. Build passes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-28T19:10:38.508843484-05:00","updated_at":"2026-01-28T19:34:33.236678361-05:00","closed_at":"2026-01-28T19:34:33.236678361-05:00","close_reason":"Done: Added isCalculatingUsage state that shows spinner with ... instead of misleading 0% during first message send","labels":["ai-workspace","quick-fix","ready","ui"]}
{"id":"personal-homepage-59z","title":"Migrate ai-kanban-board project into personal-homepage","description":"Migrate the beads-connected kanban board and TUI from ~/projects/ai-kanban-board into this project as a new section. This includes:\n- Kanban board UI that connects to beads issues\n- TUI interface for terminal-based access\n- Integration with the existing beads setup\n\nThis is a larger task that needs to be broken down into subtasks once requirements are clearer.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T22:07:18.186716847-05:00","created_by":"matt","updated_at":"2026-01-04T23:11:08.145050178-05:00","closed_at":"2026-01-04T23:11:08.145050178-05:00","close_reason":"Broken down into 8 subtasks (658, ce7, 9y5, ch8, p8f, y4d, 0d3, 8kb)","comments":[{"id":2,"issue_id":"personal-homepage-59z","author":"matt","text":"Add a launch icon to the Projects kanban pages that spawns the beads TUI:\n\n```bash\ncd /home/matt/projects/ai-kanban-board \u0026\u0026 ./tui/ai-kanban-tui\n```\n\nThis could use the existing terminal spawning integration (useTerminalExtension hook) to open the TUI in a new terminal tab.","created_at":"2026-01-05T03:13:02Z"}]}
{"id":"personal-homepage-5dwh","title":"Tests: lib utilities (ai/claude, ai/types, fileTypeUtils)","description":"Add vitest tests for lib utilities.\n\n## Files to test\n- lib/ai/claude.ts (unit tests for arg building)\n- lib/ai/codex.ts\n- lib/ai/gemini.ts\n- lib/ai/types.ts (type guards if any)\n- lib/fileTypeUtils.ts (extend existing)\n\n## Test coverage\n- CLI argument construction\n- Path resolution\n- Type validation","notes":"## prepared.prompt\n\n**Task:** Write vitest tests for lib utilities.\n\n**Files to test:**\n- `lib/ai/claude.ts` - test buildClaudeArgs or similar functions\n- `lib/ai/codex.ts`\n- `lib/ai/gemini.ts`\n\n**Output:** `__tests__/lib/ai/*.test.ts`\n\nFocus on pure functions that build CLI args - don't need to mock actual spawning.\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:15:50.66694622-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:37:24.178052497-05:00","closed_at":"2026-01-28T22:37:24.178052497-05:00","close_reason":"Done: Created vitest tests for lib/ai utilities - exported buildClaudeArgs, buildCodexArgs, and buildGeminiArgs functions and added comprehensive tests (71 tests) covering model selection, system prompts, permission modes, tool permissions, MCP configs, and all CLI flag generation for Claude, Codex, and Gemini backends","labels":["lib","ready","tests"]}
{"id":"personal-homepage-5j3o","title":"Feature: .prompts file filter and fillable fields","description":"The Files page has styling for .prompts files (ported from TabzChrome) but is missing:\n\n## Missing Features\n\n1. **Filter to .prompts files** - Button/toggle to show only .prompts files in file tree\n2. **Fillable fields** - .prompts files have `{{field_name}}` placeholders that should be:\n   - Detected and parsed\n   - Rendered as input fields in the UI\n   - Filled in by user before sending\n\n## Reference\nTabzChrome has:\n- A prompts filter button in the file browser\n- A prompts viewer that renders fillable fields as inputs\n- Ability to fill fields and generate the final prompt\n\n## .prompts File Format\n```\nYou are a {{role}}.\n\nHelp me with {{task}}.\n```\n\nFields in `{{double_braces}}` become fillable inputs.","notes":"## Retro\n- What worked: Clear reference implementation from TabzChrome with line numbers made it easy to understand the expected behavior\n- What was unclear: Nothing major - the task was well-specified with exact file references","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T22:25:58.297143024-05:00","updated_at":"2026-01-28T22:58:50.589701459-05:00","closed_at":"2026-01-28T22:58:50.589701459-05:00","close_reason":"Done: Added prompts filter button and fillable field rendering to Files page. Created promptyUtils.ts for parsing, InlineField.tsx for pink inline inputs with dropdown support, updated PromptyViewer with editable fields and progress indicator, and added FilteredFileList component for filtered file trees.","labels":["files","prompts","ready","ui"]}
{"id":"personal-homepage-5j8","title":"WorkingDirSelector: nested button hydration error","description":"Console error: `\u003cbutton\u003e cannot be a descendant of \u003cbutton\u003e`\n\nIn `components/WorkingDirSelector.tsx`, the recent directories list has a button containing another button (remove icon).\n\n**Current structure (broken):**\n```tsx\n\u003cbutton onClick={selectDir}\u003e  {/* outer */}\n  \u003cFolderOpen /\u003e\n  \u003cspan\u003e{dir}\u003c/span\u003e\n  \u003cButton onClick={removeDir}\u003e  {/* nested - invalid HTML */}\n    \u003cX /\u003e\n  \u003c/Button\u003e\n\u003c/button\u003e\n```\n\n**Fix:** Change outer element to `div` with proper click handling, or restructure.","notes":"## Retro\n- Straightforward fix as described in the prepared prompt\n- Changed outer button to div with role='button', tabIndex=0, and keyboard handlers\n- The DropdownMenuItem case (lines 302-324) does not need fixing since DropdownMenuItem renders as a div with role='menuitem', not a button\n- Build passes with no TypeScript errors","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-22T23:46:52.773694858-05:00","updated_at":"2026-01-22T23:55:16.201205264-05:00","closed_at":"2026-01-22T23:55:16.201205264-05:00","close_reason":"Done: Fixed nested button hydration error by replacing outer button with div role=button with keyboard accessibility","labels":["html-validity","hydration","wave-1"]}
{"id":"personal-homepage-5k0","title":"Eye icon on Setup wizard step 2 doesn't toggle on/off when clicked","description":"The password visibility toggle (eye icon) on Setup wizard step 2 (API Keys) doesn't toggle the visibility state when clicked. The icon should switch between show/hide states and toggle the input field between password and text type.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T22:03:31.798970889-05:00","created_by":"matt","updated_at":"2026-01-04T23:20:14.702929433-05:00","closed_at":"2026-01-04T23:20:14.702929433-05:00","close_reason":"Fixed: Added z-10 to eye icon toggle buttons for proper click handling"}
{"id":"personal-homepage-5n0h","title":"AI Workspace: Add keyboard shortcuts with discoverability","description":"Keyboard shortcuts exist but aren't discoverable.\n\n**Features to add:**\n- `Cmd+K` - Quick search/command palette\n- `Cmd+Enter` - Send message\n- `Shift+Enter` - New line (already works, but not documented)\n- `Cmd+N` - New conversation\n- `Cmd+/` - Show shortcuts help\n\n**Implementation:** Add shortcuts help tooltip/modal accessible from header.\n\n**Files:** app/sections/ai-workspace.tsx","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:53.28431141-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:00:53.28431141-05:00","dependencies":[{"issue_id":"personal-homepage-5n0h","depends_on_id":"personal-homepage-hiqh","type":"blocks","created_at":"2026-01-29T02:02:33.447904789-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-5q7h","title":"AI Workspace: Replace window.location.reload() with state updates","description":"Agent CRUD operations (lines 383, 406 in ai-workspace.tsx) trigger full page reload.\n\n**Problem:** Poor UX - users lose any unsaved state, jarring experience.\n\n**Fix:** After agent create/update/delete API calls, update local state directly instead of reloading page.\n\n**Files:** app/sections/ai-workspace.tsx","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:01:00.359070737-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:01:00.359070737-05:00"}
{"id":"personal-homepage-5t2","title":"Unify dual Device Selectors (drawer + section)","description":"## Bug\nTwo places to select playback device (drawer + section) do not sync.\n\n## Solution\n- Single source of truth for selected device\n- Both selectors read/write from same state\n- Consider lifting state to MusicPlayerProvider\n\n## Files\n- components/PersistentMusicDrawer.tsx (drawer selector)\n- app/sections/music-player.tsx (section selector)\n- components/MusicPlayerProvider.tsx (shared state)","notes":"## Retro\n\n**Findings:**\n- Issue description mentioned dual device selectors, but only one device selector exists in PersistentMusicDrawer.tsx\n- music-player.tsx delegates to SpotifyPlayer component which has no device selector\n- The real issue was using device.is_active from Spotify API response instead of centralized state\n\n**Solution implemented:**\n- Added activeDeviceId state to MusicPlayerProvider as single source of truth\n- Added switchToDevice() function with optimistic UI updates and error rollback\n- activeDeviceId syncs from: SDK deviceId on init, remotePlayback.device.id when detected\n- Updated PersistentMusicDrawer to use activeDeviceId and switchToDevice\n\n**Files modified:**\n- components/MusicPlayerProvider.tsx - added centralized device state and switchToDevice\n- components/PersistentMusicDrawer.tsx - use provider state instead of device.is_active\n\n**Build:** Passes, TypeScript clean","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T23:34:59.538891372-05:00","updated_at":"2026-01-20T23:49:23.852303946-05:00","closed_at":"2026-01-20T23:49:23.852303946-05:00","close_reason":"Done: Added centralized activeDeviceId state and switchToDevice function to MusicPlayerProvider. Updated PersistentMusicDrawer to use provider state for consistent device selection UI.","labels":["music-player","ready","spotify"]}
{"id":"personal-homepage-5tq","title":"Explore claude-code-templates CLI for real-time analytics dashboard","description":"Evaluate the claude-code-templates CLI tool (npx cct --analytics) for real-time Claude Code analytics.\n\n## Context\nThe davila7/claude-code-templates project has a comprehensive analytics dashboard that:\n- Shows real-time token usage across sessions\n- Tracks conversation states (active, idle, inactive)\n- Monitors Claude Max session windows (5-hour periods)\n- Provides year-in-review statistics\n\n## Research Questions\n1. Can we run their analytics dashboard alongside TabzChrome?\n2. Would it conflict with our existing monitoring?\n3. Can we embed their dashboard in our kanban board?\n4. Is it worth maintaining separately vs integrating features?\n\n## Try\n```bash\nnpx cct --analytics  # Starts analytics server on port 3336\nnpx cct --plugins    # Plugin dashboard on port 3336\nnpx cct --health-check  # System diagnostics\n```\n\n## Related\n- GitHub: https://github.com/davila7/claude-code-templates\n- TabzChrome: plugins/conductor/scripts/capture-session.sh (our current approach)\n- personal-homepage-d9r (transcript viewer feature)","notes":"prepared.skills: meta:context-engineering\nprepared.files: docs/\nprepared.prompt: |\n  ## Task: Explore claude-code-templates CLI for real-time analytics dashboard\n  \n  ### Context\n  Investigate claude-code-templates CLI tool to see if it can be used\n  for building a real-time analytics dashboard.\n  \n  ### Key Files\n  - docs/ (documentation directory)\n  \n  ### Skills\n  Use /meta:context-engineering for CLI exploration\n  \n  ### Approach\n  This is an exploration task - document findings and create follow-up issues.\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-5tq","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-09T13:49:06.402202254-05:00","created_by":"marci","updated_at":"2026-01-11T04:09:27.571672211-05:00","closed_at":"2026-01-11T04:09:27.571672211-05:00","close_reason":"Exploration complete. Researched claude-code-templates CLI for real-time analytics dashboard. Tool is for monitoring Claude Code sessions, not general analytics. Created follow-up issues: personal-homepage-npw (Add Claude Code Analytics Section) and personal-homepage-ay4 (Research Anthropic Analytics API)."}
{"id":"personal-homepage-5x8","title":"Agent Cards: Per-agent MCP tool configuration","description":"Allow agents to specify which MCP servers/tools they can use. Pass to Claude via --allowed-tools/--disallowed-tools. Store in agent config.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:25:06.90724607-05:00","created_by":"marci","updated_at":"2026-01-09T01:45:46.502061867-05:00","closed_at":"2026-01-09T01:45:46.502061867-05:00","close_reason":"Implemented AgentCard type with mcpTools field in lib/agents/types.ts and AgentRegistry in lib/agents/registry.ts","dependencies":[{"issue_id":"personal-homepage-5x8","depends_on_id":"personal-homepage-jjz","type":"blocks","created_at":"2026-01-08T18:25:40.145799866-05:00","created_by":"marci"}]}
{"id":"personal-homepage-61lq","title":"UX: Project detail view should keep left sidebar like other pages","description":"When selecting a project in the Projects page, it currently opens full-screen and hides the personal-homepage left sidebar. This is inconsistent with other pages.\n\n## Current Behavior\n- Click a project in Projects page\n- Project opens full-screen, left sidebar disappears\n- No way to navigate back without browser back button\n\n## Expected Behavior\n- Project detail should open like other pages/sections\n- Left sidebar remains visible (but can be collapsed)\n- Consistent navigation experience\n\n## Implementation\n- Find project detail view component\n- Change from full-screen/modal to section-style layout\n- Keep sidebar visible with project content in main area","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-23T22:13:40.706105174-05:00","updated_at":"2026-01-23T22:17:33.52424791-05:00","closed_at":"2026-01-23T22:17:33.52424791-05:00","close_reason":"Fixed: Project detail now renders inline with sidebar visible instead of navigating to full-screen route","labels":["navigation","projects","ready","ux"]}
{"id":"personal-homepage-633","title":"Agent Cards: Auto-extract selectors from DOM","description":"Create utility to extract selectors for a section. Two sources: (1) Parse DOM for data-tabz-* attributes at runtime, (2) Parse docs/tabz-integration.md selector tables as structured reference. Generate SelectorDoc array with selector, description, and examples. Can run client-side via tabz MCP or server-side.","notes":"conductor_session: ctt-conductor-f438d3fa\nworker_session: ctt-worker-633-8e6919e3\nstarted_at: 2026-01-09T13:56:37-05:00","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:25:05.113474808-05:00","created_by":"marci","updated_at":"2026-01-09T14:00:18.023079422-05:00","closed_at":"2026-01-09T14:00:18.023079422-05:00","close_reason":"feat(agents): add selector-extractor utility for Agent Cards"}
{"id":"personal-homepage-63l","title":"Polish pass: make all pages more cohesive","description":"General polish needed across all pages to make the UI more cohesive. The AI Workspace and Kanban pages work well together and could be a powerful combination - use these as reference for quality level.","status":"deferred","priority":2,"issue_type":"epic","created_at":"2026-01-21T20:41:04.270645329-05:00","updated_at":"2026-01-21T20:47:34.441268385-05:00","labels":["cohesion","polish","ux"]}
{"id":"personal-homepage-658","title":"[Kanban Migration] Copy shared UI components (badges, cards, indicators)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:10:24.163524098-05:00","created_by":"matt","updated_at":"2026-01-04T23:23:10.766381594-05:00","closed_at":"2026-01-04T23:23:10.766381594-05:00","close_reason":"Implemented: Copied shared UI components (PriorityBadge, AgentBadge, AgentCard, TimeEstimate, ContextIndicator) from ai-kanban-board to app/components/kanban/shared/"}
{"id":"personal-homepage-6e0","title":"Agent Cards: AI avatar generation","description":"Integrate DALL-E or similar for generating agent avatars. Generate based on personality/role description. Allow regeneration. Store as URL or base64.","notes":"prepared.skills: frontend:frontend-development, conductor:tabz-artist\nprepared.files: components/agents/AgentCard.tsx\nprepared.prompt: |\n  ## Task: Agent Cards - AI avatar generation\n  \n  ### Context\n  Generate AI avatars for agent cards using DALL-E or similar.\n  \n  ### Key Files\n  - components/agents/AgentCard.tsx (agent card component)\n  \n  ### Skills\n  Use /frontend:frontend-development for React UI\n  Use /conductor:tabz-artist for AI image generation\n  \n  ### Approach\n  Use tabz-artist skill to generate avatars via DALL-E.\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-6e0","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T18:25:20.63430852-05:00","created_by":"marci","updated_at":"2026-01-11T04:24:11.58917582-05:00","closed_at":"2026-01-11T04:24:11.58917582-05:00","close_reason":"AI avatar generation implemented with useAvatarGeneration hook, wizard UI, and AgentCard regeneration"}
{"id":"personal-homepage-6ed","title":"Fix double responses in AI Workspace chat","description":"## Bug\nAI Workspace chat shows duplicate/double responses to user questions.\n\n## Symptoms\n- User asks a question\n- Two identical (or similar) responses appear\n\n## Investigation\n- Check for duplicate API calls\n- Check for duplicate state updates\n- Check for duplicate message rendering\n\n## Files\n- app/sections/ai-workspace.tsx\n- Related hooks/components for chat functionality","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:35:12.053190268-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:43:53.243652303-05:00","closed_at":"2026-01-21T00:43:53.243652303-05:00","close_reason":"Fixed: Prevented duplicate responses from race condition in AI Workspace","labels":["ai-workspace","bug","ui"]}
{"id":"personal-homepage-6j8","title":"Add API endpoint for updating issue notes","description":"Need an API endpoint to update issue notes (used for storing generated prompts). The current PATCH endpoint supports status/priority/title/description/labels/assignee/estimate but not notes.\n\n## Endpoint\nPATCH /api/beads/issues/[id]\nBody: { notes: string, workspace: string }\n\n## Implementation\n- Update app/api/beads/issues/[id]/route.ts\n- Add notes parameter to bd update call: args.push(\"--notes\", notes)\n\n## Files to modify\n- app/api/beads/issues/[id]/route.ts","notes":"## Retro\nStraightforward implementation following the detailed prompt. All four changes were clear and localized to one file. Build passed on first try after fixing a stale .next cache issue.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T02:07:02.923766143-05:00","updated_at":"2026-01-23T02:48:00.036346118-05:00","closed_at":"2026-01-23T02:48:00.036346118-05:00","close_reason":"Done: Added notes field to RawBeadsIssue interface, transformIssue mapping, and PATCH handler with --notes parameter support","labels":["api","beads","kanban","ready","wave-1"]}
{"id":"personal-homepage-6kdn","title":"Bug: Kanban chat doesn't fit display width","description":"The AI chat in kanban board doesn't fit the width of the display/container properly.\n\n## Expected\n- Chat should fill available width\n- Responsive to container size\n- No overflow or cut-off content","notes":"## Retro\n- What worked: Simple one-line fix, issue was well-scoped\n- What was unclear: Nothing, the problem and solution were straightforward","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:06:21.239395662-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T21:20:08.883397143-05:00","closed_at":"2026-01-28T21:20:08.883397143-05:00","close_reason":"Done: Added w-full class to TaskChat outer container to fill parent width properly","labels":["kanban","ready","ui"]}
{"id":"personal-homepage-6qa","title":"Music Player: Add actual audio playback with HTML5 Audio","description":"Replace simulated progress with real audio playback using HTML5 Audio API.\n\nCurrent state: Fake progress bar with setInterval simulation.\n\nFeatures to add:\n1. **HTML5 Audio Element**: Real audio playback\n2. **URL Support**: Play audio from remote URLs (.mp3, .ogg, .wav)\n3. **File Picker**: Load local audio files via browser File API\n4. **Real Controls**: Play/pause, seek, volume actually control audio\n\nImplementation:\n- Add audioRef with HTMLAudioElement\n- Wire up play/pause to audio.play()/pause()\n- Sync progress bar with audio.currentTime/duration\n- Handle audio events (ended, timeupdate, loadedmetadata)\n- Add URL input modal to add tracks\n- File picker for local audio files\n- Maintain queue functionality with real playback\n\nAudio sources to support:\n- Direct audio URLs (.mp3, .ogg, .wav, .m4a)\n- Local files via File API\n- (Future) Streaming services integration","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T10:41:00.749783802-05:00","created_by":"matt","updated_at":"2026-01-05T11:48:24.191923708-05:00","closed_at":"2026-01-05T11:48:24.191923708-05:00","close_reason":"Implemented HTML5 Audio playback with URL input modal and file picker","dependencies":[{"issue_id":"personal-homepage-6qa","depends_on_id":"personal-homepage-g6u","type":"blocks","created_at":"2026-01-05T10:41:10.815116599-05:00","created_by":"matt"}]}
{"id":"personal-homepage-6r7h","title":"Refactor: Unified agent system with settingsDir","description":"Simplify and unify how agents work across the app. Currently agents are file-based in agents/ folder with complex config. Refactor to a simpler model where agents are command configs that can live anywhere.","design":"## Agent Structure\n\nEach agent is a simple config:\n```json\n{\n  \"name\": \"Weather Agent\",\n  \"command\": \"claude\",\n  \"flags\": [\"--model\", \"sonnet\"],\n  \"workingDir\": \"~/projects\",\n  \"avatar\": \"/avatars/weather.png\",\n  \"sections\": [\"weather\"],\n  \"settingsDir\": \"./agents/weather-agent/\"\n}\n```\n\n**Fields:**\n- `name` - display name\n- `command` - what to run (claude, codex, etc.)\n- `flags` - array of CLI flags\n- `workingDir` - optional default working directory\n- `avatar` - optional icon\n- `sections` - which pages auto-select this agent\n- `settingsDir` - where config files live (for \"Open Settings\" button)\n\n## Storage\n\nAll agents stored in `agents/custom-agents.json`. This includes:\n- Page agents (weather, music, files, etc.)\n- Dev tool profiles (claude opus, codex fast, etc.)\n- Plugin agents from other repos\n\nThe `settingsDir` field lets each agent point to its actual config location, whether that is:\n- `./agents/weather-agent/` (local page agent)\n- `~/.claude/` (Claude CLI config)\n- `~/.codex/` (Codex config)\n- `~/other-repo/plugins/` (plugin from another repo)\n\n## UI Changes\n\n### Settings Page (Sections tab)\n- Add agent dropdown to each section row\n- Lets you assign any agent to any page\n- Changes saved to preferences (overrides agent sections field)\n\n### AI Workspace Settings\nSimplify to just:\n1. Quick Prompts editor (the useful feature)\n2. Open Agents Folder button\n3. Optional: New Agent form (name, command, flags, workingDir, avatar, settingsDir)\n\nRemove:\n- Temperature/Max Tokens sliders (only work for Docker, misleading)\n- Model selection (agents define this)\n- Append System Prompt (part of agent config/flags)\n- Claude/Codex specific settings sections\n\n## Implementation Steps\n\n1. Create `agents/custom-agents.json` with new structure\n2. Migrate existing page agents to new format\n3. Update agent loading to read from custom-agents.json\n4. Add agent dropdown to SectionSettings component\n5. Store section-\u003eagent overrides in useSectionPreferences\n6. Simplify AI Workspace settings panel\n7. Add \"Open Settings\" button that opens settingsDir in Files page","acceptance_criteria":"- [ ] agents/custom-agents.json exists with unified agent format\n- [ ] Existing page agents migrated to new format\n- [ ] Settings \u003e Sections shows agent dropdown per section\n- [ ] Agent dropdown changes persist\n- [ ] AI Workspace settings simplified to Quick Prompts + Open Folder\n- [ ] \"Open Settings\" opens the agent settingsDir in Files page\n- [ ] Can add new agents via UI (name, command, flags, workingDir, avatar, settingsDir)","notes":"## Retro\n- What worked: Created unified agent config format in custom-agents.json, added agent dropdown to Settings \u003e Sections tab, simplified AI Workspace settings\n- What was unclear: Nothing significant - task was well-scoped","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-28T22:12:36.509236247-05:00","updated_at":"2026-01-28T22:33:02.34240566-05:00","closed_at":"2026-01-28T22:33:02.34240566-05:00","close_reason":"Done: Refactored agent system to use unified config format (custom-agents.json) with settingsDir support. Added agent dropdown to Settings \u003e Sections tab, simplified AI Workspace settings, and added Open Settings button for agent config.","labels":["agents","ai-workspace","ready","refactor","settings"]}
{"id":"personal-homepage-6t7","title":"Music: Same song appears 100x in Recent section","description":"## Bug\nThe Recent section shows the same song duplicated ~100 times with no way to remove entries.\n\n### Expected\n- Recent songs should be deduplicated\n- Should have option to clear/remove items\n\n### Likely Cause\n`getRecentlyPlayed` API returns play history which includes every play event, not unique tracks.\n\n### Fix\n- Deduplicate by track ID when displaying\n- Or use a Set to filter unique tracks\n- Add clear history option","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:15:48.073083931-05:00","created_by":"marci","updated_at":"2026-01-10T18:57:18.735589709-05:00","closed_at":"2026-01-10T18:57:18.735589709-05:00","close_reason":"fix(spotify): deduplicate recently played tracks"}
{"id":"personal-homepage-6xn","title":"Fix GitHub files tree - file names are centered instead of left-aligned","description":"## Bug\nIn the Files page, when viewing GitHub repository files, the file names in the tree are centered instead of left-aligned like local files.\n\n## Expected\nFile names should be left-aligned consistently for both local and GitHub files.\n\n## Location\n- app/components/files/FileTree.tsx (likely different rendering for GitHub vs local)","notes":"## Retro\n- Issue was simple: flex-1 class on file name span caused text to center instead of left-align\n- Fix: removed flex-1 from GitHubFileTree.tsx line 331 to match FileTree.tsx styling\n- Build passes, pre-existing deprecation warnings unrelated to this change","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:56:44.280216612-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T01:20:47.634313384-05:00","closed_at":"2026-01-21T01:20:47.634313384-05:00","close_reason":"Fixed GitHub file tree text alignment - removed flex-1 class to match local file tree styling","labels":["files","gate:codex-review,gate:visual-qa","github","ready","ui"]}
{"id":"personal-homepage-6zbo","title":"Add Generate Prompt button to KanbanCard","description":"Add a button on each issue card that generates a worker prompt using AI. Similar pattern to TabzChrome commit message generation.\n\n## UI Behavior\n1. Sparkles/Wand icon button on card (subtle, appears on hover)\n2. Click: Shows loading spinner, calls generate-prompt API\n3. Success: Opens inline editor with generated prompt\n4. User can edit, then save to issue notes\n5. Click again: Regenerates (with confirmation if existing)\n6. Visual indicator when issue has a stored prompt\n\n## State\n- generatingPrompt: boolean (per card)\n- editingPrompt: boolean (per card)  \n- promptDraft: string (current edit value)\n\n## API calls\n- POST /api/beads/issues/[id]/generate-prompt\n- PATCH /api/beads/issues/[id] { notes: ... }\n\n## Files to modify\n- app/components/kanban/board/KanbanCard.tsx (add button and inline editor)\n- May need hook: usePromptGeneration.ts for shared logic\n\n## Design\nCard footer shows:\n[Sparkles] Generate Prompt  →  [Loading...]  →  [textarea with prompt] [Save] [Cancel]\n\nIf prompt exists:\n[FileText] Edit Prompt | [RefreshCw] Regenerate","notes":"## Retro\n\n### Implementation Summary\nCreated reusable usePromptGeneration hook and added prompt generation UI to KanbanCard.\n\n### Files Changed\n- Created: hooks/usePromptGeneration.ts - Hook with generatePrompt, savePrompt, helper functions\n- Modified: app/components/kanban/board/KanbanCard.tsx - Added prompt generation UI\n- Modified: app/components/kanban/board/KanbanColumn.tsx - Pass workspace prop\n- Modified: app/components/kanban/board/KanbanBoard.tsx - Pass workspace to columns\n\n### Key Design Decisions\n1. Prompts stored in notes with ## prepared.prompt section header\n2. Notes fetched on-demand when generating (not in list response to keep it fast)\n3. Card tracks prompt state locally after first check\n4. Inline editor appears with animation (AnimatePresence)\n5. Regenerate requires confirmation to prevent accidental overwrite\n\n### What Went Well\n- Detailed issue notes made implementation straightforward\n- Dependencies (API endpoints) were already completed and working\n- TypeScript types and existing patterns were easy to follow\n\n### Potential Improvements\n- Could add initialNotes prop to avoid fetch on first generate\n- Could cache prompt existence across cards to avoid redundant checks","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T02:07:23.076695326-05:00","updated_at":"2026-01-23T03:30:04.909041666-05:00","closed_at":"2026-01-23T03:30:04.909041666-05:00","close_reason":"Completed","labels":["ai","kanban","ui","wave-2"],"dependencies":[{"issue_id":"personal-homepage-6zbo","depends_on_id":"personal-homepage-kjv","type":"blocks","created_at":"2026-01-23T02:07:23.080098014-05:00","created_by":"daemon"},{"issue_id":"personal-homepage-6zbo","depends_on_id":"personal-homepage-6j8","type":"blocks","created_at":"2026-01-23T02:07:23.082086881-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-715","title":"Add additional Spotify OAuth scopes for enhanced features","description":"Add missing Spotify API scopes to enable additional features like top tracks, followed artists, and playlist management.","design":"Update SPOTIFY_SCOPES in lib/spotify.ts to include:\n- user-top-read: Get user's top artists/tracks (4 weeks, 6 months, all time)\n- user-follow-read: See followed artists\n- user-follow-modify: Follow/unfollow artists\n- playlist-modify-private: Create/edit private playlists\n- playlist-modify-public: Create/edit public playlists","acceptance_criteria":"- All new scopes added to SPOTIFY_SCOPES array\n- User can re-authenticate to get new permissions\n- No breaking changes to existing functionality","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T14:15:18.143409558-05:00","updated_at":"2026-01-05T14:15:48.059260462-05:00","closed_at":"2026-01-05T14:15:48.059260462-05:00","close_reason":"Added 5 new scopes: user-top-read, user-follow-read, user-follow-modify, playlist-modify-private, playlist-modify-public","labels":["music-player","oauth","spotify"]}
{"id":"personal-homepage-7e9m","title":"Add real-time analytics from Claude logs instead of stats cache","description":"The Analytics page currently reads from ~/.claude/stats-cache.json which is only updated when running /stats in Claude Code. This means:\n- Current day's usage never shows until the next day\n- Data is always stale until user manually runs /stats\n\n## Problem\n- /stats only includes complete days, not partial current-day data\n- Users expect to see today's usage in real-time\n\n## Proposed Solution\nRead Claude's raw log files directly to compute real-time usage:\n\n1. Find Claude's session logs (likely in ~/.claude/ somewhere)\n2. Parse recent sessions to extract token usage\n3. Merge with stats-cache.json data for historical\n4. Show current day's partial data with \"live\" indicator\n\n## Research Needed\n- Where does Claude Code store session logs?\n- What format are they in (JSONL, etc.)?\n- Can we efficiently parse just today's data?\n\n## Alternative\n- Poll stats-cache.json for changes and show \"last updated\" timestamp\n- Add a \"Run /stats to refresh\" prompt in the UI","notes":"## Retro\n- What worked: JSONL log format was well-structured with clear type and usage fields. Parallel file parsing made it efficient.\n- What was unclear: Initial confusion about whether dailyModelTokens contained input or output tokens (turns out it was output only)\n- Discovery: ccusage repo was less helpful than expected - actual log structure was more discoverable by examining files directly","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T16:08:04.895800273-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T16:25:01.70093284-05:00","closed_at":"2026-01-28T16:25:01.70093284-05:00","close_reason":"Done: Implemented real-time analytics from Claude session logs. Created lib/claude-logs.ts to parse JSONL files, updated API route to merge live data with cached stats, and added LIVE indicator to the chart for today's data.","labels":["ready"]}
{"id":"personal-homepage-7f0","title":"Persistent music player bottom drawer","description":"Make the Spotify player a persistent bottom drawer/bar that stays visible across all sections of the app, similar to how Spotify's native apps work.","design":"## Approach\n1. Extract the 'Now Playing Bar' component from SpotifyPlayer.tsx\n2. Move it to the root layout (app/layout.tsx) or main page\n3. Use React context or Zustand to share player state globally\n4. The bar should:\n   - Show current track, play/pause, skip, progress\n   - Have device selector\n   - Expand/collapse to show more controls\n   - Only render when authenticated with Spotify\n\n## Remote Control Mode\n- Use `getPlaybackState()` API to poll current playback from any active device\n- This allows the drawer to show what's playing on phone/desktop even without Web Playback SDK\n- Poll every 1-5 seconds when drawer is visible\n- Update track info, progress, play state from external devices\n\n## Top Tracks Feature\n- Add a 'Top Tracks' tab in Music Player section\n- Use `getTopTracks()` API with three time ranges:\n  - Last 4 weeks (short_term)\n  - Last 6 months (medium_term)\n  - All time (long_term)\n- Already have `user-top-read` scope configured\n\n## Remember Last Music Source\n- Store selected mode (SynthWave vs Spotify) in localStorage\n- Key: `music-player-mode` with values 'synthwave' | 'spotify'\n- On mount, read from localStorage and default to that mode\n- Persist whenever user switches modes\n\n## Considerations\n- Web Playback SDK must stay mounted to keep playing\n- Need to lift player state up to a global provider\n- Consider a mini-player vs full drawer mode\n- Handle the case when user navigates to Music Player section (avoid duplicate UI)","acceptance_criteria":"- Music continues playing when navigating between sections\n- Player bar visible at bottom of screen on all pages\n- Current track info and basic controls always accessible\n- Can expand for more controls or collapse to minimal view\n- Works with both SDK playback and remote control modes\n- Remote control mode shows playback from external devices via getPlaybackState()\n- Top Tracks tab shows user's most played songs with time range selector\n- Music source (SynthWave/Spotify) remembered in localStorage across sessions","notes":"conductor_session: ctt-conductor-f438d3fa\nworker_session: ctt-worker-7f0-428cdf3b\nstarted_at: 2026-01-09T13:56:37-05:00","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T15:07:27.972669571-05:00","updated_at":"2026-01-09T14:03:56.245172076-05:00","closed_at":"2026-01-09T14:03:56.245172076-05:00","close_reason":"feat(music): add persistent music player bottom drawer","labels":["layout","music-player","spotify","ux"]}
{"id":"personal-homepage-7khz","title":"AI Workspace: Redesign landing page with agent-first UX","description":"The AI Workspace page needs UX improvements to make agents more prominent and show persistence status.\n\n## Current Problems\n1. Settings are separate from launching a new chat - awkward flow\n2. Conversation history just shows title, not which agent\n3. No indication of whether a chat is persistent (💾) or session-only\n4. \"New Conversation\" is generic - doesn't let you pick agent first\n\n## Proposed Changes\n\n### Option A: Agent-First Landing\n- Default view shows agent grid/list\n- Each agent card shows: avatar, name, description, persistence badge (💾 or ○)\n- Click agent → starts new chat with that agent\n- Settings inline on agent card or quick-access\n\n### Conversation History Improvements\n- Show agent avatar + name alongside conversation title\n- Add persistence indicator (💾 = JSONL saved, ○ = session only)\n- Group by agent or show agent icon in list\n\n## Key Files\n- `app/sections/ai-workspace.tsx` - Main page component\n- `components/agents/AgentGallery.tsx` - Already has grid/list view\n- `components/agents/AgentCard.tsx` - Already has card component\n- `lib/ai-workspace.ts` - Conversation types\n\n## Persistence Info\n- Currently only Claude has JSONL persistence\n- Other agents are session-only (localStorage)\n- Could add `persistent: boolean` to agent config\n\n## Design Considerations\n- Keep conversation sidebar, but enhance it\n- Agent gallery as landing/home state when no active chat\n- Quick switch between agents mid-session?","notes":"## Gate Failure - Codex Review (2nd Attempt)\n\n**Blocking Issues:**\n\n1. **BLOCKER - Security**: /api/files exposure remains via Files section and FilesContext\n   - Fix only removed Browse Files drawer from ProjectOverview (components/projects/ProjectOverview.tsx)\n   - Full file browser and API calls still intact in Files section:\n     - app/sections/files.tsx:1\n     - app/contexts/FilesContext.tsx:280\n   - If requirement is 'no /api/files exposure,' this is incomplete\n   - If scope is only ProjectOverview drawer, that's complete but should be clarified\n\n2. **MAJOR - Logic Bug**: Agent selection UI can desync from persisted agentId\n   - Agent agentId persists to conversation ✓\n   - BUT: UI state isn't rehydrated on conversation switch ✗\n   - Active-conversation effect updates model/project only (ai-workspace.tsx:259)\n   - Selected agent indicator and settings can be out of sync with conversation's agentId\n   - Agent selection handling at ai-workspace.tsx:320 needs fix\n\n**Positive Notes:**\n- Agent-first landing page implemented correctly ✓\n- Persistence badges in conversation list ✓\n- Avatar URL detection improved for absolute URLs ✓\n- Tests PASSED (28 tests) ✓\n\n**Questions:**\n- Does 'no /api/files exposure' mean globally or just ProjectOverview?\n- Is agent UI state sync across conversations required?\n\nFix and close again, or clarify scope and add skip-gates label.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T19:18:58.308264728-05:00","updated_at":"2026-01-23T20:39:25.434848664-05:00","closed_at":"2026-01-23T20:39:25.434848664-05:00","close_reason":"Merged manually - security gate override for local dashboard","labels":["ai-workspace","frontend","gate:codex-review","gate:test-runner","gate:visual-qa","ready","ux"]}
{"id":"personal-homepage-7xc","title":"Create Files section page","description":"## Task\nCreate the main Files section integrating all components.\n\n## Requirements\n- Register in navigationItems\n- Add to Section type in app/page.tsx\n- Wire up FilesContext provider\n- Connect FileTree + FileViewer\n\n## Location\n- app/sections/files.tsx","notes":"## Retro\n\n### Verification Complete\nAll requirements already implemented:\n- Files section registered in navigationItems (line 144)\n- files included in ToggleableSection type\n- FilesProvider wraps FilesSectionContent\n- FileTree + FileViewer properly connected\n- GitHubFileTree + GitHubFileViewer for GitHub integration\n- PluginList for plugin management\n- Proper glass-dark styling and data-tabz attributes\n\n### Build Status\n- TypeScript compilation: Passed\n- Static generation: Passed (33/33 pages)\n- No errors or warnings\n\n### No Changes Needed\nThis was a verification task - the Files section was already fully implemented by previous workers (0lp, 29y, u3j).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T23:35:18.346578242-05:00","updated_at":"2026-01-20T23:59:57.793746559-05:00","closed_at":"2026-01-20T23:59:57.793746559-05:00","close_reason":"Done: Files section fully implemented - FilesProvider wraps content, FileTree+FileViewer connected, registered in navigation, build passes","labels":["files","migration"],"dependencies":[{"issue_id":"personal-homepage-7xc","depends_on_id":"personal-homepage-29y","type":"blocks","created_at":"2026-01-20T23:35:27.567529632-05:00","created_by":"daemon"},{"issue_id":"personal-homepage-7xc","depends_on_id":"personal-homepage-0lp","type":"blocks","created_at":"2026-01-20T23:35:28.209659963-05:00","created_by":"daemon"},{"issue_id":"personal-homepage-7xc","depends_on_id":"personal-homepage-u3j","type":"blocks","created_at":"2026-01-20T23:35:28.853403028-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-83kd","title":"Bug: Email search bar has white background in dark theme","description":"The search bar in the Email section (app/sections/email.tsx around line 721) displays with a white background in dark mode. The text is not visible. Need to fix theming.\n\nTried:\n- bg-muted/50\n- bg-secondary/50\n- Plain input with explicit classes\n\nStill showing white. May need to check parent containers or use \\!important overrides.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T00:47:26.448643133-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T00:50:18.617276603-05:00","closed_at":"2026-01-29T00:50:18.617276603-05:00","close_reason":"Done: Fixed email search bar by changing bg-background/50 to bg-muted/50. The muted CSS variable provides appropriate neutral background contrast across all themes (light, dark, carbon, etc.)"}
{"id":"personal-homepage-856v","title":"Bug: Generic agent names (Amp, Cursor) in kanban dropdown","description":"The agent dropdown in kanban board chat shows generic agent names for tools the user doesn't have (Amp, Cursor, etc).\n\n## Expected\n- Only show agents the user actually has configured\n- Or remove hardcoded agent list\n- Use the same agent registry as AI Workspace","notes":"## prepared.prompt\n\n**Task:** Remove generic agent names (Amp, Cursor) from kanban dropdown.\n\n**Problem:** Shows agents user doesn't have.\n\n**Files:**\n- `app/components/kanban/` - agent dropdown component\n\n**Fix:** Use the same agent registry as AI Workspace (/api/ai/agents) instead of hardcoded list.\n\nWhen done, run `bd close personal-homepage-856v`.","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:06:17.201522052-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T21:18:37.262912184-05:00","closed_at":"2026-01-28T21:18:37.262912184-05:00","close_reason":"Replaced hardcoded agent list in kanban AgentSelector with dynamic agents from /api/ai/agents/registry using useAgents hook. Now dropdown only shows agents the user has configured instead of generic names like Amp and Cursor.","labels":["agents","kanban","ready"]}
{"id":"personal-homepage-8c3y","title":"Feature: Generate commit message with Haiku (port from TabzChrome)","description":"Port the \"Generate Commit Message\" feature from TabzChrome's dashboard source control page to personal-homepage's project source control pages.\n\n## Reference Implementation\n\nTabzChrome's source control extension page has a button that:\n1. Gets the current git diff\n2. Sends it to Haiku with a prompt to generate a commit message\n3. Populates the commit message field\n\n## Where to Add\n\nThe Files page in personal-homepage has source control features for browsing projects. Add the generate button there.\n\n## Implementation\n\n1. Find TabzChrome's generate commit message code\n2. Create API endpoint: POST /api/git/generate-message\n   - Takes: repo path, staged diff\n   - Uses Haiku to generate message\n   - Returns: suggested commit message\n3. Add \"Generate\" button next to commit message input\n4. Wire up the button to call the endpoint and populate the field","notes":"## Retro\n- What worked: Porting the TabzChrome implementation was straightforward since patterns were well-documented\n- What was unclear: Nothing - the task description had all necessary reference implementation locations","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T22:20:37.842165641-05:00","updated_at":"2026-01-28T22:50:16.8199684-05:00","closed_at":"2026-01-28T22:50:16.8199684-05:00","close_reason":"Done: implemented generate commit message feature with API endpoint at /api/git/generate-message and Sparkles UI button in ProjectSourceControl component","labels":["ai","haiku","ready","source-control"]}
{"id":"personal-homepage-8du","title":"Research YouTube API integration for Video Player","description":"Research YouTube Data API integration to replace mock video data with real content.\n\n**YouTube Data API v3:**\n- Search videos, channels, playlists\n- Get video metadata (title, description, thumbnails, stats)\n- Requires API key (free tier: 10,000 units/day)\n- Embed playback via iframe (already working)\n\n**Features to Research:**\n1. Search integration - search YouTube from video player\n2. Channel subscriptions - show videos from followed channels\n3. Playlist support - load real YouTube playlists\n4. Video metadata - real view counts, likes, comments\n5. Comments API - show real YouTube comments (read-only)\n\n**ytconverter Integration (~/xprojects/ytconverter):**\n- Python CLI tool using yt-dlp for YouTube downloads\n- Downloads videos in multiple quality options (up to 4K)\n- Could spawn via TabzChrome terminal integration\n- Integration ideas:\n  - \"Download\" button on YouTube embeds\n  - \"Save to Library\" downloads video locally\n  - Downloaded videos appear in Browse Local tab\n  - Progress indicator during download\n- Could wrap in API endpoint: POST /api/media/download { url, format, quality }\n\n**Local Videos (already partially working):**\n- Browse Local tab works via /api/media/browse\n- Recent fix for subfolder navigation\n- Could add: video thumbnails, duration detection, metadata extraction\n\n**Research Questions:**\n1. API quota usage per operation?\n2. Can we cache responses to reduce API calls?\n3. OAuth vs API key - what features require user auth?\n4. Rate limiting considerations?\n5. ytconverter: Can we get download progress via stdout parsing?\n6. ytconverter: Best way to handle async long-running downloads?\n\n**Deliverable:** Implementation plan with API setup steps and feature prioritization.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T12:38:30.196028542-05:00","updated_at":"2026-01-05T12:55:59.516811637-05:00","closed_at":"2026-01-05T12:55:59.516811637-05:00","close_reason":"Implemented: Created docs/research/video-player-integration.md with YouTube API research, quota analysis, ytconverter integration, ffmpeg commands, and 5-phase implementation roadmap"}
{"id":"personal-homepage-8ew","title":"Fix TabzChrome profile bookmarks not spawning and CSS issues","description":"## Bug\nAfter importing profiles from TabzChrome as bookmarks:\n1. Clicking spawn only pastes to chat instead of actually spawning\n2. CSS issue where clicking spawn turns the item into edit mode\n\n## Expected\n- Spawn button should spawn the profile via TabzChrome API\n- Spawn click should not trigger edit mode\n\n## Files\n- app/sections/bookmarks.tsx\n- Check spawn handler and click event propagation\n- Check CSS/button styling for edit mode trigger","notes":"## Retro\n- Fixed both issues in a single pass: profile bookmarks now use spawnWithOptions instead of runCommand, and stopPropagation prevents edit mode triggering\n- The root cause was handleLaunchTerminal calling runCommand which doesn't support the profile parameter\n- Key insight: Profile bookmarks need spawnWithOptions specifically to pass the profile parameter to TabzChrome API\n- Files modified: app/sections/bookmarks.tsx (added handleSpawnBookmark handler)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T01:52:33.356398993-05:00","updated_at":"2026-01-21T20:13:37.566166156-05:00","closed_at":"2026-01-21T20:13:37.566166156-05:00","close_reason":"Done: Fixed profile bookmark spawn handler - now calls spawnWithOptions for profiles and prevents edit mode trigger via stopPropagation","labels":["bookmarks","ready","tabz","ui"]}
{"id":"personal-homepage-8hhk","title":"AI Workspace: Fix message deduplication race condition","description":"Two simultaneous API calls could both pass the deduplication check, resulting in duplicate messages.\n\n**Root cause:** Dedup check in useAIChat.ts happens before state update completes.\n\n**Fix:** Use ref or mutex pattern to track in-flight message IDs and reject duplicates atomically.\n\n**Files:** hooks/useAIChat.ts","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:58.719265096-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:00:58.719265096-05:00"}
{"id":"personal-homepage-8kb","title":"[Kanban Migration] Test and polish integration","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-04T23:10:32.079444365-05:00","created_by":"matt","updated_at":"2026-01-05T11:49:53.541954103-05:00","closed_at":"2026-01-05T11:49:53.541954103-05:00","close_reason":"Tested Kanban integration and added glass styling for improved readability","dependencies":[{"issue_id":"personal-homepage-8kb","depends_on_id":"personal-homepage-ch8","type":"blocks","created_at":"2026-01-04T23:10:58.45901729-05:00","created_by":"matt"},{"issue_id":"personal-homepage-8kb","depends_on_id":"personal-homepage-y4d","type":"blocks","created_at":"2026-01-04T23:10:58.498849805-05:00","created_by":"matt"},{"issue_id":"personal-homepage-8kb","depends_on_id":"personal-homepage-0d3","type":"blocks","created_at":"2026-01-04T23:10:58.537186318-05:00","created_by":"matt"}]}
{"id":"personal-homepage-8tg","title":"Fix Files page context menu transparent background","description":"## Bug\nRight-clicking on the Files page shows a context menu with a fully transparent background. The menu needs an opaque background to be readable.\n\n## Location\n- app/sections/files.tsx or app/components/files/ (context menu component)\n\n## Fix\nAdd proper background styling (e.g., `bg-popover` or `glass-dark` class) to the context menu container.","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:30:10.457922004-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:46:51.110226307-05:00","closed_at":"2026-01-21T00:46:51.110226307-05:00","close_reason":"Duplicate of qkh - already fixed","labels":["files","quick-fix","ui"]}
{"id":"personal-homepage-8x7","title":"codex-review: 1kd (Device Selector loading)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-20T23:36:57.798797474-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:00:25.749933774-05:00","closed_at":"2026-01-21T00:00:25.749933774-05:00","close_reason":"Review passed: Fix correctly addresses race condition by requiring isReady before device fetch. Exponential backoff with 8 retries is appropriate. Logging improvements aid debugging. No bugs found.","labels":["codex-review","gate"],"dependencies":[{"issue_id":"personal-homepage-8x7","depends_on_id":"personal-homepage-1kd","type":"blocks","created_at":"2026-01-20T23:37:11.177554947-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-91k","title":"Add Prompts Playground for A/B testing models and prompts","description":"# Prompts Playground - Quad-Split Browser Viewer\n\n## Overview\n\nA 2x2 grid of browser panels for watching 4 agents build the same component simultaneously. Each agent works in an isolated project directory with its own dev server. You send them all the same prompt and watch the hot-reloading results side by side.\n\n**Note:** Agent chat/terminals are visible in TabzChrome sidebar - this component is purely the visual comparison view.\n\n## Use Case\n\n1. Spawn 4 agents (via TabzChrome sidebar terminals)\n2. Each runs in isolated directory with own dev server (ports 3001-3004)\n3. Send same prompt to all: \"Build a login form\"\n4. Watch all 4 build it differently in real-time via quad-split view\n5. Compare approaches, pick the best implementation\n6. **Save the winning component** with prompt + agent metadata for re-use\n\n## Proposed UI\n\n```\n┌─────────────────────────────────────────────────┐\n│ Prompts Playground                    [⚙️ Config]│\n├───────────────────────┬─────────────────────────┤\n│ Agent 1: opus+coder   │ Agent 2: sonnet+review  │\n│ ┌─────────────────┐   │ ┌─────────────────┐     │\n│ │ localhost:3001  │   │ │ localhost:3002  │     │\n│ │                 │   │ │                 │     │\n│ │  [Live Preview] │   │ │  [Live Preview] │     │\n│ │                 │   │ │                 │     │\n│ │   [💾 Save]     │   │ │   [💾 Save]     │     │\n│ └─────────────────┘   │ └─────────────────┘     │\n├───────────────────────┼─────────────────────────┤\n│ Agent 3: codex/o3     │ Agent 4: haiku+fast     │\n│ ┌─────────────────┐   │ ┌─────────────────┐     │\n│ │ localhost:3003  │   │ │ localhost:3004  │     │\n│ │                 │   │ │                 │     │\n│ │  [Live Preview] │   │ │  [Live Preview] │     │\n│ │                 │   │ │                 │     │\n│ │   [💾 Save]     │   │ │   [💾 Save]     │     │\n│ └─────────────────┘   │ └─────────────────┘     │\n└───────────────────────┴─────────────────────────┘\n│ [Refresh All] [Screenshot All]    [📚 Library]  │\n└─────────────────────────────────────────────────┘\n```\n\n## Features\n\n### Core Viewer\n- **2x2 resizable grid** of iframe panels\n- **Per-panel URL** (localhost:3001, 3002, 3003, 3004 or custom)\n- **Per-panel label** (agent name/config for reference)\n- **Auto-refresh** when dev servers hot reload\n- **Responsive** - stack to 2x1 or 1x1 on mobile\n\n### Panel Controls\n- URL input (editable)\n- Label/name input\n- Refresh button\n- Open in new tab\n- Fullscreen single panel\n- **Save component** button\n\n### Component Library (New)\nSave winning components for re-use with full metadata:\n\n```\n┌─────────────────────────────────────────────────┐\n│ 📚 Saved Components                    [Search] │\n├─────────────────────────────────────────────────┤\n│ ┌─────────────────────────────────────────────┐ │\n│ │ Login Form v2                    2026-01-13 │ │\n│ │ ─────────────────────────────────────────── │ │\n│ │ Agent: opus + coder agent                   │ │\n│ │ Prompt: \"Build a login form with email,    │ │\n│ │         password, remember me checkbox,    │ │\n│ │         and forgot password link\"          │ │\n│ │ Files: components/LoginForm.tsx            │ │\n│ │        components/LoginForm.css            │ │\n│ │ ─────────────────────────────────────────── │ │\n│ │ [Preview] [Copy Files] [Re-run Prompt]     │ │\n│ └─────────────────────────────────────────────┘ │\n│ ┌─────────────────────────────────────────────┐ │\n│ │ Dashboard Card                   2026-01-12 │ │\n│ │ ...                                         │ │\n│ └─────────────────────────────────────────────┘ │\n└─────────────────────────────────────────────────┘\n```\n\n**Saved metadata per component:**\n- Component name (user-provided)\n- Timestamp\n- Agent config (model, system prompt, flags)\n- Prompt used to create it\n- Source files (paths or inline code)\n- Screenshot thumbnail\n- Tags for organization\n\n**Library actions:**\n- **Preview** - View saved screenshot/code\n- **Copy Files** - Copy component files to clipboard or target directory\n- **Re-run Prompt** - Send same prompt to new agent session\n- **Edit metadata** - Update name, tags, notes\n- **Delete** - Remove from library\n\n### Comparison Tools\n- **Refresh all** - reload all 4 panels\n- **Screenshot all** - capture current state of all 4\n- **Save comparison** - save URLs + labels to localStorage\n- **Load comparison** - restore saved configurations\n\n## Technical Implementation\n\n### File Structure\n```\napp/sections/prompts-playground.tsx     # Main section\ncomponents/prompts/\n  QuadSplitViewer.tsx                   # 2x2 resizable grid\n  BrowserPanel.tsx                      # Single iframe panel\n  PanelControls.tsx                     # URL, label, refresh, save\n  ComparisonToolbar.tsx                 # Bulk actions\n  ComponentLibrary.tsx                  # Saved components view\n  SaveComponentDialog.tsx               # Save form with metadata\n  ComponentCard.tsx                     # Library item display\nlib/prompts-playground.ts               # Types, localStorage helpers\n```\n\n### Types\n```typescript\ninterface PanelConfig {\n  url: string;          // e.g., \"http://localhost:3001\"\n  label: string;        // e.g., \"opus+coder\"\n  key: number;          // for forcing iframe refresh\n  prompt?: string;      // current prompt being tested\n  agentConfig?: AgentConfig;\n}\n\ninterface AgentConfig {\n  cli: 'claude' | 'codex';\n  model: string;\n  systemPrompt?: string;\n  agent?: string;       // agent name from gallery\n  flags?: Record\u003cstring, unknown\u003e;\n}\n\ninterface SavedComponent {\n  id: string;\n  name: string;\n  createdAt: Date;\n  prompt: string;\n  agentConfig: AgentConfig;\n  files: ComponentFile[];\n  screenshot?: string;  // base64 or URL\n  tags: string[];\n  notes?: string;\n}\n\ninterface ComponentFile {\n  path: string;\n  content: string;\n  language: string;\n}\n\ninterface PlaygroundState {\n  panels: [PanelConfig, PanelConfig, PanelConfig, PanelConfig];\n  currentPrompt: string;  // shared prompt input\n  libraryOpen: boolean;\n  savedComponents: SavedComponent[];\n}\n```\n\n### Save Flow\n1. User clicks \"Save\" on winning panel\n2. Dialog opens with:\n   - Component name input\n   - Pre-filled prompt (from shared input)\n   - Pre-filled agent config (from panel label/settings)\n   - File picker (select which files to save)\n   - Tags input\n   - Notes textarea\n3. Screenshot captured automatically\n4. Saved to localStorage (or future: Supabase)\n\n## Acceptance Criteria\n\n### Viewer\n- [ ] 2x2 resizable panel grid with iframes\n- [ ] Each panel has editable URL and label\n- [ ] Per-panel refresh button works\n- [ ] Refresh all button reloads all 4 iframes\n- [ ] Panel configs persist to localStorage\n- [ ] Mobile responsive (stacks panels)\n\n### Component Library\n- [ ] Save button on each panel opens save dialog\n- [ ] Can enter component name, prompt, agent config\n- [ ] Can select files to include (path + content)\n- [ ] Screenshot captured on save\n- [ ] Saved components listed in library view\n- [ ] Can search/filter saved components\n- [ ] Can preview saved component (screenshot + code)\n- [ ] Can copy files to clipboard\n- [ ] Can re-run prompt with same config\n- [ ] Can delete saved components\n\n### Styling\n- [ ] Follows existing glass/terminal styling\n\n## Dependencies\n\n- `react-resizable-panels` (already installed)\n- Standard iframe (no external deps)\n- localStorage for persistence (Supabase optional future)\n","notes":"## Retro\n- Clear worker prompt with good file paths and implementation steps\n- Straightforward implementation following existing section patterns\n- Used react-resizable-panels (already installed) for grid layout\n- Added LocalOnlyOverlay protection as iframes need localhost servers\n- Component library uses localStorage; could add Supabase sync in future","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-13T22:16:20.505106276-05:00","created_by":"marci","updated_at":"2026-01-21T01:36:07.871772734-05:00","closed_at":"2026-01-21T01:36:07.871772734-05:00","close_reason":"Implemented Prompts Playground with quad-split viewer and component library","external_ref":"TabzBeads-881","labels":["ai-workspace","feature","gate:codex-review,gate:visual-qa","prompts-playground","ready"]}
{"id":"personal-homepage-9a5","title":"Add tooltip for working directory in sidebar","description":"The working directory shown in the left sidebar may be truncated if the path is long or the sidebar is collapsed. Add hover text (tooltip) to show the full path on hover.","notes":"completed_at: 2026-01-11T02:13:03-05:00\ncommit: f562a67\ncomplexity: simple (score: 0)\nfiles_changed: 1\nloc_changed: 31","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T16:45:10.81652734-05:00","updated_at":"2026-01-11T02:13:10.218476265-05:00","closed_at":"2026-01-11T02:13:10.218476265-05:00","close_reason":"Added tooltip to working directory selector in sidebar","labels":["sidebar","ui","ux"]}
{"id":"personal-homepage-9btz","title":"Bug: Plugins page ignores global working dir, always shows TabzChrome","description":"The plugins page doesn't respect the global working directory setting. Even when personal-homepage is selected as the global working dir, it only shows TabzChrome plugins.\n\n## Expected\n- Plugins page should show plugins from the currently selected working directory\n- If personal-homepage is selected, show personal-homepage plugins\n\n## Actual\n- Always shows TabzChrome plugins regardless of working dir setting\n\n## Key Files\n- Plugins page component (need to find)\n- WorkingDirSelector / useWorkingDirectory hook\n\n## Fix\nPass the global working dir to the plugins loader/API call instead of hardcoding TabzChrome path.","notes":"## Retro\nStraightforward fix. Key files were correctly identified in the issue.\n- API route needed NextRequest import for URL parsing\n- All consumers of loadPlugins updated to pass workingDir\n- Also updated TanStack Query queryKey to include workingDir for proper cache invalidation","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-23T19:45:02.245134764-05:00","updated_at":"2026-01-23T21:43:03.378890035-05:00","closed_at":"2026-01-23T21:43:03.378890035-05:00","close_reason":"Done: Plugins page now respects global working directory - API accepts workingDir param, checks project-scoped plugins, all consumers updated","labels":["bug","gate:codex-review","plugins","ready","working-dir"]}
{"id":"personal-homepage-9cj","title":"Bookmarks: clicking bookmark leaves weird state with text but no icon","description":"When clicking a bookmark, it leaves it in a weird visual state where text is showing but the icon is missing. Right-clicking does show the spawn option now which works.","notes":"## Retro\nStraightforward fix. Created FaviconWithFallback component that tracks error state and shows Globe icon when favicon fails to load. Applied to both grid and list views.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T20:40:58.383778597-05:00","updated_at":"2026-01-21T20:54:18.255300261-05:00","closed_at":"2026-01-21T20:54:18.255300261-05:00","close_reason":"Done: Created FaviconWithFallback component with React state to show Globe icon when favicon fails to load","labels":["bookmarks","ui"]}
{"id":"personal-homepage-9dm","title":"Fix sidebar collapsed state: category icons and working dir portal","description":"When the sidebar is collapsed, there are UX issues:\n\n**Current Problems:**\n1. Collapsible category sections auto-expand into a row of icons when sidebar collapses - looks messy\n2. Working directory picker cannot be clicked when collapsed - requires expanding sidebar first\n3. No icons for category headers in collapsed state\n\n**Expected Behavior:**\n1. Each category should show a single representative icon when collapsed (not expand all items)\n2. Working directory picker should open as a portal/popover when clicked in collapsed state\n3. Category icons should be clickable to expand that category's items in a flyout\n\n**Implementation:**\n1. Add icon property to each CATEGORY definition (e.g., Info → Globe, Productivity → CheckSquare, etc.)\n2. When collapsed, show only category icons vertically (not individual section icons)\n3. Clicking category icon in collapsed state → shows flyout with that category's sections\n4. Working dir selector: use Popover/Portal so it can open without expanding sidebar\n5. Maintain current behavior when sidebar is expanded\n\n**Reference:**\n- VS Code sidebar behavior when collapsed\n- Existing Tooltip pattern already used for nav items","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-05T11:59:55.329597846-05:00","created_by":"matt","updated_at":"2026-01-05T12:08:37.944245263-05:00","closed_at":"2026-01-05T12:08:37.944245263-05:00","close_reason":"Implemented: Fixed sidebar collapsed state with category icons and working dir popover portal"}
{"id":"personal-homepage-9hy","title":"Fix incorrect context meter in AI Workspace","description":"## Bug\nContext meter in AI Workspace shows incorrect values - jumped to 85% after a single simple message (asking to make some bookmarks).\n\n## Symptoms\n- Context meter shows inflated percentage\n- Does not accurately reflect actual context usage\n\n## Investigation\n- Check how context is calculated\n- Verify token counting logic\n- Check if previous context is being accumulated incorrectly\n\n## Files\n- app/sections/ai-workspace.tsx\n- Context meter component","notes":"## Retro\n- Root cause: BASELINE_TOKENS hardcoded to 44000 (22% of context) in estimation fallback\n- The 44k was arbitrary and added unconditionally when actual usage data was unavailable\n- Fix: Removed baseline, now only adds 500 tokens for system prompt overhead\n- When actual API usage is available, it takes precedence (this was working correctly)\n- Build verified passing","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:35:12.179342939-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:40:03.157910249-05:00","closed_at":"2026-01-21T00:40:03.157910249-05:00","close_reason":"Fixed: Removed inflated 44k token baseline from context meter estimation - now shows accurate percentages","labels":["ai-workspace","bug","ui"]}
{"id":"personal-homepage-9nq","title":"Agent Cards: Build AgentCard UI component","description":"Create components/agents/AgentCard.tsx - displays avatar, name, personality, section badge. Clickable to select agent. Shows active indicator.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:24:53.059227192-05:00","created_by":"marci","updated_at":"2026-01-09T01:32:30.846075607-05:00","closed_at":"2026-01-09T01:32:30.846075607-05:00","close_reason":"Implemented AgentCard UI component with avatar, name, personality traits, section badges, glow effect selection state, and both card/compact variants. Full keyboard accessibility with ARIA attributes.","dependencies":[{"issue_id":"personal-homepage-9nq","depends_on_id":"personal-homepage-bnp","type":"blocks","created_at":"2026-01-08T18:25:39.833535129-05:00","created_by":"marci"}]}
{"id":"personal-homepage-9y2","title":"AIDrawer: Scaffold component structure and layout integration","description":"Create the foundational AIDrawer component structure:\n\n1. Create `components/ai/AIDrawer.tsx` - Main drawer wrapper using shadcn Sheet/Drawer\n2. Create `AIDrawerProvider` context for global state (open/collapsed/expanded)\n3. Add to `app/layout.tsx` so it persists across navigation\n4. Basic expand/collapse without animations yet\n\nThis is the skeleton that everything else builds on.","notes":"## Retro\n- Straightforward implementation following PersistentMusicDrawer pattern\n- Used framer-motion for animations (basic slide-in for now)\n- Created floating FAB for toggle when collapsed (bottom-right)\n- Added toggle to mobile header (alongside hamburger menu)\n- Placeholder chat content - actual chat logic is separate task (personal-homepage-yj4/abv)\n- Three states work: collapsed (FAB visible), minimized (header bar), expanded (full panel)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T23:40:46.767501889-05:00","updated_at":"2026-01-22T23:58:55.414650024-05:00","closed_at":"2026-01-22T23:58:55.414650024-05:00","close_reason":"Done: Created AIDrawerProvider context and AIDrawer component with collapsed/minimized/expanded states. Wired into layout.tsx for persistence. Added toggle to mobile header.","labels":["ai-drawer","wave-1"]}
{"id":"personal-homepage-9y5","title":"[Kanban Migration] Migrate core board components (KanbanBoard, Column, Card)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:10:25.969404643-05:00","created_by":"matt","updated_at":"2026-01-04T23:53:53.823206202-05:00","closed_at":"2026-01-04T23:53:53.823206202-05:00","close_reason":"Migrated core kanban board components (KanbanBoard, KanbanColumn, KanbanCard, CommandBar, AddColumnButton, AddTaskButton, BoardSettingsDialog, ColumnConfigDialog) with updated imports and dependencies","dependencies":[{"issue_id":"personal-homepage-9y5","depends_on_id":"personal-homepage-658","type":"blocks","created_at":"2026-01-04T23:10:55.126695044-05:00","created_by":"matt"},{"issue_id":"personal-homepage-9y5","depends_on_id":"personal-homepage-ce7","type":"blocks","created_at":"2026-01-04T23:10:55.167302157-05:00","created_by":"matt"}]}
{"id":"personal-homepage-a15","title":"Implement Spotify OAuth and Web Playback SDK","description":"Add Spotify integration for premium music playback.\n\n**Based on:** docs/research/music-player-integration.md (Phase 1)\n\n**Prerequisites:**\n- User has Spotify Premium (confirmed)\n- Need to register app at developer.spotify.com\n\n**Implementation:**\n1. OAuth PKCE flow (no client secret needed)\n2. Store tokens in Supabase or localStorage\n3. Web Playback SDK integration\n4. Player controls (play, pause, skip, volume, seek)\n5. Playlist/library browsing\n6. Search and play any track\n\n**Required Scopes:**\n- streaming, user-read-email, user-read-private\n- user-modify-playback-state, user-read-playback-state\n- user-library-read, playlist-read-private\n\n**Files to create:**\n- `lib/spotify.ts` - OAuth helpers\n- `hooks/useSpotifyPlayer.ts` - SDK wrapper\n- `components/SpotifyPlayer.tsx` - Player UI\n- `app/api/spotify/callback/route.ts` - OAuth callback\n\n**Note:** Preview URLs deprecated Nov 2024, must use SDK.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T13:00:34.939974087-05:00","updated_at":"2026-01-05T13:22:58.041607222-05:00","closed_at":"2026-01-05T13:22:58.041607222-05:00","close_reason":"Implemented Spotify OAuth PKCE flow and Web Playback SDK integration with full player UI"}
{"id":"personal-homepage-a6y","title":"Fix Kanban beads sync to use bd ready for Ready column","description":"The Kanban Ready column should show issues that bd ready returns (no blockers, properly prepared). Currently useBeadsBan.ts uses a heuristic that checks if description exists, which doesnt match beads actual logic.\n\n## Current behavior\ngetColumnForIssue() in useBeadsBan.ts checks issue.description.trim().length \u003e 0 to determine if ready.\n\n## Expected behavior\nCall /api/beads endpoint that wraps bd ready --json to get actually-ready issues.\n\n## Files to modify\n- app/components/kanban/hooks/useBeadsBan.ts\n- app/api/beads/ (may need new endpoint for ready issues)","notes":"## prepared.prompt\n\n# Fix Kanban beads sync to use bd ready for Ready column\n\n## Objective\nUpdate the Kanban Ready column to accurately show only issues that are ready to work on, as determined by `bd ready --json` (issues with no blockers and prepared prompts), instead of using a heuristic based on description length.\n\n## Dependency Note\n**This issue depends on personal-homepage-cp7 (Add /api/beads/ready endpoint).** Wait for that endpoint to be merged before starting this task.\n\n## Context\nThe kanban board has 5 columns: Backlog, Ready, In Progress, Blocked, and Done. Currently, the Ready column uses a faulty heuristic in `useBeadsBan.ts` that checks if `issue.description.trim().length \u003e 0` to determine if an issue is \"ready\". This doesn't match beads actual logic.\n\n**Current behavior (lines 222-230 in useBeadsBan.ts):**\n```typescript\nif (issue.description \u0026\u0026 issue.description.trim().length \u003e 0) {\n  return 'ready'\n}\nreturn 'backlog'\n```\n\n**Problem:** Issues with any description show as Ready, but they might have blockers or lack a prepared worker prompt.\n\n## Specific Changes Required\n\n### 1. Add fetchReady() function\nCreate a new API wrapper function (around line 117 in useBeadsBan.ts) that calls the new `/api/beads/ready` endpoint:\n\n```typescript\nasync function fetchReady(workspace?: string): Promise\u003cstring[]\u003e {\n  try {\n    const params = workspace ? `?workspace=${encodeURIComponent(workspace)}` : ''\n    const res = await fetch(`/api/beads/ready${params}`)\n    if (!res.ok) return []\n    const data = await res.json()\n    return data.ready?.map((issue: BeadsApiIssue) =\u003e issue.id) ?? []\n  } catch {\n    return []\n  }\n}\n```\n\n### 2. Update getColumnForIssue() logic (lines 206-230)\nReplace the description-based heuristic with a Set lookup:\n\n**Modify getColumnForIssue() to accept a readyIssueIds parameter:**\n\n```typescript\nfunction getColumnForIssue(\n  issue: BeadsApiIssue,\n  readyIssueIds: Set\u003cstring\u003e\n): BeadsBanColumnId {\n  const status = issue.status?.toLowerCase()\n  const hasBlockers = issue.blockedBy \u0026\u0026 issue.blockedBy.length \u003e 0\n\n  if (status === 'closed' || status === 'done') {\n    return 'done'\n  }\n  if (status === 'blocked' || (status === 'open' \u0026\u0026 hasBlockers)) {\n    return 'blocked'\n  }\n  if (status === 'in_progress' || status === 'in-progress') {\n    return 'in-progress'\n  }\n  \n  // Use bd ready to determine if issue is ready\n  if (status === 'open' \u0026\u0026 readyIssueIds.has(issue.id)) {\n    return 'ready'\n  }\n  return 'backlog'\n}\n```\n\n### 3. Update refresh() callback (lines 286-353)\nFetch the ready issues list and pass it to getColumnForIssue():\n\n- Call `fetchReady()` alongside `fetchIssues()` at the beginning of the refresh logic (around line 293)\n- Convert the array to a Set for O(1) lookup: `const readySet = new Set(readyIds)`\n- Pass `readySet` to all `getColumnForIssue(issue, readySet)` calls in the loop (line 309)\n\n## Integration with /api/beads/ready\n\nThe new endpoint (personal-homepage-cp7) will:\n- Accept GET request with optional `?workspace=PATH` query param\n- Return `{ ready: BeadsApiIssue[] }` containing only issues that `bd ready --json` returns\n- Issues in this list have:\n  - `status: 'open'`\n  - No blockers (blockedBy array is empty or undefined)\n  - Prepared worker prompts (notes field contains prepared.prompt)\n\n## Acceptance Criteria\n\n- [ ] `fetchReady()` function added and correctly calls `/api/beads/ready`\n- [ ] `getColumnForIssue()` signature updated to accept `readyIssueIds: Set\u003cstring\u003e`\n- [ ] All calls to `getColumnForIssue()` pass the Set from `fetchReady()`\n- [ ] Ready column now shows only issues returned by `bd ready --json`\n- [ ] Backlog column shows open issues without blockers that aren't in the ready list\n- [ ] TypeScript compiles without errors\n- [ ] Manual test: Open kanban board, verify Ready column matches `bd ready --json` output\n- [ ] No regression: Other columns (In Progress, Blocked, Done) unchanged\n\n## Testing Strategy\n\n1. **Unit logic:** Verify `getColumnForIssue()` correctly routes issues based on the readySet\n2. **Integration:** Load kanban board and check Ready column matches `bd ready --json`\n3. **Edge cases:**\n   - Issue with blockers but prepared prompt: should be in Blocked, not Ready\n   - Open issue with prepared prompt but no blockers: should be in Ready\n   - Create a test issue, prepare it, verify it moves to Ready\n\n## Notes\n\n- The /api/beads/ready endpoint will be the source of truth for Ready column\n- This maintains the 5-column structure (Backlog, Ready, In Progress, Blocked, Done)\n- Error handling: if `/api/beads/ready` fails, readySet will be empty and all open issues go to Backlog (safe fallback)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-23T02:06:33.999421204-05:00","updated_at":"2026-01-23T02:33:56.839152207-05:00","closed_at":"2026-01-23T02:33:56.839152207-05:00","close_reason":"Merged into personal-homepage-cp7 - single worker will create endpoint and wire it up","labels":["beads","kanban","wave-1"],"dependencies":[{"issue_id":"personal-homepage-a6y","depends_on_id":"personal-homepage-cp7","type":"blocks","created_at":"2026-01-23T02:06:44.971783066-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-a8m","title":"Music: Add to queue gives JSON parse error","description":"## Bug: Add to Queue JSON Parse Error\n\n### Error\n```\nUnexpected token 'X', \"X7t2uqIsQr\"... is not valid JSON\nat JSON.parse\nat spotifyFetch (lib/spotify.ts:477:15)\nat async addToQueue (lib/spotify.ts:569:3)\n```\n\n### Root Cause\nDifferent from the removeTracks bug! Spotify is returning a **non-empty, non-JSON response** (looks like a snapshot ID or token).\n\nThe current spotifyFetch fix handles empty responses but not text responses:\n```typescript\nconst text = await response.text()\nif (!text) return {} as T  // Only handles empty\nreturn JSON.parse(text)    // Fails on non-JSON text like 'X7t2uqIsQr...'\n```\n\n### Fix Location\n`lib/spotify.ts` line 475-477\n\n### Solution\nAdd JSON content-type check:\n```typescript\nconst text = await response.text()\nif (!text) return {} as T\n\n// Check if response is actually JSON\nconst contentType = response.headers.get('content-type')\nif (!contentType?.includes('application/json')) {\n  return {} as T  // Non-JSON response, return empty for void functions\n}\n\nreturn JSON.parse(text)\n```\n\n### Related\n- Fixes both addToQueue AND any other endpoint returning non-JSON","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:15:48.901817064-05:00","created_by":"marci","updated_at":"2026-01-09T15:20:56.041749624-05:00","closed_at":"2026-01-09T15:20:56.041749624-05:00","close_reason":"Fixed in commit 3228c3b"}
{"id":"personal-homepage-ab4","title":"Agent Cards: Inject selector knowledge into system prompt","description":"Build prompt template that includes agent's selector knowledge. Use docs/tabz-integration.md format: selector tables, naming conventions (kebab-case, verb-noun for actions), and automation pattern examples. Format as structured reference the AI can use to tabz_click/tabz_fill elements.","notes":"prepared.skills: frontend:frontend-development, meta:context-engineering\nprepared.files: app/components/kanban/shared/AgentSelector.tsx, app/components/kanban/shared/AgentCard.tsx\nprepared.prompt: |\n  ## Task: Agent Cards - Inject selector knowledge into system prompt\n  \n  ### Context\n  Inject agent selector knowledge into system prompts for better agent selection.\n  \n  ### Key Files\n  - app/components/kanban/shared/AgentSelector.tsx (agent selector)\n  - app/components/kanban/shared/AgentCard.tsx (agent card)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /meta:context-engineering for prompt engineering\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-ab4","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:25:06.02500903-05:00","created_by":"marci","updated_at":"2026-01-11T04:11:11.005257863-05:00","closed_at":"2026-01-11T04:11:11.005257863-05:00","close_reason":"Completed: agent prompt builder with selector knowledge for browser automation","dependencies":[{"issue_id":"personal-homepage-ab4","depends_on_id":"personal-homepage-bnp","type":"blocks","created_at":"2026-01-08T18:25:40.04321019-05:00","created_by":"marci"}]}
{"id":"personal-homepage-abqo","title":"Bug: Agent picker menu doesn't close after selection","description":"The agent picker dropdown in AIDrawer header stays open after selecting an agent. There's no way to dismiss it.\n\n## Steps to Reproduce\n1. Open AI Drawer\n2. Click agent picker dropdown\n3. Select an agent\n\n## Expected\n- Menu closes after selection\n- Clicking outside menu closes it\n- Or has explicit close button\n\n## Actual\n- Menu stays open permanently\n- No close button\n- Conversation starts but picker remains visible\n\n## Key Files\n- components/ai/AIDrawer.tsx - Agent picker component (recently added)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-23T21:50:36.285648554-05:00","updated_at":"2026-01-23T21:52:35.342293401-05:00","closed_at":"2026-01-23T21:52:35.342293401-05:00","close_reason":"Done: Made agent picker dropdown controlled with explicit open/onOpenChange state. Now closes on selection and outside click.","labels":["ai-workspace","bug","quick-fix","ready","ux"]}
{"id":"personal-homepage-abv","title":"AIDrawer: Extract chat logic into reusable hook/context","description":"Extract the chat logic from ai-workspace.tsx into reusable pieces:\n\n1. Create `hooks/useAIDrawer.ts` or enhance `useAIChat.ts`\n2. Message state management (conversations, current messages)\n3. Backend abstraction (TabzChrome WS, Docker, API)\n4. JSONL persistence logic\n5. Streaming state handling\n\nGoal: Chat logic should be importable/reusable, not tied to ai-workspace section.","notes":"## Retro\n- What was unclear: Nothing major - the existing useAIChat was already well-structured\n- Missing context: None - CLAUDE.md and existing code provided good guidance\n- Discovered work: None - the scope was well-defined\n- What would help: The existing useAIChat hook was already 80% of what was needed - the main addition was the context wrapper and drawer-specific functionality\n\n## Implementation Notes\nCreated two files:\n1. `contexts/AIDrawerContext.tsx` - Global provider that wraps useAIChat\n   - Manages drawer state (open/close, size, minimize)\n   - Persists size preference to localStorage\n   - Provides quick actions like openWithMessage()\n\n2. `hooks/useAIDrawerChat.ts` - Enhanced hook for drawer consumers\n   - Input state management (preFill, clear)\n   - Keyboard shortcut support\n   - Auto-focus on open\n   - Helper functions for common operations\n   - useAIDrawerTrigger() for lightweight integration\n\nThe existing useAIChat already handled:\n- All backend abstraction (TabzChrome WS, Docker, API via /api/ai/chat)\n- JSONL persistence (via localStorage + server sync)\n- Streaming state (isStreaming, isTyping)\n- Conversation CRUD","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T23:40:53.91307804-05:00","updated_at":"2026-01-22T23:57:27.768463716-05:00","closed_at":"2026-01-22T23:57:27.768463716-05:00","close_reason":"Done: Created AIDrawerContext and useAIDrawerChat hook for reusable chat state","labels":["ai-drawer","wave-1"]}
{"id":"personal-homepage-aejo","title":"AI Workspace: Fix context token calculation","description":"Context calculation in lib/ai-workspace.ts line 152 doesn't account for cumulative input tokens from previous messages. Shows wrong usage percentage after first message.\n\n**Current behavior:**\n`contextTokens: messageUsage.inputTokens` only uses current message tokens\n\n**Expected behavior:**\nShould sum input tokens from all messages in conversation for accurate context percentage\n\n**Files:** lib/ai-workspace.ts (calculateContextUsage function)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:46.804621536-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:16:57.491775941-05:00","closed_at":"2026-01-29T02:16:57.491775941-05:00","close_reason":"Fixed contextTokens calculation to use cumulative newInputTokens instead of only current message inputTokens. Now accurately tracks total context window usage across all messages in conversation."}
{"id":"personal-homepage-afg","title":"Agent Cards: Agent builder wizard","description":"UI for creating custom agents. Steps: name/personality, select section, configure tools, set suggested prompts, generate avatar. Preview agent before saving.","notes":"prepared.skills: frontend:frontend-development, frontend:ui-styling\nprepared.files: components/agents/, app/components/kanban/shared/AgentCard.tsx\nprepared.prompt: |\n  ## Task: Agent Cards - Agent builder wizard\n  \n  ### Context\n  Create a wizard interface for building custom agent cards.\n  \n  ### Key Files\n  - components/agents/ (agent components directory)\n  - app/components/kanban/shared/AgentCard.tsx (agent card)\n  \n  ### Skills\n  Use /frontend:frontend-development for wizard implementation\n  Use /frontend:ui-styling for wizard UI\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-afg","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T18:25:19.738791366-05:00","created_by":"marci","updated_at":"2026-01-11T04:09:52.376240133-05:00","closed_at":"2026-01-11T04:09:52.376240133-05:00","close_reason":"Implemented AgentBuilderWizard with 5-step wizard (identity, sections, tools, prompts, preview)","dependencies":[{"issue_id":"personal-homepage-afg","depends_on_id":"personal-homepage-jjz","type":"blocks","created_at":"2026-01-08T18:25:40.457409849-05:00","created_by":"marci"}]}
{"id":"personal-homepage-aq7","title":"Fix Prompts Playground page views not changing","description":"## Bug\nThe Prompts Playground section was just implemented (bd-91k) but the page/view switching doesn't work - changing views has no effect.\n\n## Expected\nSwitching between views (quad-split, library, etc.) should update the displayed content.\n\n## Files\n- app/sections/prompts-playground.tsx\n- components/prompts/*.tsx","notes":"## Retro\n- What was unclear: Nothing - the prompt was clear and accurate\n- Missing context: None - the prepared prompt identified exactly the right files\n- Discovered work: None\n- What would help: N/A - straightforward fix\n\nThe issue was exactly as described: viewMode state existed but was never passed to QuadSplitViewer. Added viewMode prop and implemented horizontal/vertical layouts.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T01:42:51.502126096-05:00","updated_at":"2026-01-21T20:03:46.768292725-05:00","closed_at":"2026-01-21T20:03:46.768292725-05:00","close_reason":"Implement view mode switching - viewMode prop passed to QuadSplitViewer with horizontal/vertical layouts","labels":["prompts-playground","ready","ui"]}
{"id":"personal-homepage-atmc","title":"Fix TabzChrome integration - mcp-cli not available in API routes","description":"The /api/tabz/* routes try to use `claude --mcp-cli` to call TabzChrome MCP tools. This doesn't work because:\n\n1. `mcp-cli` is a Claude Code feature requiring an active Claude Code session\n2. Next.js API routes run as a standalone Node.js process, not inside Claude Code\n3. The MCP connection isn't available to the API\n\n## Affected Files\n- `app/api/tabz/open-url/route.ts`\n- `app/api/tabz/bookmarks/save/route.ts`  \n- `app/api/tabz/bookmarks/search/route.ts`\n\n## Current (Broken) Approach\n```typescript\nconst { stdout } = await execFileAsync(\n  claudePath,\n  [\"--mcp-cli\", \"call\", \"tabz/tabz_search_bookmarks\", jsonArgs],\n)\n```\n\n## Proposed Solutions\n\n### Option A: Direct HTTP API\nIf TabzChrome exposes an HTTP API:\n```typescript\nconst response = await fetch(\"http://localhost:PORT/bookmarks/search\", {\n  method: \"POST\",\n  body: JSON.stringify({ query, limit })\n})\n```\n\n### Option B: Chrome Native Messaging\nCommunicate directly with the Chrome extension via native messaging protocol.\n\n### Option C: Shared SQLite/File\nTabzChrome might store bookmarks in a local DB that we can read directly.\n\n## Research Needed\n1. Check ~/projects/TabzChrome for API documentation\n2. See how TabzChrome exposes its MCP tools\n3. Find alternative communication method\n\n## Impact\n- Search Hub bookmark search is broken\n- Bookmark saving is broken\n- URL opening via TabzChrome is broken","notes":"## prepared.prompt\n\n**Task:** Fix TabzChrome integration - find alternative to mcp-cli for API routes.\n\n**Context:** The /api/tabz/* routes try to use `claude --mcp-cli` which only works inside a Claude Code session. Next.js API routes run standalone and cannot access MCP tools this way.\n\n**Affected files:**\n- `/home/marci/projects/personal-homepage/app/api/tabz/open-url/route.ts`\n- `/home/marci/projects/personal-homepage/app/api/tabz/bookmarks/save/route.ts`\n- `/home/marci/projects/personal-homepage/app/api/tabz/bookmarks/search/route.ts`\n\n**Research steps:**\n\n1. Check TabzChrome for HTTP API:\n   ```bash\n   grep -r \"app.get\\|app.post\\|express\\|http\" ~/projects/TabzChrome/\n   ```\n\n2. Check for REST endpoints in TabzChrome extension:\n   - Look for background.js or service worker\n   - Find how MCP tools are actually implemented\n\n3. Check if there is a direct localhost port:\n   ```bash\n   grep -r \"listen\\|port\" ~/projects/TabzChrome/\n   ```\n\n**Likely solution:** TabzChrome probably exposes HTTP endpoints that the MCP server wraps. Find and call those directly:\n\n```typescript\n// Instead of mcp-cli\nconst response = await fetch(\"http://localhost:TABZ_PORT/bookmarks/search\", {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/json\" },\n  body: JSON.stringify({ query, limit })\n})\n```\n\n**Acceptance criteria:**\n- [ ] Research TabzChrome communication method\n- [ ] Update API routes to use direct HTTP/native messaging\n- [ ] Bookmark search works from Search Hub\n- [ ] Bookmark saving works\n- [ ] URL opening works\n- [ ] No dependency on Claude Code session\n\nWhen done, run `bd close personal-homepage-atmc`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T16:09:01.223242836-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T16:20:51.849477173-05:00","closed_at":"2026-01-28T16:20:51.849477173-05:00","close_reason":"Fixed TabzChrome integration by replacing mcp-cli calls with direct HTTP API calls to TabzChrome backend (port 8129). Updated three API routes: open-url, bookmarks/save, and bookmarks/search to use fetch() instead of execFile with claude --mcp-cli.","labels":["ready"]}
{"id":"personal-homepage-ay4","title":"Research Anthropic Analytics API Integration","description":"Anthropic has an official Claude Code Analytics API (docs.claude.com/en/api/claude-code-analytics-api). Investigate integration possibilities for displaying enterprise-level metrics in the dashboard.","design":"- Check API authentication requirements\n- Determine available endpoints\n- Evaluate if compatible with personal/Pro subscriptions\n- Consider OpenTelemetry integration for real-time data","acceptance_criteria":"- Document API capabilities\n- Create proof-of-concept API integration\n- Determine subscription requirements","notes":"## Retro\n- Straightforward research task\n- URL from issue redirected to platform.claude.com (followed redirect successfully)\n- Key finding: Admin API is NOT available for Personal/Pro subscriptions\n- OpenTelemetry is the alternative path for individual users\n- Created comprehensive PoC with types, API route, and documentation","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-11T04:08:43.148231192-05:00","created_by":"marci","updated_at":"2026-01-21T01:30:59.870557579-05:00","closed_at":"2026-01-21T01:30:59.870557579-05:00","close_reason":"Done: Analytics API research complete with PoC - types, API route, and docs created. Key finding: Admin API requires Team/Enterprise (not Personal/Pro); OpenTelemetry available for all users.","labels":["analytics","api","ready","research"]}
{"id":"personal-homepage-b1ch","title":"Feature: Port email-inbox template from portfolio-style-guides","description":"Port the email-inbox template from portfolio-style-guides to personal-homepage.\n\n## Source\n- `~/projects/portfolio-style-guides/app/templates/email-inbox/page.tsx` (42.8 KB)\n- Full-featured email client: folders, labels, search, compose, attachments\n- Uses shadcn/ui + Framer Motion (same as personal-homepage)\n\n## Tasks\n1. Create new Email section in personal-homepage\n2. Port component with styling adjustments (glass classes, terminal-glow)\n3. Add Gmail API integration:\n   - OAuth2 with Gmail scopes\n   - Fetch emails, labels, threads\n   - Send/reply/forward\n   - Archive/delete/star actions\n4. Add to navigation items\n5. Add TabzChrome data-tabz-* attributes\n\n## Reference\n- Check for existing Google OAuth setup\n- May need to set up Google Cloud Console project","notes":"## Retro\n- What worked: Porting from template went smoothly. The useGoogleAuth hook and googleFetch utility made API integration straightforward.\n- What was unclear: TypeScript type issues with Object.entries required casting to satisfy the compiler.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T23:22:09.113385284-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T23:53:01.172598668-05:00","closed_at":"2026-01-28T23:53:01.172598668-05:00","close_reason":"Done: Ported email inbox template, created Gmail API routes for messages/labels/send, registered section in navigation and settings, added TabzChrome attributes for MCP automation, created documentation.","dependencies":[{"issue_id":"personal-homepage-b1ch","depends_on_id":"personal-homepage-uydz","type":"blocks","created_at":"2026-01-28T23:24:22.898877352-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-b2v","title":"Epic: Extract Files Dashboard from TabzChrome to personal-homepage","description":"Move the complete Files dashboard from TabzChrome to personal-homepage. TabzChrome becomes focused on terminals/browser automation while personal-homepage becomes the full personal dashboard.\n\n## ⚠️ IMPORTANT: Do NOT remove code from TabzChrome\nKeep all TabzChrome code intact until:\n1. Full migration is complete and tested\n2. User explicitly approves removal\nThis is a COPY operation, not a MOVE, until final approval.\n\n## 🎨 Design \u0026 UI Standards\nUse these resources liberally throughout:\n- **shadcn MCP**: `mcp-cli call shadcn/search_items_in_registries` for components\n- **shadcn skill**: `/shadcn-ui:shadcn-ui` for patterns and best practices\n- **UI styling skill**: `/ui-styling:ui-styling` for Tailwind/glass aesthetics\n- **Context7 docs**: `mcp-cli call plugin_context7_context7/query-docs` for latest patterns\n- Follow glass-dark aesthetic from docs/design-system.md\n- Match existing AgentCard.tsx quality level\n\n## What Moves\n- File tree navigation (FileTree.tsx)\n- File viewer with syntax highlighting (FileViewer.tsx)  \n- Plugin/Agent management (PluginList.tsx)\n- FilesContext state management\n- Backend routes for /api/files/*, /api/plugins/*\n\n## Architecture\n- TabzChrome: Chrome extension + terminal PTY + MCP bridge + settings\n- personal-homepage: Full dashboard UI (files, agents, docs, media, feeds)\n\n## UI Inspiration\n- User Directory template from portfolio-style-guides for agent gallery\n- Existing AgentCard.tsx in personal-homepage/app/components/kanban/shared/","notes":"prepared.skills: frontend:frontend-development\nprepared.files: app/sections/files.tsx, app/components/files/, app/contexts/FilesContext.tsx\nprepared.prompt: |\n  ## Epic: Extract Files Dashboard from TabzChrome to personal-homepage\n  \n  ### Scope\n  Extract and migrate files dashboard from TabzChrome - this is an EPIC.\n  GATE task (b2v.9) requires user approval first.\n  \n  ### Key Files\n  - app/sections/files.tsx (files section)\n  - app/components/files/ (files components)\n  - app/contexts/FilesContext.tsx (files context)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  \n  ### Approach\n  This is a migration epic. Wait for GATE approval before removing TabzChrome code.\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-b2v","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T22:44:18.498643549-05:00","created_by":"marci","updated_at":"2026-01-21T00:53:11.557688461-05:00","closed_at":"2026-01-21T00:53:11.557688461-05:00","close_reason":"Complete - Files dashboard migrated, keeping TabzChrome code intact","dependencies":[{"issue_id":"personal-homepage-b2v","depends_on_id":"personal-homepage-29y","type":"blocks","created_at":"2026-01-20T23:36:00.747365473-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-b2v","depends_on_id":"personal-homepage-0lp","type":"blocks","created_at":"2026-01-20T23:36:01.019737519-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-b2v","depends_on_id":"personal-homepage-u3j","type":"blocks","created_at":"2026-01-20T23:36:01.280180058-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-b2v","depends_on_id":"personal-homepage-7xc","type":"blocks","created_at":"2026-01-20T23:36:01.547641886-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-b2v","depends_on_id":"personal-homepage-246","type":"blocks","created_at":"2026-01-20T23:36:01.810702902-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-b2v.1","title":"Files Epic: Create /api/files routes (tree, content, image, video)","description":"Port file API routes from TabzChrome backend to personal-homepage Next.js API routes.\n\nRoutes needed:\n- GET /api/files/tree - Directory tree with depth control\n- GET /api/files/content - File content for code viewer\n- GET /api/files/image - Image files as data URIs\n- GET /api/files/video - Video files as data URIs\n- GET /api/files/list - Filtered file lists (by type)\n\nReference: TabzChrome/backend/routes/api.js lines 1700-2050","notes":"conductor_session: ctt-conductor-6a6ccf7a\nworker_session: ctt-worker-b2v-1-files-a-10c3c120\nworktree: /home/marci/projects/personal-homepage-worktrees/b2v-1\nbranch: feature/b2v-1\nstarted_at: 2026-01-08T22:51:02-05:00","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:44:56.530696505-05:00","created_by":"marci","updated_at":"2026-01-08T22:56:15.547389319-05:00","closed_at":"2026-01-08T22:56:15.547389319-05:00","close_reason":"All 5 file API routes created: tree, content, image, video, list. Build passes.","dependencies":[{"issue_id":"personal-homepage-b2v.1","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:44:56.531623697-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.10","title":"Files section: Cannot expand folders in FileTree","description":"## Bug\nFiles load in the FileTree sidebar but clicking on folders does not expand them.\n\n## Expected Behavior\nClicking a folder should:\n1. Toggle the expand/collapse state\n2. Show the folder's children\n3. Lazy-load children if not already loaded\n\n## Current Behavior\nFolders display but clicking them does nothing - no expansion, no children shown.\n\n## Root Cause (to investigate)\nCheck app/components/files/FileTree.tsx:\n- toggleFolder function\n- Collapsible component setup\n- expandedFolders state management\n- Click handlers on folder rows\n\n## Related\nPart of Files Dashboard epic (b2v)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T00:55:02.725259363-05:00","created_by":"marci","updated_at":"2026-01-09T01:01:16.93477915-05:00","closed_at":"2026-01-09T01:01:16.93477915-05:00","close_reason":"Fixed double-toggle bug: removed onOpenChange from Collapsible since expandedFolders state is managed manually via button onClick","dependencies":[{"issue_id":"personal-homepage-b2v.10","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-09T00:55:02.742282934-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.2","title":"Files Epic: Create /api/plugins routes (list, toggle, health, update)","description":"Port plugin management API routes from TabzChrome to personal-homepage.\n\nRoutes needed:\n- GET /api/plugins - List installed plugins by marketplace\n- POST /api/plugins/toggle - Enable/disable plugin\n- GET /api/plugins/health - Check for outdated versions\n- POST /api/plugins/update - Update single plugin\n- POST /api/plugins/update-all - Update all outdated\n\nReference: TabzChrome/backend/routes/api.js lines 2052-2900","notes":"conductor_session: ctt-conductor-6a6ccf7a\nworker_session: ctt-worker-b2v-2-plugins-b4699a64\nworktree: /home/marci/projects/personal-homepage-worktrees/b2v-2\nbranch: feature/b2v-2\nstarted_at: 2026-01-08T22:51:02-05:00","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:44:57.398443588-05:00","created_by":"marci","updated_at":"2026-01-08T22:57:53.125909032-05:00","closed_at":"2026-01-08T22:57:53.125909032-05:00","close_reason":"Implemented all plugin management API routes: list, toggle, health, update, update-all, cache/prune","dependencies":[{"issue_id":"personal-homepage-b2v.2","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:44:57.399334848-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.3","title":"Files Epic: Port FileTree component","description":"Move file tree navigation component from TabzChrome.\n\nSource: TabzChrome/extension/dashboard/components/files/FileTree.tsx\n\nFeatures:\n- Collapsible directory tree\n- File type icons\n- Lazy loading of directories\n- Click to open file\n- Right-click context menu\n\n## 🎨 UI Requirements\nUse /shadcn-ui:shadcn-ui skill and shadcn MCP for:\n- Tree/Accordion components\n- Context menu\n- Icons (lucide-react)\n- Follow glass-dark aesthetic\n- Check shadcn registry: `mcp-cli call shadcn/search_items_in_registries '{\"registries\":[\"shadcn\"],\"searchQuery\":\"tree\"}'`","notes":"worker_session: ctt-worker-b2v-3-filetre-82db441b, branch: feature/b2v-3","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:44:58.321241668-05:00","created_by":"marci","updated_at":"2026-01-08T23:17:23.042673765-05:00","closed_at":"2026-01-08T23:17:23.042673765-05:00","close_reason":"FileTree component created with collapsible directories, file icons, lazy loading, and FilesContext integration","dependencies":[{"issue_id":"personal-homepage-b2v.3","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:44:58.322118367-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.3","depends_on_id":"personal-homepage-b2v.6","type":"blocks","created_at":"2026-01-08T22:45:14.885294328-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.4","title":"Files Epic: Port FileViewer component","description":"Move file viewer component from TabzChrome with syntax highlighting.\n\nSource: TabzChrome/extension/dashboard/components/files/FileViewer.tsx\n\nFeatures:\n- Syntax highlighting (Monaco or Prism)\n- Image/video preview\n- Markdown preview\n- Tab management (pinned/preview)\n- Line numbers\n\n## 🎨 UI Requirements\nUse /shadcn-ui:shadcn-ui skill and shadcn MCP for:\n- Tabs component for file tabs\n- ScrollArea for code\n- Card for preview containers\n- Check Context7 for Monaco/code editor patterns\n- Follow glass-dark aesthetic from design-system.md","notes":"worker_session: ctt-worker-b2v-4-filevie-ecd13cc3, branch: feature/b2v-4","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:44:59.803801046-05:00","created_by":"marci","updated_at":"2026-01-08T23:16:39.089487321-05:00","closed_at":"2026-01-08T23:16:39.089487321-05:00","close_reason":"FileViewer component implemented with syntax highlighting, image/video preview, markdown rendering, CSV viewer, and tab management","dependencies":[{"issue_id":"personal-homepage-b2v.4","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:44:59.804863083-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.4","depends_on_id":"personal-homepage-b2v.6","type":"blocks","created_at":"2026-01-08T22:45:14.994861004-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.5","title":"Files Epic: Port PluginList component for Agent management","description":"Adapt TabzChrome PluginList component for agent management in personal-homepage.\n\nSource: TabzChrome/extension/dashboard/components/files/PluginList.tsx (820 lines)\n\nKey logic to preserve:\n- Toggle with loading state (togglingPlugins Set)\n- Filtering (enabled/disabled, type, scope, search)\n- Health panel (outdated detection, update all)\n- Component type badges\n- Marketplace grouping\n\nAdapt for agents:\n- Agent types instead of plugin components\n- Capability badges (skills, MCPs, subagents)\n- Can leverage existing AgentCard.tsx in kanban/shared/\n\n## 🎨 UI Requirements\nUse /shadcn-ui:shadcn-ui skill and shadcn MCP for:\n- Switch component (already used in AgentCard.tsx)\n- Badge for capabilities\n- Input + filters\n- Collapsible/Accordion for groups\n- Search shadcn registry for relevant components\n- Match AgentCard.tsx quality and glass-dark aesthetic","notes":"worker_session: ctt-worker-b2v-5-pluginl-a6c620a7, branch: feature/b2v-5","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:45:00.744639346-05:00","created_by":"marci","updated_at":"2026-01-08T23:17:09.163215304-05:00","closed_at":"2026-01-08T23:17:09.163215304-05:00","close_reason":"Ported PluginList component with full logic preserved, shadcn UI components, and glass-dark aesthetic. Build passes.","dependencies":[{"issue_id":"personal-homepage-b2v.5","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:45:00.745759196-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.5","depends_on_id":"personal-homepage-b2v.6","type":"blocks","created_at":"2026-01-08T22:45:15.107552194-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.6","title":"Files Epic: Create FilesContext for state management","description":"Port FilesContext from TabzChrome for centralized file/agent state.\n\nSource: TabzChrome/extension/dashboard/contexts/FilesContext.tsx\n\nState to manage:\n- File tree cache\n- Open files (tabs)\n- Active file\n- Filter state\n- Favorites\n- Plugin/Agent data\n- Plugin health\n\nAPI integration:\n- loadPlugins, togglePlugin\n- loadPluginHealth, updatePlugin\n- openFile, closeFile, pinFile","notes":"conductor_session: ctt-conductor-6a6ccf7a\nworker_session: ctt-worker-b2v-6-files-c-9730e044\nworktree: /home/marci/projects/personal-homepage-worktrees/b2v-6\nbranch: feature/b2v-6\nstarted_at: 2026-01-08T23:05:25-05:00","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:45:01.849177836-05:00","created_by":"marci","updated_at":"2026-01-08T23:10:35.040042854-05:00","closed_at":"2026-01-08T23:10:35.040042854-05:00","close_reason":"Created FilesContext with all state management from TabzChrome reference. Added fileTypeUtils.ts and claudeFileTypes.ts utilities. Build passes.","dependencies":[{"issue_id":"personal-homepage-b2v.6","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:45:01.850181222-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.6","depends_on_id":"personal-homepage-b2v.1","type":"blocks","created_at":"2026-01-08T22:45:14.665255339-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.6","depends_on_id":"personal-homepage-b2v.2","type":"blocks","created_at":"2026-01-08T22:45:14.771896051-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.7","title":"Files Epic: Create Files section in personal-homepage","description":"Create new Files section combining file tree + viewer + agent management.\n\nSteps:\n1. Add 'files' to Section type in app/page.tsx\n2. Add to navigationItems array\n3. Create app/sections/files.tsx\n4. Add case to renderContent() switch\n5. Layout: sidebar (tree) + main (viewer/agent gallery)\n\nReference: TabzChrome/extension/dashboard/sections/Files.tsx\n\n## 🎨 UI Requirements\nUse /shadcn-ui:shadcn-ui skill and shadcn MCP for:\n- ResizablePanelGroup for sidebar/main split\n- Tabs for switching between files/agents view\n- Follow existing section patterns in personal-homepage\n- Glass-dark aesthetic, terminal-glow headings\n- Add data-tabz-* attributes for MCP automation","notes":"worker_session: ctt-worker-b2v-7-files-s-80ab3ff3, branch: feature/b2v-7","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:45:04.559236004-05:00","created_by":"marci","updated_at":"2026-01-08T23:30:38.751567757-05:00","closed_at":"2026-01-08T23:30:38.751567757-05:00","close_reason":"Created Files section with ResizablePanelGroup layout, integrating FileTree sidebar with FileViewer and PluginList tabs. Added to navigation and section preferences.","dependencies":[{"issue_id":"personal-homepage-b2v.7","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:45:04.560263991-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.7","depends_on_id":"personal-homepage-b2v.3","type":"blocks","created_at":"2026-01-08T22:45:15.216206292-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.7","depends_on_id":"personal-homepage-b2v.4","type":"blocks","created_at":"2026-01-08T22:45:15.324879637-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.7","depends_on_id":"personal-homepage-b2v.5","type":"blocks","created_at":"2026-01-08T22:45:15.432922153-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.8","title":"Files Epic: Agent Gallery with User Directory template style","description":"Create agent gallery view using User Directory template aesthetic.\n\nInspiration: ~/projects/portfolio-style-guides User Directory template\n\nFeatures:\n- Featured agents carousel at top\n- Card grid with avatars, capabilities, toggle\n- Filtering by type, category, search\n- Stats (usage count, conversations)\n- Combine with existing AgentCard.tsx patterns\n\nThis creates the visual layer on top of the agent management logic.\n\n## 🎨 UI Requirements - USE EXTENSIVELY\nUse /shadcn-ui:shadcn-ui skill and shadcn MCP for:\n- Card grid layout\n- Carousel for featured agents\n- Avatar component\n- Badge for stats/capabilities\n- Input + Select for filters\n- Search: `mcp-cli call shadcn/search_items_in_registries '{\"registries\":[\"shadcn\"],\"searchQuery\":\"carousel\"}'`\n- Query Context7 for grid/gallery patterns\n- This is the showcase UI - make it beautiful!","notes":"worker_session: ctt-worker-b2v-8-agent-g-7e8efd85, branch: feature/b2v-8","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T22:45:05.694462344-05:00","created_by":"marci","updated_at":"2026-01-08T23:27:05.217394568-05:00","closed_at":"2026-01-08T23:27:05.217394568-05:00","close_reason":"Created AgentGallery.tsx with featured carousel, grid/list views, filters, and glass-dark aesthetic","dependencies":[{"issue_id":"personal-homepage-b2v.8","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:45:05.695398546-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.8","depends_on_id":"personal-homepage-b2v.5","type":"blocks","created_at":"2026-01-08T22:45:15.541258453-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b2v.9","title":"Files Epic: GATE - User approval before removing TabzChrome code","description":"## BLOCKING GATE - Do not proceed without explicit user approval\n\nBefore removing ANY code from TabzChrome:\n1. All features working in personal-homepage\n2. User has tested and approved\n3. User explicitly says 'approved to remove from TabzChrome'\n\nThis task should be the LAST one closed in this epic.\n\n## Checklist before approval\n- [ ] File tree works\n- [ ] File viewer works (code, images, video)\n- [ ] Plugin/Agent management works\n- [ ] All API routes functional\n- [ ] UI polish complete\n- [ ] User sign-off received","notes":"prepared.skills: (none - requires user decision)\nprepared.files: (TabzChrome codebase)\nprepared.prompt: |\n  ## GATE: User approval before removing TabzChrome code\n  \n  ### Context\n  This is a GATE task requiring USER APPROVAL before proceeding.\n  Part of the Files Dashboard extraction epic (b2v).\n  \n  ### NOT SUITABLE FOR AUTONOMOUS WORKERS\n  This task requires human decision-making.\n  \n  ### When Done\n  User must manually close this issue after approval.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T22:46:12.526507034-05:00","created_by":"marci","updated_at":"2026-01-11T02:01:57.511492188-05:00","closed_at":"2026-01-11T02:01:57.511492188-05:00","close_reason":"Not ready to remove TabzChrome code - deferring indefinitely","dependencies":[{"issue_id":"personal-homepage-b2v.9","depends_on_id":"personal-homepage-b2v","type":"parent-child","created_at":"2026-01-08T22:46:12.527486066-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.9","depends_on_id":"personal-homepage-b2v.7","type":"blocks","created_at":"2026-01-08T22:46:18.846771974-05:00","created_by":"marci"},{"issue_id":"personal-homepage-b2v.9","depends_on_id":"personal-homepage-b2v.8","type":"blocks","created_at":"2026-01-08T22:46:18.96040495-05:00","created_by":"marci"}]}
{"id":"personal-homepage-b3w","title":"Music: Bottom player bar visible underneath drawer","description":"## Bug\nA second player bar is visible sticking out underneath the PersistentMusicDrawer.\n\n### Likely Cause\nSpotifyPlayer component has its own bottom player/controls that should be hidden when the drawer is visible, or the drawer needs more height/padding to cover it.\n\n### Components\n- `components/PersistentMusicDrawer.tsx` - the floating drawer\n- `components/SpotifyPlayer.tsx` - may have its own now-playing bar\n\n### Fix Options\n1. Hide SpotifyPlayer's bottom bar when drawer is open\n2. Increase drawer z-index\n3. Remove duplicate bottom bar from SpotifyPlayer (drawer handles it)\n4. Add bottom padding to main content when drawer is open","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:20:23.284660337-05:00","created_by":"marci","updated_at":"2026-01-09T15:27:02.951107388-05:00","closed_at":"2026-01-09T15:27:02.951107388-05:00","close_reason":"Closed"}
{"id":"personal-homepage-b5y","title":"Fix Analytics page showing incorrect token usage","description":"## Bug\nAnalytics page shows 376.4k total tokens for last 7 days, but Claude Code /stats shows much higher usage:\n\n**Claude Code /stats (Last 7 days):**\n- Opus 4.5 (94.2%): In: 1.7m, Out: 282.2k\n- Haiku 4.5 (3.3%): In: 67.4k, Out: 441\n- Sonnet 4.5 (2.5%): In: 51.7k, Out: 654\n\nTotal should be ~2.1M tokens, not 376.4k.\n\n## Investigation\n- Check how Analytics page calculates token usage\n- Verify data source matches Claude Code stats\n- May be reading from wrong file or incorrect time range\n- Check if only counting output tokens or missing input tokens\n\n## Files\n- app/sections/analytics.tsx\n- Related data fetching hooks/API","notes":"## Retro\n\n**Root cause identified:**\n- analytics.tsx was generating random demo data instead of reading real stats\n- Claude Code stores stats in ~/.claude/stats-cache.json\n- The stats file contains dailyModelTokens (output tokens only per model per day) and modelUsage (totals with input/output/cache breakdown)\n\n**Solution:**\n- Created /api/claude-stats API route to read stats-cache.json\n- Updated analytics.tsx to fetch from API on mount and refresh\n- Used overall input/output ratio (1.1:1) for stable daily estimation instead of per-model ratios which caused inflation (Haiku has 136:1 ratio)\n\n**What was tricky:**\n- dailyModelTokens only contains OUTPUT tokens, not input\n- Per-model input/output ratios vary wildly (Haiku 136:1, Opus 1.08:1)\n- Had to use overall ratio across all models for stable estimation\n\n**Testing notes:**\n- Build passes\n- Last 7 days now shows ~5.1M tokens (vs 376.4k demo data)\n- Could not test live API since dev server runs on main worktree","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:58:49.606205882-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T01:24:02.756029937-05:00","closed_at":"2026-01-21T01:24:02.756029937-05:00","close_reason":"Fixed: Analytics page now reads real Claude Code stats from ~/.claude/stats-cache.json via new /api/claude-stats route. Token calculations use overall input/output ratio for accurate daily estimation instead of random demo data.","labels":["analytics","gate:codex-review","ready","ui"]}
{"id":"personal-homepage-b7f0","title":"Tests: AI hooks (useAIChat, useAIDrawerChat, useAgents)","description":"Add vitest tests for AI-related hooks.\n\n## Hooks to test\n- hooks/useAIChat.ts\n- hooks/useAIDrawerChat.ts  \n- hooks/useAgents.ts\n- hooks/useConversations.ts\n\n## Test coverage\n- State initialization\n- Message sending/receiving mocks\n- Token tracking\n- Agent selection\n- Conversation CRUD\n\nUse vitest + @testing-library/react","notes":"## prepared.prompt\n\n**Task:** Write vitest tests for AI hooks.\n\n**Files to test:**\n- `hooks/useAIChat.ts`\n- `hooks/useAIDrawerChat.ts`\n- `hooks/useAgents.ts`\n- `hooks/useConversations.ts`\n\n**Output:** `__tests__/hooks/useAI*.test.ts`\n\n**Approach:**\n1. Read each hook to understand its API\n2. Mock fetch/API calls\n3. Test state changes, error handling\n4. Use renderHook from @testing-library/react\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:15:43.482093404-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:40:23.0855092-05:00","closed_at":"2026-01-28T22:40:23.0855092-05:00","close_reason":"Done: Added vitest tests for AI hooks (useAIChat, useAIDrawerChat, useAgents) with 62 passing tests covering initialization, models fetching, conversation management, settings, feedback handling, callbacks, streaming, drawer context, input management, status checks, agents filtering and lookups","labels":["hooks","ready","tests"]}
{"id":"personal-homepage-b7p","title":"Music Audit: Clear spotify-auth=pending from URL after successful auth","description":"## Bug: spotify-auth=pending Not Cleared from URL\n\n### Root Cause Analysis\nThe OAuth callback flow sets a URL parameter that's never cleaned up:\n\n**app/api/spotify/callback/route.ts line 197:**\n```typescript\nwindow.location.href = '/?section=music-player\u0026spotify-auth=pending';\n```\n\n**hooks/useSpotifyAuth.ts** handles the auth but **never clears the URL parameter**:\n- Line 132-161: `checkPendingAuth` effect reads from sessionStorage\n- After successful auth, sessionStorage is cleared (line 140)\n- But the URL still shows `?section=music-player\u0026spotify-auth=pending`\n\n### Why This Matters\n1. **UX Issue:** Ugly URL after login\n2. **Bookmarking:** Users might bookmark the pending URL\n3. **Refresh Bug:** Refreshing the page with this URL triggers unnecessary auth checks\n\n### Fix Location\n`hooks/useSpotifyAuth.ts` around line 156 (after successful auth)\n\n### Solution\nAdd URL cleanup after successful authentication:\n```typescript\n// After setting tokens and user successfully:\nif (window.location.search.includes('spotify-auth=pending')) {\n  const url = new URL(window.location.href)\n  url.searchParams.delete('spotify-auth')\n  window.history.replaceState({}, '', url.toString())\n}\n```\n\n### Files to Modify\n- `hooks/useSpotifyAuth.ts` - Add URL cleanup in checkPendingAuth effect\n\n### Test Steps\n1. Logout from Spotify\n2. Login via OAuth redirect (not popup)\n3. After successful auth, verify URL no longer contains spotify-auth=pending\n4. Verify browser history doesn't show duplicate entries","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T14:43:46.311793672-05:00","created_by":"marci","updated_at":"2026-01-09T15:16:00.841018413-05:00","closed_at":"2026-01-09T15:16:00.841018413-05:00","close_reason":"Fixed in commits 944f992 and 2cfa67a"}
{"id":"personal-homepage-b83","title":"Import pyradio stations to Music Player","description":"Parse user pyradio stations.csv for personal radio stations.\n\n**Based on:** docs/research/music-player-integration.md (Phase 3)\n\n**Implementation:**\n1. Read ~/.config/pyradio/stations.csv via API route\n2. Parse CSV format: name,url,encoding,icon,...\n3. Resolve playlist URLs (.pls, .m3u) to direct streams\n4. Display in \"My Stations\" tab in Music Player\n5. Merge with Radio Browser favorites\n\n**CSV Format:**\n```\nStation Name,http://stream.url/stream.mp3\n```\n\n**Files to create:**\n- `app/api/radio/pyradio/route.ts` - Read and parse stations.csv\n- `lib/radio-utils.ts` - Playlist URL resolver\n\n**Complexity:** Low - simple file parsing","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T13:00:35.872902612-05:00","updated_at":"2026-01-05T15:49:48.075715694-05:00","closed_at":"2026-01-05T15:49:48.075715694-05:00","close_reason":"Implemented pyradio stations import with My Stations tab in Music Player"}
{"id":"personal-homepage-b8rj","title":"Migrate flowchart designer to personal-homepage as toggleable section","description":"Move the flowchart designer from BeadsHive/docs/flowchart into personal-homepage as a section/page.\n\n## Context\n- Flowchart designer is currently standalone React+Vite app\n- personal-homepage already has TabzChrome integration, plugin/page toggle system, working dir provider\n- Fits alongside existing kanban page that uses beads\n\n## Key Decisions\n- Keep flowchart's own design/styling (don't convert to Tailwind)\n- Flowchart has its own sidebar - OK since main sidebar is collapsible\n- Use personal-homepage's workingDir provider instead of separate API calls\n\n## Migration Steps\n1. Register section in useSectionPreferences.ts\n2. Add navigation entry in page.tsx\n3. Create section wrapper component\n4. Copy flowchart components (keep existing styling)\n5. Wire up to useWorkingDirectory() hook\n6. Add @xyflow/react and dagre deps","design":"## Phase 1: Register Section\n\n### 1. useSectionPreferences.ts\n```typescript\n// Add to ToggleableSection type (line ~28)\n| \"flowchart\"\n\n// Add to DEFAULT_CATEGORY_ASSIGNMENTS (line ~125)\nflowchart: \"development\",\n\n// Add to DEFAULT_SECTION_ORDER (line ~162)\n\"flowchart\",\n\n// Add to DEFAULT_VISIBILITY (line ~189)\nflowchart: true,\n```\n\n### 2. page.tsx\n```typescript\n// Add import\nimport FlowchartSection from \"@/app/sections/flowchart\"\nimport { GitBranch } from \"lucide-react\"\n\n// Add to navigationItems array\n{ id: \"flowchart\", label: \"Flowchart\", icon: GitBranch, description: \"Workflow designer\" },\n\n// Add to tileConfig\nflowchart: { icon: GitBranch, label: \"Flowchart\", description: \"Design workflows visually\" },\n\n// Add case in renderContent switch\ncase \"flowchart\":\n  return \u003cFlowchartSection activeSubItem={activeSubItem} onSubItemHandled={clearSubItem} /\u003e\n```\n\n## Phase 2: Copy Components\n\nSource: `/home/marci/BeadsHive/docs/flowchart/src/`\nTarget: `/home/marci/projects/personal-homepage/app/components/flowchart/`\n\nCopy these files:\n- `components/FlowEditor.tsx`\n- `components/nodes/CustomNode.tsx`\n- `components/edges/EditableEdge.tsx`\n- `components/menus/*.tsx`\n- `components/HelpModal.tsx`\n- `Sidebar.tsx`\n- `hooks/useTabzConnection.ts` → `hooks/useTabzConnection.ts`\n- `hooks/useDragAndDrop.ts`\n- `types.ts`\n- `utils/*.ts`\n- `App.css` → `app/components/flowchart/flowchart.css`\n\n## Phase 3: Create Section Wrapper\n\nCreate `app/sections/flowchart.tsx`:\n```typescript\n\"use client\"\n\nimport React from 'react'\nimport { ReactFlowProvider } from '@xyflow/react'\nimport { FlowEditor } from '@/app/components/flowchart/FlowEditor'\nimport { useTabzConnection } from '@/hooks/useTabzConnection'\nimport { useWorkingDirectory } from '@/hooks/useWorkingDirectory'\nimport '@/app/components/flowchart/flowchart.css'\nimport '@xyflow/react/dist/style.css'\n\ninterface FlowchartSectionProps {\n  activeSubItem?: string | null\n  onSubItemHandled?: () =\u003e void\n}\n\nexport default function FlowchartSection({\n  activeSubItem,\n  onSubItemHandled,\n}: FlowchartSectionProps) {\n  const { connected, queue, spawn } = useTabzConnection()\n  const { workingDir } = useWorkingDirectory()\n\n  React.useEffect(() =\u003e {\n    if (activeSubItem) onSubItemHandled?.()\n  }, [activeSubItem, onSubItemHandled])\n\n  return (\n    \u003cdiv className=\"h-full flowchart-section\" data-tabz-section=\"flowchart\"\u003e\n      \u003cReactFlowProvider\u003e\n        \u003cFlowEditor\n          tabzConnected={connected}\n          tabzQueue={queue}\n          tabzSpawn={spawn}\n          workingDir={workingDir}\n        /\u003e\n      \u003c/ReactFlowProvider\u003e\n    \u003c/div\u003e\n  )\n}\n```\n\n## Phase 4: Dependencies\n\nAdd to package.json:\n```json\n\"@xyflow/react\": \"^12.10.0\",\n\"dagre\": \"^0.8.5\",\n\"@types/dagre\": \"^0.7.53\"\n```\n\n## Import Path Updates\n\nWhen copying files, update imports:\n- `'../Sidebar'` → `'./Sidebar'`\n- `'../types'` → `'./types'`\n- `'../App.css'` → `'./flowchart.css'`\n- Relative paths to `@/` absolute paths where appropriate","acceptance_criteria":"- [ ] Flowchart appears in sidebar under Development category\n- [ ] Flowchart section renders with its own sidebar and canvas\n- [ ] Can drag nodes from flowchart sidebar onto canvas\n- [ ] TabzChrome connection status shows (connected/offline indicator)\n- [ ] Right-click node → launch commands work\n- [ ] Workflows save/load from localStorage\n- [ ] Section can be toggled on/off in Settings\n- [ ] No console errors","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T00:00:16.005079713-05:00","updated_at":"2026-01-26T00:16:00.845612916-05:00","closed_at":"2026-01-26T00:16:00.845612916-05:00","close_reason":"Migrated flowchart designer from BeadsHive/docs/flowchart to personal-homepage as toggleable section. Added to navigation with GitBranch icon, registered in useSectionPreferences.ts under development category, created section wrapper with ReactFlowProvider, copied all components/hooks/utils/constants with updated import paths, installed @xyflow/react and dagre dependencies. Build passes successfully.","labels":["flowchart","migration","personal-homepage"]}
{"id":"personal-homepage-bac","title":"Agent Cards: Mini-chat popover component","description":"Lightweight chat UI for section-embedded agents. Compact message list, input field, quick actions. Can expand to full AI Workspace. Shares conversation with main workspace.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:25:18.920678301-05:00","created_by":"marci","updated_at":"2026-01-09T01:41:31.80211069-05:00","closed_at":"2026-01-09T01:41:31.80211069-05:00","close_reason":"feat(ai): add MiniChat popover component for agent cards","dependencies":[{"issue_id":"personal-homepage-bac","depends_on_id":"personal-homepage-cuk","type":"blocks","created_at":"2026-01-08T18:25:40.353016236-05:00","created_by":"marci"}]}
{"id":"personal-homepage-bcpi","title":"Projects page consolidation: modernize and clean up","description":"**Goal:** Consolidate the Projects page into a cohesive dev workspace hub.\n\n**Current state (fragmented):**\n- Per-project pages have: Overview, Source control, Saved commands, Kanban, Links\n- Main grid has: terminal launch, VS Code, TFE file browser, GitHub, + row of other icons\n- Kanban tabs use old implementation (not beads-integrated)\n- File browsing uses TFE but React file explorer now exists\n- Icon row has accumulated unclear actions\n\n**Consolidation plan:**\n\n1. **Upgrade Kanban tab** → Use the improved beads kanban component\n2. **Swap file browser** → Replace TFE launcher with React file explorer\n3. **Clean up icon row** → Audit what each does, remove/consolidate unused\n4. **Simplify per-project tabs:**\n   - Keep: Overview, Kanban, Commands\n   - Evaluate: Source control, Links (still used?)\n   - Add: Agent config (ties into agent transparency feature)\n\n**Outcome:**\nProjects page becomes THE dev workspace hub - not competing with scattered pages.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-23T17:29:18.97971452-05:00","created_by":"GGPrompts","updated_at":"2026-01-23T18:49:27.48649821-05:00","closed_at":"2026-01-23T18:49:27.48649821-05:00","close_reason":"Broken down into subtasks: mkmn (Kanban upgrade), 3h58 (FileTree swap), hapi (icon cleanup), 1a7j (Agent tab)","labels":["cleanup","dev-workspace","projects"]}
{"id":"personal-homepage-bil","title":"Unify dual Device Selectors (drawer + section)","description":"## Bug\nTwo places to select playback device (drawer + section) do not sync.\n\n## Solution\n- Single source of truth for selected device\n- Both selectors read/write from same state\n- Consider lifting state to MusicPlayerProvider\n\n## Files\n- components/PersistentMusicDrawer.tsx (drawer selector)\n- app/sections/music-player.tsx (section selector)\n- components/MusicPlayerProvider.tsx (shared state)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T23:34:47.096141637-05:00","updated_at":"2026-01-20T23:36:27.578383979-05:00","closed_at":"2026-01-20T23:36:27.578383979-05:00","close_reason":"Duplicate of 5t2 - orphaned from failed creation","labels":["music-player","spotify"]}
{"id":"personal-homepage-blxp","title":"Prompts Playground Phase 4: UX polish - shortcuts, history, export","notes":"## Retro\n\n**What worked:**\n- Modular component approach - created separate files for KeyboardShortcuts, ComparisonHistory, SessionManager, LoadingSkeleton\n- Re-using existing patterns from codebase (sonner toasts, glass styling, existing UI components)\n- Building on Phase 3 infrastructure (responses map, voting, export)\n\n**What was unclear:**\n- Whether fullscreen/focus mode needed enhancement (already existed in DynamicPanelViewer)\n- Exact behavior for Ctrl+F shortcut (conflicts with browser find, left it out)\n\n**Implementation:**\n- Keyboard shortcuts with platform-aware modifiers (Cmd vs Ctrl)\n- Help dialog triggered by ? key\n- Session auto-save with debounced localStorage persistence\n- History of last 20 comparisons with reload capability\n- New Session button with confirmation when content exists\n- Loading skeleton for initial hydration\n- Toast notifications for all user actions\n- Smooth fade-in transitions","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T22:48:02.548787623-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T00:10:08.218157099-05:00","closed_at":"2026-01-29T00:10:08.218157099-05:00","close_reason":"Done: Implemented Phase 4 UX polish - keyboard shortcuts with help dialog, comparison history (last 20), session auto-save/restore, new session button, toast notifications, loading skeletons, and smooth transitions","dependencies":[{"issue_id":"personal-homepage-blxp","depends_on_id":"personal-homepage-c1wu","type":"discovered-from","created_at":"2026-01-28T22:48:02.550885203-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-bm4","title":"Music: Drawer covers left sidebar","description":"## Bug\nThe PersistentMusicDrawer spans full width and covers the left navigation sidebar.\n\n### Expected\nDrawer should only cover the main content area, not the sidebar.\n\n### Likely Fix\nIn `components/PersistentMusicDrawer.tsx`, the drawer probably has:\n```tsx\nclassName=\"fixed bottom-0 left-0 right-0 ...\"\n```\n\nShould respect sidebar width:\n```tsx\nclassName=\"fixed bottom-0 left-[var(--sidebar-width)] right-0 ...\"\n// Or use the same left offset as main content area\n```\n\nCheck how sidebar width is defined in the layout and match it.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:22:51.94950861-05:00","created_by":"marci","updated_at":"2026-01-10T18:57:11.318185715-05:00","closed_at":"2026-01-10T18:57:11.318185715-05:00","close_reason":"Fixed drawer positioning to use CSS variable for sidebar width","comments":[{"id":3,"issue_id":"personal-homepage-bm4","author":"marci","text":"Regression: drawer still overlaps sidebar per user report","created_at":"2026-01-10T23:52:00Z"}]}
{"id":"personal-homepage-bmi5","title":"Kanban: Show live worker activity for In Progress issues","description":"Idea: In Progress column could show real-time worker status like TabzChrome ActiveTerminals dashboard.\n\nData source: `/tmp/claude-code-state/*.json` (written by state-tracker.sh hook)\n\nEach state file has:\n- status: idle, tool_use, awaiting_input\n- current_tool: Bash, Read, Edit, etc.\n- working_dir: match to issue by path\n- subagent_count\n- details: current tool args\n\nCould match workers to issues by working_dir containing issue ID.\n\nAlternative: Just use TabzChrome sidebar for live view, Kanban for backlog/ready/done.","notes":"## Retro\n- Implementation went smoothly\n- State tracker files have two formats: _N.json (full state) and *-context.json (context only)\n- Used existing useBeadsBan pattern for the hook\n- Added WorkerStatusContext to avoid prop drilling\n- Workers matched to issues by extracting issue ID from working_dir path","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-23T02:53:32.022007927-05:00","updated_at":"2026-01-23T18:49:42.689102531-05:00","closed_at":"2026-01-23T18:49:42.689102531-05:00","close_reason":"Done: Added live worker status display - API route scans state tracker files, 5s polling hook, WorkerStatusBadge component with status/context%/tool, integrated into KanbanCard for in-progress tasks","labels":["frontend","gate:test-runner","idea","kanban","ready","tabz-integration"]}
{"id":"personal-homepage-bnp","title":"Agent Cards: Define data model and types","description":"Create lib/agents/types.ts with AgentCard, SelectorDoc, and related interfaces. Include validation schemas.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:24:40.077763607-05:00","created_by":"marci","updated_at":"2026-01-09T01:25:21.20989585-05:00","closed_at":"2026-01-09T01:25:21.20989585-05:00","close_reason":"Implemented Agent Cards data model with AgentCard, SelectorDoc, AgentConfig interfaces, AgentRegistry type, and Zod validation schemas in lib/agents/types.ts"}
{"id":"personal-homepage-bvu","title":"AIDrawer: Re-integrate Framer Motion animations from 2y4","description":"The animations from personal-homepage-2y4 conflicted with dtv backend wiring during merge. The dtv version was kept for complete backend functionality.\n\nNeed to re-apply from 2y4:\n- useReducedMotion hook for accessibility\n- Spring physics for drawer transitions\n- Message fade/slide animations\n- Tool use block expand/collapse\n- Button hover/tap micro-interactions\n- Staggered quick action reveals\n\nReference: feature/personal-homepage-2y4 branch (now deleted, check git reflog or worker transcript)","notes":"## Retro\n\n- What was unclear: Nothing major - issue description was clear about what animations to re-integrate\n- Missing context: Had to use git show to retrieve the 2y4 animation code since the branch was deleted\n- Discovered work: None\n- What would help: Including a diff or snippet of the key animations in the issue would speed up future similar tasks\n\n## Implementation\n\n- Added useReducedMotion hook for accessibility compliance\n- Added animation constants (drawerSpring, quickTransition)\n- Added fabVariants, backdropVariants, panelVariantsReduced\n- Added quickActionsContainerVariants and quickActionItemVariants for staggered reveals\n- Wrapped buttons in motion.div with hover/tap effects\n- Added AnimatePresence for state transitions between minimized/expanded\n- Added backdrop overlay with blur for mobile\n- Enhanced indicator dot with scale animation and ping effect","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T00:19:02.610676995-05:00","updated_at":"2026-01-23T00:28:29.285952663-05:00","closed_at":"2026-01-23T00:28:29.285952663-05:00","close_reason":"Done: Re-integrated all Framer Motion animations from 2y4 branch into AIDrawer while preserving dtv backend wiring. Added useReducedMotion accessibility, spring physics, FAB/backdrop variants, button micro-interactions, staggered quick actions, and state transitions."}
{"id":"personal-homepage-bvy","title":"Audio visualizer: Capture Chrome tab audio for reactive backgrounds","description":"Add audio capture capability to enable music visualizers that react to any audio playing in Chrome.\n\n## Use Case\nPersonal-homepage has glassmorphism/animated backgrounds. Want them to pulse/react to music playing (Spotify, YouTube, SynthWave player, etc.)\n\n## Implementation Options\n\n### Option 1: TabzChrome MCP Tool (Full)\nAdd `tabz_capture_audio` MCP tool using chrome.tabCapture API:\n```javascript\n// Extension side\nchrome.tabCapture.capture({ audio: true, video: false }, (stream) =\u003e {\n  const audioContext = new AudioContext()\n  const source = audioContext.createMediaStreamSource(stream)\n  const analyser = audioContext.createAnalyser()\n  source.connect(analyser)\n  // Stream frequency data to client\n})\n```\n\nRequires:\n- Add `tabCapture` permission to manifest.json\n- New MCP tool to start/stop capture\n- WebSocket or polling endpoint for frequency data\n- Handle tab switching gracefully\n\n### Option 2: Same-Page Audio (Quick Win)\nFor audio sources on personal-homepage itself (SynthWave player):\n```typescript\nconst audioContext = new AudioContext()\nconst analyser = audioContext.createAnalyser()\nconst source = audioContext.createMediaElementSource(audioElement)\nsource.connect(analyser)\nanalyser.connect(audioContext.destination)\n\nconst dataArray = new Uint8Array(analyser.frequencyBinCount)\nanalyser.getByteFrequencyData(dataArray) // frequency bands 0-255\n```\n\n### Option 3: Spotify BPM Sync (Fake but Easy)\nUse Spotify audio features API for tempo-synced animations:\n```typescript\nconst features = await spotify.getAudioFeatures(trackId)\nconst bpm = features.tempo\nconst pulseInterval = 60000 / bpm\n```\n\n## Visualizer Ideas\n- Glassmorphism blur intensity reacts to bass\n- Background gradient hue shifts with frequency\n- Particle effects synced to beats\n- Waveform overlay on sections\n\n## References\n- Web Audio API: https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n- chrome.tabCapture: https://developer.chrome.com/docs/extensions/reference/tabCapture/\n- Spotify Audio Features: https://developer.spotify.com/documentation/web-api/reference/get-audio-features","notes":"## Retro\n- Implementation was straightforward using Web Audio API\n- Created modular components: hook for audio analysis, provider for state, settings UI\n- Multiple visualization styles give users flexibility\n- TypeScript had strict Uint8Array generic issues that needed type assertions\n- Integration with existing music player was clean via ref connection\n- Settings integrated into existing General tab in Settings section\n- No blocking issues encountered","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-08T23:10:44.512177725-05:00","created_by":"marci","updated_at":"2026-01-21T01:31:57.57809097-05:00","closed_at":"2026-01-21T01:31:57.57809097-05:00","close_reason":"Implemented audio visualizer with 6 styles (pulse, gradient-shift, bars, waveform, radial, particles), Web Audio API integration, and settings UI in General tab","labels":["gate:codex-review,gate:visual-qa"]}
{"id":"personal-homepage-bwt","title":"Epic: Specialized Agent Cards System","description":"Transform AI Workspace into a system of specialized AI agents with page-specific knowledge, MCP tool access, and embeddable assistants per section. Each agent has unique personality, avatar, and domain expertise.","notes":"prepared.skills: frontend:frontend-development, frontend:ui-styling, meta:context-engineering\nprepared.files: components/agents/, app/components/kanban/shared/Agent*, app/sections/ai-workspace.tsx\nprepared.prompt: |\n  ## Epic: Specialized Agent Cards System\n  \n  ### Scope\n  Full implementation of the agent cards system - this is an EPIC.\n  Related subtasks: ibf, ab4, afg, 6e0\n  \n  ### Key Files\n  - components/agents/ (agent components)\n  - app/components/kanban/shared/Agent* (kanban agent components)\n  - app/sections/ai-workspace.tsx (AI workspace)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /frontend:ui-styling for UI components\n  Use /meta:context-engineering for agent prompts\n  \n  ### Approach\n  This epic coordinates subtasks. Consider breaking down further.\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-bwt","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-08T18:25:29.36359403-05:00","created_by":"marci","updated_at":"2026-01-21T00:53:17.425511932-05:00","closed_at":"2026-01-21T00:53:17.425511932-05:00","close_reason":"Complete - Agent cards implemented in AI Workspace"}
{"id":"personal-homepage-bzg","title":"Add hover tooltips to collapsed sidebar navigation items","description":"When the left sidebar is collapsed, only the Home icon shows a hover tooltip. All other navigation items should also have tooltips showing their names on hover.\n\n**Current Behavior:**\n- Home icon has tooltip on hover when sidebar collapsed\n- Other icons (Weather, Daily Feed, etc.) have no tooltips\n\n**Expected Behavior:**\n- All navigation items show their name as a tooltip when hovered in collapsed state\n- Consistent UX across all sidebar items\n\n**Implementation:**\n- Check how Home icon tooltip is implemented\n- Apply same pattern to all other navigation items in the sidebar\n- Use shadcn/ui Tooltip component for consistency","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T12:24:48.399536437-05:00","updated_at":"2026-01-05T12:55:41.391698092-05:00","closed_at":"2026-01-05T12:55:41.391698092-05:00","close_reason":"Implemented: Added hover tooltips to collapsed sidebar category icons"}
{"id":"personal-homepage-c0n","title":"Research Spotify and pyradio integration for Music Player","description":"Research integration options for the Music Player section to play real music instead of mock data.\n\n**Spotify Integration:**\n- Spotify Web API for browsing/searching\n- Spotify Web Playback SDK for in-browser playback (requires Premium)\n- OAuth flow for user authentication\n- Limitations: 30-second previews for non-Premium, SDK requires Premium\n\n**pyradio Integration:**\n- pyradio is a CLI internet radio player\n- Could spawn via TabzChrome terminal integration\n- Stream URLs could be played directly in browser\n- Research: Can we get station list from pyradio config?\n\n**ytconverter Integration (~/xprojects/ytconverter):**\n- Python CLI tool using yt-dlp for YouTube downloads\n- Can extract audio as MP3 with bitrate selection\n- Could spawn via TabzChrome to download music from YouTube\n- Integration: Add \"Download from YouTube\" button in Music Player\n- Downloaded files go to ~/Downloads or custom path\n- Then appear in local media browser\n\n**Research Questions:**\n1. What Spotify scopes are needed for playback vs browsing?\n2. Can we use Spotify preview URLs without auth for discovery?\n3. How does pyradio store station configs? Can we parse them?\n4. Are there free radio stream APIs (Radio Browser API, etc.)?\n5. What audio formats can browser handle natively?\n6. Can we wrap ytconverter in an API endpoint for async downloads?\n7. Progress tracking for ytconverter downloads?\n\n**Deliverable:** Summary of integration options with pros/cons and implementation complexity.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T12:38:29.280183264-05:00","updated_at":"2026-01-05T12:56:16.951236346-05:00","closed_at":"2026-01-05T12:56:16.951236346-05:00","close_reason":"Research completed: Created docs/research/music-player-integration.md with Spotify, pyradio, ytconverter, and Radio Browser API findings"}
{"id":"personal-homepage-c1wu","title":"Feature: Prompts Playground redesign - multi-model arena style","description":"Redesign Prompts Playground to be more useful, inspired by ~/projects/model-arena.\n\n## Current Problems\n- Split views broken\n- Can only send to one model at a time\n- No project folder for outputs\n- Not very useful in current state\n\n## Desired Features\n\n### Multi-Model Sending\n- Send same prompt to multiple models simultaneously\n- Compare outputs side by side\n- Model registry from models.json or agent config\n\n### Project Folder Integration\n- Set a working directory for the session\n- Models can create files in that directory\n- See generated artifacts (code, images, etc.)\n\n### Arena-Style Comparison\n- Grid view showing all model responses\n- Timing/token stats per model\n- Rating/voting on responses\n\n## Reference\n- ~/projects/model-arena has challenges + model registry\n- models.json defines CLI commands per model\n\n## Implementation Ideas\n1. Import model registry concept\n2. Multi-pane layout with model selector per pane\n3. 'Send to All' button\n4. Output folder picker\n5. Artifact viewer for generated files","notes":"## Exploration Findings\n\n### Current Implementation Analysis\n\n**Strengths:**\n- Clean component architecture with BrowserPanel, QuadSplitViewer, ComparisonToolbar\n- Multiple view modes (quad 2x2, horizontal 2-pane, vertical 2-pane)\n- Resizable panels with smooth separators\n- Component library with tagging, search, filtering\n- Save/load comparison snapshots\n- LocalStorage persistence\n- iframe-based artifact rendering\n\n**Current Limitations:**\n\n1. **Split View Issues**\n   - Only supports hardcoded 4-panel layout (always 4 URLs needed)\n   - Horizontal/vertical modes only use first 2 panels, waste space\n   - No dynamic panel management (add/remove panels)\n   - Fixed panel indexing makes flexible layouts hard\n\n2. **Single Model Limitation**\n   - Each panel is manual URL+label pair\n   - No model registry integration\n   - Can't batch-send same prompt to multiple models\n   - Agent config stored but not used for actual CLI invocation\n\n3. **No Project Folder Support**\n   - Artifacts viewed in iframes only\n   - No workspace directory for generated files\n   - Can't access file system outputs from models\n   - No output organization\n\n4. **No Real Multi-Model Comparison**\n   - No timing/performance metrics\n   - No token counting\n   - No voting/rating system\n   - No side-by-side diff view\n\n### Model Arena Reference\n\n**models.json Structure (15 models):**\n- Claude: Sonnet 4.5 (1x), Haiku 4.5 (0.33x), Opus 4.5 (3x), Sonnet 4\n- GPT: 5.2 Codex, 5.2, 5.1 Codex Max/Mini with reasoning_levels\n- Gemini: 3 Pro, Native 2.5\n- Swarms: Opus (9x), Sonnet (3x), Haiku (1x) - 3 subagents each\n- Each model has: name, family, company, version, color, icon, traits, cli, pricing\n\n**Challenge Structure:**\n- meta.json: id, title, prompt, contestants array, answers map\n- HTML outputs: a.html, b.html, c.html, d.html (or named after model)\n- Some challenges have subdirs with README/docs\n- Self-contained HTML files with inline CSS/JS\n\n### Proposed Implementation Plan\n\n**Phase 1: Foundation (Core Infrastructure)**\n- Import model registry from models.json\n- Create ModelSelector component with model picker per panel\n- Refactor PanelConfig to support flexible panel count\n- Add workspace/project folder picker\n- Implement dynamic panel add/remove\n\n**Phase 2: Multi-Model Sending (Key Feature)**\n- Create ModelInvoker service to handle CLI calls\n- Implement 'Send to All' button\n- Add prompt input with template variables\n- Show loading states per model\n- Capture outputs to workspace folder\n\n**Phase 3: Arena-Style Comparison**\n- Add metrics display (timing, tokens if available)\n- Implement voting/rating per response\n- Add side-by-side diff view\n- Create comparison export\n\n**Phase 4: UX Refinements (Polish)**\n- Improve fullscreen/focus view\n- Add keyboard shortcuts\n- Implement comparison history\n- Export/save full session with artifacts\n\n### New Components Needed\n\n- ModelSelector.tsx - dropdown with model registry\n- ModelInvoker.tsx - CLI execution\n- MetricsDisplay.tsx - show timing, tokens, etc.\n- DiffViewer.tsx - side-by-side comparison\n- WorkspacePicker.tsx - project folder selection\n\n### Estimated Complexity\n\n- Phase 1: 2-3 days\n- Phase 2: 3-4 days\n- Phase 3: 2-3 days\n- Phase 4: 1-2 days\n- Total: ~1.5-2 weeks\n\n### Next Steps\n\n1. Break down into granular sub-issues\n2. Start with Phase 1 (model registry import)\n3. Iterate on UI mockup\n4. Implement batch sending core\n5. Add comparison/metrics layer","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:22:15.417558111-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:48:14.206130855-05:00","closed_at":"2026-01-28T22:48:14.206130855-05:00","close_reason":"Done: Exploration complete. Created 4 phase sub-tasks (2zr0, k2xi, rku5, blxp)","labels":["ai","design","prompts-playground","ready"]}
{"id":"personal-homepage-c39","title":"Epic: Music Player Full Audit \u0026 Bug Fixes","description":"## Overview\nFull audit of the Music Player section and Persistent Music Drawer to identify and fix all issues.\n\n## Known Issues\n1. **JSON Parse Error** - `removeTracks` in lib/spotify.ts:474 fails with 'Unexpected end of JSON input' when toggling like\n2. **Device Selector Not Loading** - Playback devices don't appear on initial load, requires manual refresh\n3. **Dual Device Selectors Out of Sync** - Two places to select playback device (drawer + section?) don't match\n4. **Spotify SDK Error** - 'Cannot perform operation; no list was loaded' when controlling playback\n\n## Audit Scope\n- lib/spotify.ts - All API functions, error handling, response parsing\n- hooks/useSpotifyPlayer.ts - SDK initialization, device management, state sync\n- components/PersistentMusicDrawer.tsx - Controls, device selector, like toggle\n- app/sections/music-player.tsx - Main section, device selector, state management\n- components/MusicPlayerProvider.tsx - Global state, context sharing\n- components/SpotifyPlayer.tsx - SDK player component\n\n## Approach\nUse parallel subagents to audit different areas simultaneously, then consolidate findings into actionable subtasks.\n\n## Acceptance\n- All console errors resolved\n- Device selector loads on startup\n- Single source of truth for device selection\n- Like/unlike works without errors\n- Playback controls work reliably","notes":"prepared.skills: frontend:frontend-development, backend:backend-development\nprepared.files: lib/spotify.ts, hooks/useSpotifyPlayer.ts, hooks/useSpotifyAuth.ts, components/PersistentMusicDrawer.tsx, components/SpotifyPlayer.tsx, app/sections/music-player.tsx, components/MusicPlayerProvider.tsx\nprepared.prompt: |\n  ## Epic: Music Player Full Audit \u0026 Bug Fixes\n  \n  ### Scope\n  Full audit of Music Player - this is an EPIC requiring breakdown into subtasks.\n  \n  ### Key Files\n  - lib/spotify.ts (API functions, error handling)\n  - hooks/useSpotifyPlayer.ts (SDK, device management)  \n  - components/PersistentMusicDrawer.tsx (controls)\n  - app/sections/music-player.tsx (main section)\n  \n  ### Known Issues\n  1. JSON Parse Error in removeTracks (line 474)\n  2. Device Selector not loading initially\n  3. Dual Device Selectors out of sync\n  4. Spotify SDK 'no list was loaded' error\n  \n  ### Approach\n  Break into subtasks, use parallel subagents to audit each area.\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-c39","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T14:43:06.304204609-05:00","created_by":"marci","updated_at":"2026-01-21T00:02:00.748374426-05:00","closed_at":"2026-01-21T00:02:00.748374426-05:00","close_reason":"All 4 bugs fixed and merged: 1ca (JSON parse), 1kd (device selector loading), 5t2 (dual selectors), 1vt (SDK no list). Codex reviews passed.","dependencies":[{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-mqw","type":"blocks","created_at":"2026-01-09T14:43:25.708547131-05:00","created_by":"marci"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-4ys","type":"blocks","created_at":"2026-01-09T14:43:25.820409039-05:00","created_by":"marci"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-v5x","type":"blocks","created_at":"2026-01-09T14:43:25.934586107-05:00","created_by":"marci"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-1nv","type":"blocks","created_at":"2026-01-09T14:43:26.046478725-05:00","created_by":"marci"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-b7p","type":"blocks","created_at":"2026-01-09T14:43:53.219198078-05:00","created_by":"marci"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-bm4","type":"blocks","created_at":"2026-01-10T18:52:01.407799272-05:00","created_by":"marci"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-6t7","type":"blocks","created_at":"2026-01-10T18:52:02.274571071-05:00","created_by":"marci"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-1ca","type":"blocks","created_at":"2026-01-20T23:35:53.352196088-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-1kd","type":"blocks","created_at":"2026-01-20T23:35:53.611712133-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-5t2","type":"blocks","created_at":"2026-01-20T23:35:53.865039948-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-c39","depends_on_id":"personal-homepage-1vt","type":"blocks","created_at":"2026-01-20T23:35:54.119495279-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-c4zr","title":"AI Workspace: Persist project path selection","description":"Selected project/working directory is stored in component state only, not persisted to localStorage.\n\n**Impact:** User loses their working directory selection on page reload.\n\n**Fix:** Save selected project path to localStorage alongside other conversation settings.\n\n**Files:** app/sections/ai-workspace.tsx, hooks/useAIChat.ts","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:50.444634168-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:00:50.444634168-05:00"}
{"id":"personal-homepage-c6p","title":"Photo Gallery: Remove placeholders and implement favorites","description":"The Photo Gallery section has issues:\n1. No way to remove placeholder/demo photos\n2. Heart icon (favorites) appears on some photos but clicking does nothing\n\nNeed to either wire up real functionality or clean up the mock UI.","notes":"prepared.skills: frontend:frontend-development, frontend:ui-styling\nprepared.files: app/sections/photo-gallery.tsx\nprepared.prompt: |\n  ## Task: Photo Gallery - Remove placeholders and implement favorites\n  \n  ### Context\n  Remove placeholder images and add favorites functionality to the photo gallery.\n  \n  ### Key Files\n  - app/sections/photo-gallery.tsx (main gallery section)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /frontend:ui-styling for UI components\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-c6p\nconductor_session: ctt-conductor-f9352ca0\nworker_session: ctt-worker-personal-home-1655ba3e\nstarted_at: 2026-01-11T02:10:04-05:00","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T16:36:04.287434568-05:00","updated_at":"2026-01-11T02:17:41.010861599-05:00","closed_at":"2026-01-11T02:17:41.010861599-05:00","close_reason":"Removed placeholder images (mockAlbums/mockPhotos) and implemented persistent favorites with localStorage","labels":["photo-gallery","ui"]}
{"id":"personal-homepage-c8kd","title":"AI Workspace: Fix agent directory path resolution","description":"In lib/ai/claude.ts lines 270-280, agent mode 'user' directory resolution is incorrect.\n\n**Bug:** When `settings.agentDir` is relative, `join(process.cwd(), settings.agentDir)` resolves to Next.js server directory, not user's project directory.\n\n**Impact:** Agent can't find CLAUDE.md in wrong directory when using 'user' agent mode.\n\n**Files:** lib/ai/claude.ts","notes":"## Retro\n- What worked: The fix was straightforward - improved path resolution to handle different path formats correctly\n- What was unclear: Initially the exact use case for user mode vs dev mode paths, but the code comments helped clarify","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:48.820526789-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:17:42.481362196-05:00"}
{"id":"personal-homepage-c9y","title":"File tree: read aloud feature throws errors, spaces being removed","description":"The file tree has an option to read files out loud, but it is throwing errors. Spaces appear to be getting removed from the text which breaks the TTS functionality.","notes":"## Retro\nStraightforward regex fix. The issue was clearly identified in the prompt - changed /\\\\n+/g to /\\\\n{3,}/g to preserve single/double newlines while collapsing excessive ones.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T20:41:02.580709603-05:00","updated_at":"2026-01-21T20:55:15.919046659-05:00","closed_at":"2026-01-21T20:55:15.919046659-05:00","close_reason":"Fixed newline stripping in streaming response","labels":["file-tree","tts"]}
{"id":"personal-homepage-cam","title":"Music: Device switch fails with 'no list was loaded'","description":"## Bug\nWhen switching playback device to PC, controls stop working.\n\n### Error\n```\nPlayback error: Cannot perform operation; no list was loaded.\n```\n\n### Reproduction\n1. Start playback on another device (phone)\n2. Switch to PC device in device selector\n3. Try to use play/pause controls\n4. Controls don't work, error appears\n\n### Root Cause (suspected)\nSpotify SDK requires a context (playlist/album) to be loaded before playback controls work. When transferring playback, the context may not transfer.\n\n### Fix Ideas\n- After device transfer, re-fetch playback state\n- If no context, load last played context\n- Or show user-friendly message to select something to play","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-09T15:15:47.091991365-05:00","created_by":"marci","updated_at":"2026-01-10T19:07:20.661681685-05:00","closed_at":"2026-01-10T19:07:20.661681685-05:00","close_reason":"Fixed device switch context loss by capturing and restoring playback context after transfer","dependencies":[{"issue_id":"personal-homepage-cam","depends_on_id":"personal-homepage-1nv","type":"blocks","created_at":"2026-01-09T15:15:59.636704386-05:00","created_by":"marci"}]}
{"id":"personal-homepage-cdi","title":"Consolidate Settings, Setup, and Integrations into tabbed Settings page","description":"The Settings, Setup Wizard, and Integrations sections are related configuration pages that should be consolidated into a single Settings page with tabs.\n\nCurrent structure:\n- **Settings** - Theme, sections visibility/order, API keys\n- **Setup** - API keys wizard, TabzChrome config\n- **Integrations** - Connected services status\n\nProposed tabbed structure:\n- **General** - Theme, appearance settings\n- **Sections** - Visibility and ordering\n- **API Keys** - All API key configuration (merge from Settings + Setup)\n- **Integrations** - Connected services status\n- **Setup Wizard** - Guided first-time setup (or make this a modal/overlay instead of tab)\n\nImplementation:\n1. Create tabbed layout in Settings section\n2. Move Setup wizard content into appropriate tabs (or keep as overlay)\n3. Move Integrations content into its own tab\n4. Remove Setup and Integrations from sidebar navigation\n5. Update any deep links to point to new tab structure","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T10:03:13.172917256-05:00","created_by":"matt","updated_at":"2026-01-05T10:18:04.321464537-05:00","closed_at":"2026-01-05T10:18:04.321464537-05:00","close_reason":"Implemented: Consolidated Settings, Setup, and Integrations into single tabbed Settings page"}
{"id":"personal-homepage-ce7","title":"[Kanban Migration] Copy Zustand store definitions and TypeScript types","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T23:10:24.904903427-05:00","created_by":"matt","updated_at":"2026-01-04T23:30:51.87827837-05:00","closed_at":"2026-01-04T23:30:51.87827837-05:00","close_reason":"Implemented: Migrated Zustand stores, TypeScript types, and hooks from ai-kanban-board to app/components/kanban/"}
{"id":"personal-homepage-ch8","title":"[Kanban Migration] Migrate task modal and chat components","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:10:27.103658149-05:00","created_by":"matt","updated_at":"2026-01-05T09:14:48.367674735-05:00","closed_at":"2026-01-05T09:14:48.367674735-05:00","close_reason":"Implemented: Migrated TaskModal and chat components from ai-kanban-board with Details/Chat tabs and wired to KanbanBoard","dependencies":[{"issue_id":"personal-homepage-ch8","depends_on_id":"personal-homepage-9y5","type":"blocks","created_at":"2026-01-04T23:10:57.272141359-05:00","created_by":"matt"}]}
{"id":"personal-homepage-cp7","title":"Fix Kanban Ready column: create /api/beads/ready endpoint and wire it up","description":"The Kanban Ready column uses a broken heuristic (checks description length). Fix by:\n\n1. Create /api/beads/ready endpoint that wraps bd ready --json\n2. Update useBeadsBan.ts to call this endpoint instead of using the heuristic\n\n## Part 1: Create endpoint\nGET /api/beads/ready?workspace=PATH\nResponse: { ready: BeadsIssue[] }\n\nFile: app/api/beads/ready/route.ts\n\n## Part 2: Update hook\nFile: app/components/kanban/hooks/useBeadsBan.ts\n\n- Add fetchReady() function to call the new endpoint\n- Update getColumnForIssue() to accept readyIssueIds Set\n- Update refresh() to fetch ready issues and pass to column logic\n\nSee notes for full implementation details.","notes":"## prepared.prompt\n\n# Fix Kanban Ready Column Sync\n\n## Objective\nThe Kanban Ready column currently uses a broken heuristic (checks if description exists). Fix by creating a proper /api/beads/ready endpoint and wiring it up in useBeadsBan.ts.\n\n## Part 1: Create /api/beads/ready endpoint\n\n**File to create:** app/api/beads/ready/route.ts\n\n### Implementation\n1. Copy validateWorkspace() from app/api/beads/issues/[id]/route.ts\n2. GET handler that:\n   - Accepts optional workspace query param\n   - Runs execFileSync(\"bd\", [\"ready\", \"--json\", \"--limit\", \"50\"], { cwd, timeout: 10000 })\n   - Transforms snake_case to camelCase (reuse transformIssue pattern)\n   - Returns { ready: TransformedIssue[] }\n3. Set export const dynamic = \"force-dynamic\"\n\n## Part 2: Update useBeadsBan.ts\n\n**File to modify:** app/components/kanban/hooks/useBeadsBan.ts\n\n### Changes needed:\n\n1. Add fetchReady() function (around line 117) that calls /api/beads/ready and returns array of ready issue IDs\n\n2. Update getColumnForIssue() signature (lines 206-230) to accept readyIssueIds: Set\u003cstring\u003e parameter. Replace the description-length heuristic with readyIssueIds.has(issue.id)\n\n3. Update refresh() callback (around line 293):\n   - Fetch ready IDs alongside issues\n   - Create Set from the array\n   - Pass Set to all getColumnForIssue() calls\n\n## Acceptance Criteria\n\n- [ ] GET /api/beads/ready endpoint created and working\n- [ ] Endpoint accepts optional workspace query param\n- [ ] useBeadsBan.ts calls the new endpoint in refresh()\n- [ ] Ready column shows only issues from bd ready output\n- [ ] Backlog shows open issues NOT in ready list\n- [ ] Other columns unchanged\n- [ ] TypeScript compiles\n- [ ] Manual test: Kanban Ready column matches bd ready --json output","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T02:06:40.968690385-05:00","updated_at":"2026-01-23T02:43:48.305348352-05:00","closed_at":"2026-01-23T02:43:48.305348352-05:00","close_reason":"Not needed - using ready label instead of API endpoint for column assignment","labels":["api","beads","kanban","ready","wave-1"]}
{"id":"personal-homepage-cuk","title":"Agent Cards: Extract chat engine from ai-workspace.tsx","description":"Refactor the 2300+ line ai-workspace.tsx. Extract core chat logic into hooks/useAIChat.ts and reusable components. Keep AI Workspace working but modular.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:24:50.508060148-05:00","created_by":"marci","updated_at":"2026-01-09T01:31:32.080148629-05:00","closed_at":"2026-01-09T01:31:32.080148629-05:00","close_reason":"Extracted chat engine to reusable hooks/components. Created useAIChat hook, ChatMessage and ChatInput components. AI Workspace refactored to use them."}
{"id":"personal-homepage-cybi","title":"Use current agent icon instead of star in chat header","description":"In AI Workspace and the right sidebar chat, there's a circle at the top with a star icon. Replace it with the current agent's icon/avatar.\n\n## Current\n- Star icon (generic)\n\n## Expected  \n- Show current agent's icon/emoji\n- Falls back to star if no agent selected\n\n## Files\n- app/sections/ai-workspace.tsx - main workspace\n- components/ai/AIDrawer.tsx - sidebar drawer\n- Look for the star icon rendering","notes":"## prepared.prompt\n\n**Task:** Replace star icon with current agent's icon in chat header.\n\n**Context:** The AI Workspace and sidebar chat show a star icon at the top. Should show the current agent's icon/avatar instead.\n\n**Files to check:**\n\n1. `/home/marci/projects/personal-homepage/app/sections/ai-workspace.tsx`\n   - Look for star icon (Star, StarIcon, or similar)\n   - Replace with agent.icon or agent.avatar\n\n2. `/home/marci/projects/personal-homepage/components/ai/AIDrawer.tsx`\n   - Same - find star icon in header area\n   - Use selected agent's icon\n\n**Implementation:**\n- Get current agent from context/state\n- Render agent.icon (emoji) or agent.avatar (image URL)\n- Fall back to star if no agent selected\n\n**Acceptance criteria:**\n- [ ] Chat header shows current agent's icon\n- [ ] Falls back gracefully if no agent\n- [ ] Works in both AI Workspace and sidebar drawer\n\nWhen done, run `bd close personal-homepage-cybi`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T20:36:04.807735497-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T20:44:26.420372347-05:00","closed_at":"2026-01-28T20:44:26.420372347-05:00","close_reason":"Done: Chat headers now show current agent icon (avatar/emoji) instead of static Bot icon. Works in AI Workspace and AIDrawer minimized state. Falls back to Bot icon when no agent selected.","labels":["quick-fix","ready","ui"]}
{"id":"personal-homepage-czcy","title":"Tests: AI components (AIDrawer, AgentGallery, AgentCard)","description":"Add vitest + react-testing-library tests for AI components.\n\n## Components to test\n- components/ai/AIDrawer.tsx\n- components/ai/AIDrawerProvider.tsx\n- components/agents/AgentGallery.tsx\n- components/agents/AgentCard.tsx\n- components/agents/FloatingAgentButton.tsx\n\n## Test coverage\n- Render without crash\n- Props handling\n- User interactions\n- Context integration","notes":"## prepared.prompt\n\n**Task:** Write component tests for AI components.\n\n**Files to test:**\n- `components/ai/AIDrawer.tsx`\n- `components/ai/AIDrawerProvider.tsx`\n- `components/agents/AgentGallery.tsx`\n- `components/agents/AgentCard.tsx`\n\n**Output:** `__tests__/components/ai/*.test.tsx`\n\nUse @testing-library/react, mock contexts as needed.\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:15:54.882747733-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:41:38.602827996-05:00","closed_at":"2026-01-28T22:41:38.602827996-05:00","close_reason":"Done: Created comprehensive component tests for AI components. Added 4 test files: AIDrawerProvider.test.tsx (23 tests), AIDrawer.test.tsx (18 tests), AgentGallery.test.tsx (30 tests), AgentCard.test.tsx (41 tests). Total 112 tests covering state management, user interactions, rendering, accessibility, and edge cases. Also installed @testing-library/user-event and @testing-library/jest-dom, and updated test setup with ResizeObserver mock.","labels":["components","ready","tests"]}
{"id":"personal-homepage-d1t","title":"Fix Spotify SDK \"no list was loaded\" error","description":"## Bug\nSpotify SDK throws \"Cannot perform operation; no list was loaded\" when controlling playback.\n\n## Investigation\n- Check if playlist/album context is required\n- May need to set playback context before controls work\n- Check SDK initialization sequence\n\n## Files\n- hooks/useSpotifyPlayer.ts (SDK initialization)\n- components/SpotifyPlayer.tsx (SDK player)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T23:34:48.057497494-05:00","updated_at":"2026-01-20T23:36:27.706217507-05:00","closed_at":"2026-01-20T23:36:27.706217507-05:00","close_reason":"Duplicate of 1vt - orphaned from failed creation","labels":["music-player","spotify"]}
{"id":"personal-homepage-d8g","title":"codex-review: 1vt (SDK no list error)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-20T23:36:58.056324154-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:04:01.258857726-05:00","closed_at":"2026-01-21T00:04:01.258857726-05:00","close_reason":"APPROVED: hasContext state correctly tracks SDK playback context via state.context.uri. Control functions guard with isActive \u0026\u0026 hasContext before SDK calls, gracefully falling back to REST API. Clean implementation, no breaking changes.","labels":["codex-review","gate"],"dependencies":[{"issue_id":"personal-homepage-d8g","depends_on_id":"personal-homepage-1vt","type":"blocks","created_at":"2026-01-20T23:37:11.448792811-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-d8mk","title":"Session summary: AI Workspace cleanup and fixes","description":"Summary of AI Workspace improvements completed in this session:\n\n## Completed Work\n\n### 1. Removed unused AI API keys from Settings\n- Removed Anthropic, OpenAI, Google AI API key inputs (not used - AI Workspace uses CLI backends)\n- Kept legitimate API keys: Finnhub, Alpha Vantage, Spotify, YouTube\n- Updated docs/sections/ai-workspace.md to reflect CLI-only architecture\n\n### 2. Fixed corrupted conversation data (bd-umya)\n- Added migration in loadConversations() to strip __CLAUDE_EVENT__ markers from old messages\n- Fixes: duplicated text, inflated context %, spacing issues\n\n### 3. Implemented agent workingDir with global fallback (bd-yb0g)\n- Added workingDir field to AgentCard type\n- Fallback chain: agent.workingDir → defaultWorkingDir (global) → selectedProjectPath\n- Updated UI to show effective working dir with source tooltip\n- Files: lib/agents/types.ts, app/sections/ai-workspace.tsx\n\n### 4. Fixed hydration mismatch in AIDrawerProvider\n- Changed hasActiveConversation to initialize as false (stable for SSR)\n- useEffect updates it based on actual chat state after mount\n\n### 5. Simplified chat area UX - removed embedded AgentGallery\n- Removed redundant AgentGallery from chat area (header modal is sufficient)\n- Unified empty state: shows agent info (if selected) or generic Start a conversation\n- Always shows suggested prompts\n- Cleaner, less confusing UX\n\n## Related Issues Closed\n- personal-homepage-umya: Fix AI Workspace chat issues\n- personal-homepage-yb0g: Agent working directory with global fallback","status":"closed","priority":2,"issue_type":"chore","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T14:26:32.551146569-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T14:26:43.486297094-05:00","closed_at":"2026-01-28T14:26:43.486297094-05:00","close_reason":"Session complete - all items documented","labels":["ai-workspace","cleanup","ux"]}
{"id":"personal-homepage-d9r","title":"Add transcript viewer to closed issues in kanban board","description":"When viewing a closed issue in the kanban board, show a link to view the worker session transcript if one exists.\n\n## Context\nTabzChrome conductor now captures worker session transcripts to .beads/transcripts/\u003cissue-id\u003e.txt before killing sessions. These transcripts include:\n- Full session output (commands, responses)\n- **Usage stats**: Cost, tokens in/out, tool calls, skill invocations\n\nThese are valuable for:\n- Understanding how the issue was resolved\n- Analyzing worker behavior patterns\n- **Tracking cost per issue**\n- Finding missed follow-ups\n- Improving prompts and workflows\n\n## Implementation\n1. Check if transcript exists for closed issue (path in issue notes or .beads/transcripts/\u003cid\u003e.txt)\n2. Add 'View Transcript' button/link to closed issue card or detail view\n3. Display transcript in a modal or dedicated view (syntax highlighting for code blocks)\n4. **Show usage stats prominently** (cost, tokens, tool calls from issue notes)\n5. Optional: Add basic transcript analysis (skill usage, errors, TODOs mentioned)\n\n## Issue Notes Fields (from capture-session.sh)\n```\ntranscript: .beads/transcripts/ISSUE-ID.txt\ncost: $X.XX\ntokens_in: XXXX\ntokens_out: XXXX\ntool_calls: XX\nskill_invocations: X\n```\n\n## Files\n- Check existing issue detail/card components\n- May need API endpoint to serve transcript content\n\n## Related\n- TabzChrome: plugins/conductor/scripts/capture-session.sh\n- TabzChrome: plugins/conductor/commands/analyze-transcripts.md","notes":"\ncompleted_at: 2026-01-10T19:30:47-05:00\ncommit: dbc935f","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T13:31:09.634324065-05:00","created_by":"marci","updated_at":"2026-01-10T19:30:59.372023713-05:00","closed_at":"2026-01-10T19:30:59.372023713-05:00","close_reason":"feat(kanban): add transcript viewer for closed beads issues"}
{"id":"personal-homepage-dah8","title":"Phase 1: Consolidate AI types into lib/ai/types.ts","description":"Merge scattered type definitions into a single source of truth.\n\n## Current State\n- `lib/ai/types.ts` - Basic types (ChatMessage, ChatSettings)\n- `lib/ai-workspace.ts` - Duplicate types with different shapes\n- `lib/agents/types.ts` - Agent-specific types\n\n## Changes\n\n### lib/ai/types.ts (consolidate here)\nAdd backend-specific settings from CLI research:\n- `ClaudeSettings` - 45+ flags (permissionMode, allowedTools, mcpConfig, etc.)\n- `CodexSettings` - 15+ flags (sandbox, approvalPolicy, profile, etc.)\n- `GeminiSettings` - 20+ flags (approvalMode, extensions, etc.)\n- `CommonChatSettings` - Shared across backends\n- Unified `ChatSettings` with backend-specific sections\n\n### lib/ai-workspace.ts\n- Remove type definitions (keep only UI utilities)\n- Update imports to use lib/ai/types.ts\n\n### Files to Update\n- lib/ai/types.ts (add new types)\n- lib/ai-workspace.ts (remove types, update imports)\n- All files importing from lib/ai-workspace.ts\n\n## Reference\nSee CLI research notes in personal-homepage-4yqz for full type definitions.","notes":"## Retro\n\n- What worked: Clear task definition with specific files to modify. The re-export pattern from lib/ai-workspace.ts to lib/ai/types.ts maintains backward compatibility so existing imports continue to work.\n\n- What was unclear: The kanban types file needed special handling - it has local variants of some types for its specific use case (e.g., StreamChunk with usage field). Decision was to let it define its own local types while re-exporting shared ones from the central location.\n\n- Key decision: Keep lib/agents/types.ts separate since it is a distinct domain (agent card definitions with Zod schemas) not related to chat/backend types.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T15:39:23.081574019-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T16:25:52.979809719-05:00","closed_at":"2026-01-28T16:25:52.979809719-05:00","close_reason":"Done: Consolidated all AI types into lib/ai/types.ts as single source of truth. lib/ai-workspace.ts now only re-exports types (no definitions). Build passes, typecheck passes. Added comprehensive backend-specific settings (ClaudeSettings, CodexSettings, GeminiSettings, DockerSettings) with all CLI flags documented as interface properties.","labels":["ready"]}
{"id":"personal-homepage-dds","title":"Wire up Photo Gallery section","description":"Photo Gallery component has been copied to app/sections/photo-gallery.tsx.\n\nWire-up tasks:\n1. Remove the full-page layout wrapper (min-h-screen, etc.)\n2. Convert default export to named section component pattern\n3. Add 'photo-gallery' to Section type in app/page.tsx\n4. Add to navigationItems array with Image icon\n5. Add to CATEGORIES under Entertainment\n6. Add case to renderContent() switch\n7. Add dynamic import for lazy loading\n8. Add TabzChrome data-tabz-* attributes to key elements\n9. Default to hidden in Settings visibility\n10. Test all themes and responsive layout\n\nThe component is fully functional - just needs integration with the homepage shell.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T10:34:38.516633811-05:00","created_by":"matt","updated_at":"2026-01-05T10:54:38.793307559-05:00","closed_at":"2026-01-05T10:54:38.793307559-05:00","close_reason":"Implemented: Wire up Photo Gallery section with navigation, TabzChrome attributes, and section pattern"}
{"id":"personal-homepage-ddw","title":"Music Player: pyradio integration for internet radio","description":"Replace or supplement SynthWave placeholder with pyradio integration for streaming internet radio stations. Investigate pyradio's download capabilities for recording streams.","design":"## Features\n1. Third mode in Music Player: SynthWave → Spotify → Radio\n2. Stream internet radio stations via pyradio backend\n3. Station browser/search\n4. Favorites list\n5. Recording/download streams (investigate pyradio flags)\n\n## Implementation Options\n\n### Option A: pyradio as subprocess\n- API route spawns pyradio process\n- Parse output for now playing info\n- Control via stdin commands\n- Pipe audio to browser somehow (tricky)\n\n### Option B: Direct stream URLs\n- Use pyradio's station database/playlists\n- Play streams directly in browser via HTML5 audio\n- No pyradio process needed, just the station list\n- Simpler, more reliable\n\n### Option C: Hybrid\n- Use pyradio for station discovery/management\n- Stream playback in browser\n- Use pyradio CLI for recording/downloads\n\n## Research needed\n- pyradio download folder location and CLI flags\n- pyradio station list format (.csv)\n- Recording capabilities: `pyradio --record` or similar\n- Default stations location: ~/.config/pyradio/stations.csv","acceptance_criteria":"- Can browse/search internet radio stations\n- Stream stations in browser\n- Save favorite stations\n- Show now playing info if available\n- Optionally record/download streams","notes":"prepared.skills: frontend:frontend-development, backend:backend-development\nprepared.files: app/sections/music-player.tsx, lib/spotify.ts\nprepared.prompt: |\n  ## Feature: Music Player - pyradio integration for internet radio\n  \n  ### Context\n  Add pyradio integration for streaming internet radio stations.\n  \n  ### Key Files\n  - app/sections/music-player.tsx (music player section)\n  - lib/spotify.ts (may need similar API patterns)\n  \n  ### Skills\n  Use /frontend:frontend-development for React UI\n  Use /backend:backend-development for pyradio integration\n  \n  ### Approach\n  Research pyradio API/CLI, design integration approach.\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-ddw","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T15:28:40.410000248-05:00","updated_at":"2026-01-11T03:30:29.486878596-05:00","closed_at":"2026-01-11T03:30:29.486878596-05:00","close_reason":"Implemented My Stations section for pyradio integration. Build passed.","labels":["music-player","pyradio","radio","streaming"]}
{"id":"personal-homepage-dtv","title":"AIDrawer: Wire backends and verify all flows work","description":"Connect the drawer to all chat backends and verify everything works:\n\n**Backends to test:**\n1. TabzChrome WebSocket → headless Claude\n2. Docker Desktop → local LLMs (verify temperature/config works)\n3. OpenRouter/direct API (verify API key flow)\n\n**Flows to verify:**\n- New conversation\n- Continue existing conversation\n- Streaming responses\n- Tool use display\n- Code block rendering\n- Navigate between sections while streaming (must not interrupt)\n- Conversation persistence (JSONL)\n- Settings/model selection\n\n**Migration:**\n- Existing conversations from ai-workspace should appear in drawer\n- Consider what happens to AI Workspace section (deprecate or keep as 'full mode')","notes":"## Implementation Summary\n\nWired up AIDrawer to all chat backends by:\n\n1. **Enhanced AIDrawerProvider** (`components/ai/AIDrawerProvider.tsx`):\n   - Now extends UseAIChatReturn interface\n   - Calls useAIChat() internally to get all chat functionality\n   - Adds drawer-specific state: inputValue, selectedProjectPath\n   - Persists project path to localStorage\n   - Provides openWithMessage() for quick message sending\n\n2. **Updated AIDrawer** (`components/ai/AIDrawer.tsx`):\n   - Full chat message rendering with ChatMessage component\n   - ChatInput with streaming support and stop button\n   - Model selection dropdown (all backends available)\n   - Project context selection from local/GitHub projects\n   - Conversation list panel (collapsible)\n   - Settings panel (collapsible)\n   - Generating indicator when streaming\n   - Quick action buttons for empty state\n\n3. **Fixed SSR issue** in useAIChat:\n   - Added defaultConv fallback when conversations array is empty during SSR\n   - Prevents \"cannot read messages of undefined\" error\n\n## Backends Verified\nAll backends are wired through the existing /api/ai/chat endpoint:\n- TabzChrome WebSocket (via claude backend)\n- Docker local LLMs\n- OpenRouter/API\n- Mock fallback\n\n## Migration Decision: Keep AI Workspace Section\n**Option B chosen**: Keep AI Workspace as \"full mode\"\n\n**Rationale**:\n- AI Workspace provides advanced features: full sidebar, agent gallery, detailed settings, context usage warnings, session IDs, TabzChrome integration\n- AIDrawer is lightweight quick-access for common chat needs\n- Both share same conversation storage via useAIChat hook\n- Users can use drawer for quick tasks, switch to AI Workspace for complex sessions\n\n## Retro\n- What was unclear: Two separate AIDrawerProvider files existed with different APIs\n- Missing context: Had to understand which provider was actually being used in layout.tsx\n- Discovered work: None - scope was well-defined\n- What would help: Consolidating the providers earlier would have saved confusion","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T23:41:18.42781541-05:00","updated_at":"2026-01-23T00:12:48.089308519-05:00","closed_at":"2026-01-23T00:12:48.089308519-05:00","close_reason":"Done: Wired AIDrawer to all chat backends (TabzChrome WS, Docker LLMs, OpenRouter/API). Full chat UI with messages, streaming, model selection, project context. Migration decision: Keep AI Workspace as full-featured mode.","labels":["ai-drawer","testing","wave-3"],"dependencies":[{"issue_id":"personal-homepage-dtv","depends_on_id":"personal-homepage-9y2","type":"blocks","created_at":"2026-01-22T23:41:18.430236486-05:00","created_by":"daemon"},{"issue_id":"personal-homepage-dtv","depends_on_id":"personal-homepage-abv","type":"blocks","created_at":"2026-01-22T23:41:18.431756703-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-e3bz","title":"Phase 2: useAgents hook for saved launch configs","description":"Create a shared `useAgents()` hook that loads saved agent configurations (launch commands) for use across all AI locations.\n\n## Core Concept\n\nAn \"agent\" is just a saved launch command:\n\n```typescript\ninterface SavedAgent {\n  id: string\n  name: string\n  avatar?: string\n  backend: 'claude' | 'codex' | 'gemini' | 'copilot'\n  workingDir?: string  // Optional override of global working dir\n  spawnCommand: string[]  // CLI args (everything except the prompt)\n}\n```\n\nExample:\n```typescript\n{\n  id: \"code-review\",\n  name: \"Code Review Agent\",\n  backend: \"claude\",\n  workingDir: null,  // Use global\n  spawnCommand: [\n    \"--model\", \"opus\",\n    \"--permission-mode\", \"acceptEdits\",\n    \"--add-dir\", \"/home/user/shared-context\",\n    \"--append-system-prompt\", \"Focus on code quality\"\n  ]\n}\n```\n\nWhen sending a message, the backend just appends the prompt:\n```\nclaude -p \"user message here\" --model opus --permission-mode acceptEdits ...\n```\n\n## Hook API\n\n```typescript\nfunction useAgents() {\n  return {\n    agents: SavedAgent[],\n    isLoading: boolean,\n    getById: (id: string) =\u003e SavedAgent | undefined,\n    getForSection: (section: string) =\u003e SavedAgent[]  // agents recommended for a section\n  }\n}\n```\n\n## Files\n\n1. **Create** `hooks/useAgents.ts` - The hook\n2. **Create** `lib/ai/utils.ts` - Shared utilities (isAvatarUrl, isEmoji from duplicated code)\n3. **Update** consumers to use the hook instead of duplicated fetch logic\n\n## Also extract useProjects\n\nWhile here, also extract the duplicated project fetching into `hooks/useProjects.ts`.","notes":"## Recent Progress (2026-01-28)\n\n### Implemented: Hook Isolation for Page Assistants\n\nCreated agents/.claude/settings.json with empty hooks to disable global beads hooks.\n\nTwo-tier agent model:\n- Page assistants (mode: user): Run from agents/music-dj/, hooks disabled, clean conversations\n- Dev agents (mode: dev): Run from project root, hooks enabled, full beads context\n\n### Files Updated\n\n1. agents/.claude/settings.json - Disables hooks\n2. lib/ai/types.ts - Added agentDir to ChatSettings\n3. lib/ai/claude.ts - Uses agentDir as cwd when agentMode is user\n4. lib/agents/loader.ts - Sets workingDir when loading agents\n5. app/sections/ai-workspace.tsx - Passes agentDir to settings\n6. hooks/useAIChat.ts - Passes agentDir through to API\n\n### Remaining Work\n\n1. Extract useAgents() hook from duplicated code\n2. Extract useProjects() hook from duplicated project fetching\n3. Create lib/ai/utils.ts with shared utilities\n4. Update all consumers to use new hooks","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T15:39:36.183344072-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T18:08:08.383962566-05:00","closed_at":"2026-01-28T18:08:08.383962566-05:00","close_reason":"Created useAgents, useProjects hooks and lib/ai/utils.ts. Updated ai-workspace.tsx, AIDrawer.tsx, and AIDrawerProvider.tsx to use shared hooks.","labels":["ready"],"dependencies":[{"issue_id":"personal-homepage-e3bz","depends_on_id":"personal-homepage-dah8","type":"blocks","created_at":"2026-01-28T15:40:17.225546788-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-e4dr","title":"Tests: Kanban components and hooks","description":"Add tests for kanban board components.\n\n## Files to test\n- app/components/kanban/KanbanBoard.tsx\n- app/components/kanban/task/*.tsx\n- app/components/kanban/hooks/*.ts\n- app/components/kanban/lib/store.ts\n\n## Test coverage\n- Board rendering\n- Task CRUD\n- Drag and drop state\n- Store operations","notes":"## prepared.prompt\n\n**Task:** Write tests for kanban board.\n\n**Files to test:**\n- `app/components/kanban/` directory\n\n**Output:** `__tests__/components/kanban/*.test.tsx`\n\nFocus on store logic and component rendering. Mock drag-drop if complex.\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:15:59.010169283-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:40:05.403226967-05:00","closed_at":"2026-01-28T22:40:05.403226967-05:00","close_reason":"Done: Added 130 comprehensive tests for kanban board components covering store logic (useBoardStore, useAgentProfileStore), types/constants validation, and component rendering (KanbanCard, KanbanColumn, PriorityBadge) with mocked drag-and-drop dependencies","labels":["kanban","ready","tests"]}
{"id":"personal-homepage-ehl","title":"Add global working directory selector to sidebar","description":"Add a working directory dropdown to the left sidebar that:\n\n1. Sets a root directory scope (e.g. ~/projects or ~/projects/TabzChrome)\n2. Affects pages that scan/list files:\n   - Projects: Only scan subdirectories of the working dir\n   - Bookmarks: Filter terminal commands to those under working dir\n   - Kanban: Default workspace for beads (already has per-page selector)\n3. Persists selection to localStorage\n4. Shows recent directories like the kanban workspace selector\n5. Reduces load times by limiting scan scope\n\nSimilar pattern to TabzChrome header working dir dropdown and the kanban workspace selector.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T09:43:11.272115076-05:00","created_by":"matt","updated_at":"2026-01-05T09:59:31.252138442-05:00","closed_at":"2026-01-05T09:59:31.252138442-05:00","close_reason":"Implemented global working directory selector in sidebar with Projects, Bookmarks, and Kanban integration"}
{"id":"personal-homepage-eis","title":"Research TabzChrome profiles page for launcher enhancements","description":"Investigate the TabzChrome profiles page UI and launching options to inform enhancements to terminal command launching in personal-homepage.\n\nAreas to research:\n1. Profile card layout and styling\n2. Quick-launch options (keyboard shortcuts, click actions)\n3. Profile categories and organization\n4. Visual indicators (colors, icons, status)\n5. Spawn options (new window, embedded, specific directory)\n\nReference: ~/projects/TabzChrome extension source\n\nOutput: Document findings and propose enhancements for:\n- Bookmarks section terminal commands\n- Potential new 'Launcher' or 'Profiles' section\n- Integration with existing terminal extension bridge","notes":"## Research Findings: TabzChrome Profiles UI\n\n### 1. Profile Card Layout \u0026 Styling\n\n**Card Structure:**\n- 3-column grid (90px min-width, responsive)\n- Dark surface (#0a0a0c) with border (#222225), 12px radius\n- **3px colored accent bar at top** (category color, 60%→100% opacity on hover)\n- 36x36px icon in elevated background\n- JetBrains Mono font (0.75rem), truncated with ellipsis\n- Keyboard shortcut badge (1-6) in top-right corner\n- Subtle lift effect on hover: `translateY(-2px)` + enhanced shadow\n\n**Key CSS:**\n```css\n.profile-card::before {\n  height: 3px;\n  background: var(--card-accent, var(--accent));\n  opacity: 0.6;\n}\n.profile-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n}\n```\n\n### 2. Quick-Launch Options\n\n**Keyboard Shortcuts:**\n- `1-9`: Spawn profile by index (top 6 displayed)\n- `Ctrl+Shift+Y`: Spawn quick popout terminal\n- `/`: Focus command bar search\n\n**Click Actions:**\n- Single click → Spawn terminal with profile settings\n- Reference link icon → Open profile's reference URL/file\n\n### 3. Profile Categories \u0026 Organization\n\n**Data Structure:**\n```typescript\ninterface Profile {\n  id: string\n  name: string              // Emoji prefix supported\n  category?: string         // Groups profiles\n  workingDir: string\n  command?: string          // Auto-run on spawn\n  color?: string\n  pinnedToNewTab?: boolean  // Show in main grid (limit 6)\n}\n\ninterface CategorySettings {\n  [name: string]: {\n    color: string           // Hex color\n    collapsed?: boolean\n    order?: number\n  }\n}\n```\n\n**Sorting Logic:**\n1. Pinned profiles first\n2. Default profile next\n3. Remaining alphabetically\n4. Top 6 displayed in grid, rest in dropdown\n\n### 4. Visual Indicators\n\n- **Accent bar**: Category color at card top\n- **Icon wrapper**: 36x36px with category-colored emoji/icon\n- **Default badge**: \"def\" indicator bottom-right\n- **Keyboard badge**: Numbers 1-6 for quick access\n- **Dropdown indicators**: Colored dots, category counts, chevron icons\n- **Focus ring**: Green outline (#00ff88) on keyboard navigation\n\n### 5. Spawn Options\n\n| Type | Description |\n|------|-------------|\n| Sidebar | Default, embedded in sidepanel |\n| Popout Window | 700x500 popup via `chrome.windows.create()` |\n| Working Directory | Profile-specific or global default |\n\n**Message Structure:**\n```typescript\ninterface SpawnTerminalMessage {\n  type: 'SPAWN_TERMINAL'\n  name: string\n  workingDir: string\n  command?: string\n  useTmux: boolean\n  pasteOnly?: boolean\n}\n```\n\n---\n\n## Proposed Enhancements for personal-homepage\n\n### A. Bookmarks Section Terminal Commands\n\n**Current State:** Terminal commands exist in bookmarks with `data-tabz-*` attributes.\n\n**Proposed Enhancements:**\n\n1. **Visual Improvements:**\n   - Add colored category accent bars (3px left border or top bar)\n   - Show keyboard shortcuts (1-9) for quick launch\n   - Icon with category-color background\n   - Hover lift effect with shadow\n\n2. **Quick Launch:**\n   - Number keys 1-9 spawn command by index\n   - `/` focuses search/filter input\n   - Click spawns in sidebar, Shift+Click popout window\n\n3. **Working Directory:**\n   - Global working directory selector dropdown\n   - Recent directories list (5-10 entries)\n   - Per-command directory override option\n\n4. **Command Cards:**\n```tsx\n// Enhanced bookmark command card\n\u003cdiv className=\"relative bg-surface border rounded-xl p-4 cursor-pointer\n               hover:-translate-y-0.5 hover:shadow-lg transition-all\"\u003e\n  {/* Category accent bar */}\n  \u003cdiv className=\"absolute top-0 left-0 right-0 h-[3px] rounded-t-xl\n                  bg-emerald-500/60 hover:bg-emerald-500\" /\u003e\n  \n  {/* Keyboard badge */}\n  \u003cspan className=\"absolute top-2 right-2 text-xs text-muted\"\u003e1\u003c/span\u003e\n  \n  {/* Icon + content */}\n  \u003cdiv className=\"flex items-center gap-3\"\u003e\n    \u003cdiv className=\"w-9 h-9 rounded-lg bg-emerald-500/20 flex items-center justify-center\"\u003e\n      \u003cTerminal className=\"w-5 h-5 text-emerald-400\" /\u003e\n    \u003c/div\u003e\n    \u003cdiv\u003e\n      \u003cdiv className=\"font-mono text-sm\"\u003e{command.name}\u003c/div\u003e\n      \u003cdiv className=\"text-xs text-muted\"\u003e{command.description}\u003c/div\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n```\n\n### B. New \"Launcher\" Section\n\n**Purpose:** Dedicated profile/command launcher with full TabzChrome feature parity.\n\n**Features:**\n\n1. **Profile Grid (Top 6):**\n   - 3-column responsive grid\n   - Pinned/favorite profiles\n   - Keyboard shortcuts 1-6\n   - Category-colored accent bars\n\n2. **Profile Dropdown:**\n   - Full searchable list\n   - Grouped by category with collapse/expand\n   - Category color indicators\n   - Profile count badges\n\n3. **Working Directory Controls:**\n   - Current directory display\n   - Recent directories dropdown\n   - Custom input option\n   - Path shortening (`~`, `…/last-two`)\n\n4. **Spawn Options:**\n   - Default (sidebar terminal)\n   - Popout window\n   - Embedded preview\n   - Paste-only mode\n\n5. **Settings Panel:**\n   - Category management (add/edit/reorder/color)\n   - Profile ordering (drag-and-drop)\n   - Pin to grid toggle\n   - Default profile selection\n\n### C. Terminal Extension Bridge Integration\n\n**Current:** `useTerminalExtension()` and `useTabzBridge()` hooks.\n\n**Enhancements:**\n\n1. **Profile Sync:**\n   - Fetch profiles from TabzChrome via bridge\n   - Bidirectional sync (homepage can create profiles)\n   - Cache profiles locally for offline access\n\n2. **Extended Spawn API:**\n```typescript\ninterface SpawnOptions {\n  profileId?: string\n  workingDir?: string\n  command?: string\n  mode: 'sidebar' | 'popout' | 'embedded'\n  pasteOnly?: boolean\n  tmux?: boolean\n}\n\nfunction spawnTerminal(options: SpawnOptions): Promise\u003cvoid\u003e\n```\n\n3. **Status Integration:**\n   - Show running terminals\n   - Quick-switch between terminals\n   - Terminal output preview (optional)\n\n4. **Keyboard Handlers:**\n   - Global shortcuts for quick spawn\n   - Profile switching hotkeys\n   - Integration with existing homepage shortcuts\n\n### D. Implementation Priority\n\n| Priority | Enhancement | Effort |\n|----------|-------------|--------|\n| P1 | Bookmark card visual improvements | Low |\n| P1 | Keyboard shortcuts (1-9) | Low |\n| P2 | Working directory selector | Medium |\n| P2 | Category accent bars \u0026 colors | Low |\n| P3 | New Launcher section | High |\n| P3 | Profile sync via bridge | Medium |\n\n### E. Data Attributes for TabzChrome\n\n```html\n\u003c!-- Enhanced command item --\u003e\n\u003cdiv data-tabz-section=\"launcher\"\n     data-tabz-item=\"profile-card\"\n     data-tabz-profile-id=\"profile-123\"\n     data-tabz-action=\"spawn\"\n     data-tabz-spawn-mode=\"sidebar\"\n     data-tabz-working-dir=\"~/projects\"\u003e\n```\n\n---\n\n**Research completed. Ready for implementation planning.**","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-05T10:35:06.600837297-05:00","created_by":"matt","updated_at":"2026-01-05T11:19:06.043761951-05:00","closed_at":"2026-01-05T11:19:06.043761951-05:00","close_reason":"Research complete: Documented TabzChrome profiles UI patterns, styling, keyboard shortcuts, spawn options, and proposed enhancements for bookmarks terminal commands, new Launcher section, and terminal bridge integration"}
{"id":"personal-homepage-esfy","title":"Bug: Open Agents Folder navigation uses wrong URL format","description":"The Open Agents Folder button changes URL incorrectly:\n\nActual: `?section=music-player#/files?path=...`\nExpected: Should use the app's proper section navigation\n\nThe hash fragment approach doesn't work - the page never actually switches. Need to use whatever navigation pattern the app uses for switching sections (likely `?section=files` or similar).\n\n## Key Files\n- app/sections/ai-workspace.tsx (recently modified)\n- Look at how other section navigation works in the app","notes":"## Retro\n- Root cause: Using window.location.hash for navigation instead of the app's section-based navigation pattern\n- Pattern learned: This app uses callback props (onNavigateToSection) for cross-section navigation, and FilesContext.navigateTreeTo for navigating to specific paths\n- Similar to how ProjectsDashboard navigates to ai-workspace with a project path","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-23T22:07:19.655529685-05:00","updated_at":"2026-01-23T22:10:36.405336387-05:00","closed_at":"2026-01-23T22:10:36.405336387-05:00","close_reason":"Fixed broken URL navigation - now uses in-app section navigation with onNavigateToSection callback and FilesContext.navigateTreeTo","labels":["bug","navigation","quick-fix","ready"]}
{"id":"personal-homepage-esg","title":"Fix Analytics bar chart showing flat despite 2.7M tokens","description":"## Bug\nThe Analytics page bar chart appears completely flat even though the data shows 2.7M tokens in/out. The bd-b5y fix added real data fetching from stats-cache.json, but the chart visualization isn't scaling properly.\n\n## Expected\nBar chart should show visible bars representing the actual token usage across days.\n\n## Likely Cause\n- Chart Y-axis scale not adjusting to real data magnitude\n- Demo data ranges were much smaller, new data needs different scale\n- Possible data transformation issue in chart component\n\n## Files\n- app/sections/analytics.tsx\n- Check chart configuration and Y-axis domain","notes":"## Retro\n- Root cause: CSS percentage heights don't work in flex containers\n- The bars were rendering with correct percentage values but invisible because flex items ignore percentage heights without explicit parent height\n- Fix: Use pixel heights calculated from a constant CHART_HEIGHT (160px)\n- No missing context - issue description was accurate\n- Straightforward fix once CSS behavior was understood","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T01:43:52.815645774-05:00","updated_at":"2026-01-21T20:02:59.856429263-05:00","closed_at":"2026-01-21T20:02:59.856429263-05:00","close_reason":"Fixed chart scaling by using pixel heights instead of CSS percentages","labels":["analytics","chart","ready","ui"]}
{"id":"personal-homepage-exct","title":"AI Workspace: Cache model fetch at app level","description":"Models are fetched every time AI Workspace component mounts.\n\n**Performance issue:** Unnecessary API calls on every navigation to AI Workspace.\n\n**Fix:** Move model fetching to app layout level or use React Context provider with caching.\n\n**Files:** app/sections/ai-workspace.tsx, potentially new context provider","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:01:01.878468595-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:01:01.878468595-05:00","dependencies":[{"issue_id":"personal-homepage-exct","depends_on_id":"personal-homepage-hiqh","type":"blocks","created_at":"2026-01-29T02:02:33.5222402-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-fd6","title":"Add keyboard navigation to file tree","description":"Port keyboard navigation from TabzChrome\n\nShortcuts:\n- Arrow Down/Up: navigate visible items\n- Arrow Right: expand folder\n- Arrow Left: collapse folder\n- Enter: select/open item\n- Home: jump to first item\n- End: jump to last item\n- Escape: close context menu\n\nReference: TabzChrome/extension/dashboard/components/files/FileTree.tsx (lines 538-606)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T01:13:11.833649852-05:00","created_by":"marci","updated_at":"2026-01-10T19:08:24.680661706-05:00","closed_at":"2026-01-10T19:08:24.680661706-05:00","close_reason":"Implemented keyboard navigation with Arrow keys, Enter, Home, End. Commit: 90ade90","dependencies":[{"issue_id":"personal-homepage-fd6","depends_on_id":"personal-homepage-gh5","type":"blocks","created_at":"2026-01-09T01:16:41.325335313-05:00","created_by":"marci"}]}
{"id":"personal-homepage-fe8","title":"Fix Device Selector not loading on initial startup","description":"## Bug\nPlayback devices do not appear on initial load, requires manual refresh.\n\n## Investigation\n- Check when getDevices() is called\n- May need to wait for Spotify SDK ready event\n- Check race condition between auth and device fetch\n\n## Files\n- hooks/useSpotifyPlayer.ts (device management)\n- app/sections/music-player.tsx (initial load)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-20T23:34:46.173195519-05:00","updated_at":"2026-01-20T23:36:27.444300113-05:00","closed_at":"2026-01-20T23:36:27.444300113-05:00","close_reason":"Duplicate of 1kd - orphaned from failed creation","labels":["music-player","spotify"]}
{"id":"personal-homepage-ffrj","title":"Polish: Site-wide UI styling makeover","description":"Give the site a visual polish pass using the ui-styling skill.\n\n## Areas to improve:\n- Left sidebar hover effects on navigation text\n- Consistent hover states across all sections\n- Subtle animations and transitions\n- Glass effect refinements\n- Button hover states\n- Card hover effects\n- Focus states for accessibility\n- Any other visual polish opportunities\n\n## Reference:\n- Use the ui-styling skill for shadcn/ui + Tailwind patterns\n- Keep the existing glass/terminal aesthetic\n- Make interactions feel more responsive and polished","notes":"## Retro\n- What worked: The existing glass/terminal aesthetic provided a solid foundation. CSS-only animations for better performance.\n- What was unclear: Initially considered whether to use CSS-in-JS but decided to keep all styles in globals.css for consistency with existing patterns.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T00:47:31.42781855-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T00:56:57.322552953-05:00","closed_at":"2026-01-29T00:56:57.322552953-05:00","close_reason":"Done: Added site-wide UI polish - sidebar nav hover effects with animated indicator bars, card hover lift/glow, staggered fade-in animations, enhanced button/input/checkbox/switch micro-interactions, and new reusable animation utilities. Updated design system docs."}
{"id":"personal-homepage-fil9","title":"Bug: Can't see beads issue while chatting in kanban","description":"When clicking AI Chat on beads issue cards, the original issue content is no longer visible while chatting. User loses context of what they're working on.\n\n## Expected\n- Keep issue visible alongside chat\n- Or show issue summary in chat header\n- Or split view with issue on left, chat on right","notes":"## prepared.prompt\n\n**Task:** Keep beads issue visible while chatting in kanban.\n\n**Problem:** Issue content disappears when AI chat opens.\n\n**Files:**\n- `app/components/kanban/` - task card and chat components\n\n**Fix options:**\n1. Split view - issue on left, chat on right\n2. Collapsible issue summary in chat header\n3. Side-by-side layout\n\nWhen done, run `bd close personal-homepage-fil9`.","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:06:13.266534286-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T21:23:24.117316606-05:00","closed_at":"2026-01-28T21:23:24.117316606-05:00","close_reason":"Added collapsible IssueSummary component to TaskChat view. When users open AI Chat on a beads issue, they now see the issue context (title, description, priority, labels, git branch) at the top of the chat in a collapsible panel that defaults to expanded.","labels":["kanban","ready","ui"]}
{"id":"personal-homepage-fjx","title":"Files page: Read Aloud shows garbled text with PRIME.md content","description":"When using Read Aloud on a file in the Files page, a popup shows garbled text with spaces removed. The text includes PRIME.md content, suggesting the MCP CLI call is picking up Claude context.\n\nThe /api/tabz/speak route uses `claude --mcp-cli call tabz/tabz_speak` which starts a Claude session and loads PRIME.md. The response somehow gets contaminated and has spaces stripped.","notes":"## Investigation\n\nThe Read Aloud feature in the Files page:\n1. Fetches file content via `/api/files/content`\n2. Sends to `/api/tabz/speak` which runs `claude --mcp-cli call tabz/tabz_speak`\n3. The mcp-cli call loads Claude context including PRIME.md\n4. Response shows garbled text with spaces stripped\n\n## Possible fixes\n\n1. **Call TabzChrome directly via HTTP** - if it exposes the speak endpoint\n2. **Use a minimal Claude context** - pass `--system-prompt \"\"` or similar to skip PRIME.md\n3. **Fix the mcp-cli response handling** - may have same newline stripping issue as chat streaming\n\n## Files\n- `app/api/tabz/speak/route.ts` - the TTS API route\n- `app/components/files/FileTreeContextMenu.tsx:294-345` - handleReadAloud function","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T21:05:10.001021929-05:00","updated_at":"2026-01-21T21:13:03.646627575-05:00","closed_at":"2026-01-21T21:13:03.646627575-05:00","close_reason":"Fixed: Now calls TabzChrome /api/audio/speak directly instead of going through claude --mcp-cli","labels":["files","mcp","tts"]}
{"id":"personal-homepage-fpga","title":"Add agents to settings export/import","description":"Add agents to the existing settings export/import in the Settings page so they can be restored when running a production build.\n\n## Current Export\n- apiKeys (masked)\n- sections (visibility, order)\n- tabzChrome settings\n\n## Add to Export\n- agents array (full agent configs including spawn commands)\n\n## Files\n- app/sections/settings.tsx - ImportExportTab component\n- Need to fetch agents from /api/ai/agents and include in export\n- On import, POST agents back to registry","notes":"## Retro\n- Straightforward implementation\n- Agents fetched from /api/ai/agents/registry and stripped of id/timestamps before export\n- Import uses upsert pattern: try POST, if 409 then PUT by slug\n- Added loading states to both buttons for better UX\n- Version bumped from 1 to 2","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T20:36:08.498567337-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T20:44:05.409945737-05:00","closed_at":"2026-01-28T20:44:05.409945737-05:00","close_reason":"Done: Added agents to settings export/import with version 2 config format and upsert logic","labels":["ready","storage"]}
{"id":"personal-homepage-fzsc","title":"Tests: API routes - AI endpoints","description":"Add vitest tests for AI API routes.\n\n## Routes to test\n- app/api/ai/chat/route.ts\n- app/api/ai/agents/route.ts\n- app/api/ai/agents/[id]/route.ts\n- app/api/ai/conversations/route.ts\n\n## Test coverage\n- Request validation\n- Response format\n- Error handling\n- Mock CLI spawning","notes":"## prepared.prompt\n\n**Task:** Write vitest tests for AI API routes.\n\n**Files to test:**\n- `app/api/ai/chat/route.ts`\n- `app/api/ai/agents/route.ts`\n- `app/api/ai/agents/[id]/route.ts`\n- `app/api/ai/conversations/route.ts`\n\n**Output:** `__tests__/api/ai/*.test.ts`\n\n**Approach:**\n1. Mock Next.js request/response\n2. Mock child_process spawn for CLI calls\n3. Test happy paths and error cases\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:15:47.650100606-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:41:41.288691896-05:00","closed_at":"2026-01-28T22:41:41.288691896-05:00","close_reason":"Done: Created vitest tests for AI API routes (chat, agents, agents/[id], conversations) with 52 passing tests covering happy paths, error handling, and validation","labels":["api","ready","tests"]}
{"id":"personal-homepage-g6u","title":"Wire up Music Player section","description":"Music Player component has been copied to app/sections/music-player.tsx.\n\nWire-up tasks:\n1. Remove the full-page layout wrapper (min-h-screen, etc.)\n2. Convert default export to named section component pattern\n3. Add 'music-player' to Section type in app/page.tsx\n4. Add to navigationItems array with Music icon\n5. Add to CATEGORIES under Entertainment\n6. Add case to renderContent() switch\n7. Add dynamic import for lazy loading\n8. Add TabzChrome data-tabz-* attributes to key elements\n9. Default to hidden in Settings visibility\n10. Test all themes and responsive layout\n\nThe component is fully functional - just needs integration with the homepage shell.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T10:34:39.570307324-05:00","created_by":"matt","updated_at":"2026-01-05T10:54:43.847262071-05:00","closed_at":"2026-01-05T10:54:43.847262071-05:00","close_reason":"Implemented: Wired up Music Player section with navigation, settings, and TabzChrome attributes"}
{"id":"personal-homepage-g9f9","title":"Remove Docs Editor page (consolidated into Files page)","description":"**Goal:** Remove the standalone Docs Editor page.\n\n**Reason:** Functionality has been consolidated into the Files page as the \"GitHub\" tab next to \"Local\" above the file tree.\n\n**Tasks:**\n- [ ] Update \"view docs\" icon in Projects page actions column → link to Files page with GitHub tab\n- [ ] Remove Docs Editor from nav/sidebar\n- [ ] Delete Docs Editor page component and route\n- [ ] Verify GitHub tab in Files page covers all use cases\n- [ ] Update any other links/references to Docs Editor\n\n**Dependencies:**\n- Projects page \"view docs\" action needs to be rewired first\n\n**Outcome:** One less page to maintain, clearer navigation.","notes":"## Retro\nStraightforward consolidation. Had to update SectionSettings.tsx in addition to the listed files. The Files page already supported GitHub via localStorage repo selection, so just needed to add a source flag for initial tab selection.","status":"closed","priority":3,"issue_type":"chore","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-23T17:29:19.541986877-05:00","created_by":"GGPrompts","updated_at":"2026-01-25T20:26:34.895157472-05:00","closed_at":"2026-01-25T20:26:34.895157472-05:00","close_reason":"Done: Removed Docs Editor from navigation and consolidated functionality into Files page GitHub tab","labels":["cleanup","gate:codex-review","ready","removal"],"dependencies":[{"issue_id":"personal-homepage-g9f9","depends_on_id":"personal-homepage-hapi","type":"blocks","created_at":"2026-01-23T18:49:26.788072161-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-gg2","title":"BeadsBan: Simplify kanban to beads-only mode","description":"## Problem\nCurrent kanban has confusing modes:\n- Local Tasks vs Beads Issues toggle\n- Simplified vs Full Board toggle\n- Multiple columns can map to same beads status\n- Don't know which view aligns with actual beads state\n\n## Solution: BeadsBan\nA dedicated beads-only kanban that shows exactly what beads has:\n\n### Columns (match beads statuses + workflow)\n| Column | Source | Filter |\n|--------|--------|--------|\n| Backlog | bd list --status=open | No prepared.prompt in notes |\n| Ready | bd ready | Has prepared.prompt, no blockers |\n| In Progress | bd list --status=in_progress | - |\n| Blocked | bd blocked | Has unresolved deps |\n| Done | bd list --status=closed | - |\n\n### Remove\n- Local Tasks mode (beads-only)\n- Simplified/Full toggle (one view)\n- Custom columns (fixed to beads workflow)\n- Column drag reordering (fixed order)\n\n### Add to Done column\n- Transcript link (.beads/transcripts/\u003cid\u003e.md)\n- Commit/PR link\n- QA status indicator\n- Close reason\n\n### Blocked column enhancements\n- Show what's blocking each issue\n- Click to see blocker details\n- Visual dep graph connection\n\n### Ready column enhancements\n- Show prepared.prompt preview\n- Skill keywords matched\n- Key files listed\n\n## Acceptance\n- Single mode: beads-only\n- Columns match bd ready / bd blocked / bd list exactly\n- Done column shows completion metadata\n- No confusion about what's actually in beads","notes":"prepared.skills: frontend:frontend-development, frontend:ui-styling\nprepared.files: app/sections/kanban.tsx, app/components/kanban/\nprepared.prompt: |\n  ## Feature: BeadsBan - Simplify kanban to beads-only mode\n  \n  ### Context\n  Simplify the kanban board to work exclusively with beads issues.\n  \n  ### Key Files\n  - app/sections/kanban.tsx (main kanban section)\n  - app/components/kanban/ (kanban components)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /frontend:ui-styling for UI components\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-gg2","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-11T01:01:56.927008309-05:00","created_by":"marci","updated_at":"2026-01-11T03:19:18.011833667-05:00","closed_at":"2026-01-11T03:19:18.011833667-05:00","close_reason":"Implemented beads-only kanban with fixed 5-column layout"}
{"id":"personal-homepage-gh5","title":"Unify Files page: local + GitHub with source toggle","description":"Combine local FileTree and GitHub quick-notes into ONE unified Files page.\n\n## Architecture\n- Single Files section with source toggle: **Local** | **GitHub**\n- Shared components for both sources:\n  - FileTree (tree rendering, icons, expand/collapse)\n  - FileViewer (tabs, viewers, preview/edit)\n  - FileContextMenu (right-click actions)\n  - Keyboard navigation\n\n## Features to Share\n- **Custom color icons** from TabzChrome claudeFileTypes.ts\n  - Claude-aware: skills (green), agents (blue), hooks (orange), MCP (purple)\n  - File types: code (green), markdown (blue), images (yellow), JSON (orange)\n  - Special folders: .obsidian, .github, node_modules, etc.\n- File type detection\n- Favorites system\n- Tab-based viewer with pin/preview\n\n## Source-Specific Features\n| Feature | Local | GitHub |\n|---------|-------|--------|\n| Read files | /api/files/content | GitHub API |\n| Edit/Save | Open in $EDITOR | Inline edit + commit |\n| Auto-save | N/A | Yes (with dirty state) |\n| Send to chat | Yes | Yes |\n| TTS/Read aloud | Yes | Yes |\n\n## UI Concept\n```\n[Files]\n┌─────────────────────────────────────┐\n│ [Local ▼] [GitHub] │ ← Source toggle\n│ [~/projects/personal-homepage ▼] │ ← Path/repo selector\n├─────────────────────────────────────┤\n│ 📁 app/ │ File content... │\n│ 📁 components/ │ │\n│ 📄 CLAUDE.md │ │\n```\n\nReference: TabzChrome/extension/dashboard/components/files/ for icon system","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T01:16:34.418704016-05:00","created_by":"marci","updated_at":"2026-01-09T01:28:38.447428723-05:00","closed_at":"2026-01-09T01:28:38.447428723-05:00","close_reason":"Implemented unified Files page with Local/GitHub source toggle. Added GitHubFileTree and GitHubFileViewer components. Build verified."}
{"id":"personal-homepage-ghc3","title":"Bug: Prompts Playground split view options broken","description":"Split view options on Prompts Playground don't function:\n\n- 2x2 grid icon actually creates 4 column layout\n- Both split pane options create 2 vertical splits (should be horizontal vs vertical)\n- Layout switching may not work at all\n\n## Files\n- app/sections/prompts-playground.tsx or similar\n\n## Fix\n- Correct the layout logic for each icon\n- 2x2 grid = 2 rows x 2 cols\n- Split horizontal = side by side\n- Split vertical = top/bottom","notes":"## prepared.prompt\n\n**Task:** Fix Prompts Playground split view layouts.\n\n**Problems:**\n1. 2x2 grid icon creates 4 columns instead of 2x2 grid\n2. Split pane options both do vertical splits\n\n**File:** `app/sections/prompts-playground.tsx` (or similar)\n\n**Fix:** Correct the CSS/layout logic for each view mode.\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:22:13.732456057-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:36:25.301830027-05:00","closed_at":"2026-01-28T22:36:25.301830027-05:00","close_reason":"Done: Added className='h-full' to inner ResizablePanelGroup components in QuadSplitViewer.tsx to fix layout issues. The quad view's nested horizontal panel groups were missing height constraints, causing improper rendering of the 2x2 grid layout.","labels":["prompts-playground","ready","ui"]}
{"id":"personal-homepage-gx7g","title":"UX: Open Agents Folder should use in-app Files page, not Windows Explorer","description":"The 'Open Agents Folder' action currently opens Windows File Explorer to the WSL path. The app has a built-in Files page with a file explorer that should be used instead.\n\n## Current Behavior\n- Clicking 'Open Agents Folder' opens Windows Explorer to the agents folder path in WSL\n\n## Expected Behavior  \n- Should navigate to the in-app Files page\n- Pre-navigate to the agents folder path within the Files page\n\n## Implementation\n1. Find where 'Open Agents Folder' action is defined\n2. Instead of shell/external open, use router navigation to Files page\n3. Pass the agents folder path as a query param or use Files context to set initial path\n\n## Key Files\n- Look for 'Open Agents Folder' button/action\n- app/files/page.tsx or Files section\n- May need to update FilesContext to accept initial path","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T22:02:46.797961674-05:00","updated_at":"2026-01-23T22:04:48.71052156-05:00","closed_at":"2026-01-23T22:04:48.71052156-05:00","close_reason":"Done: Changed Open Agents Folder to use in-app Files page navigation instead of Windows Explorer","labels":["agents","files","ready","ux"]}
{"id":"personal-homepage-h2ft","title":"Bug: AI Workspace agents menu blocks chat area and won't dismiss","description":"On the AI Workspace page, there's an agents selection menu in the main content area (where the chat/conversations normally display). After selecting an agent, it creates a new conversation but the agents menu never goes away - it permanently blocks the chat view.\n\n## Steps to Reproduce\n1. Go to AI Workspace page\n2. See agents menu in main content area (above chat bar)\n3. Select an agent\n4. New conversation starts, but agents menu stays visible\n5. No way to close/dismiss the agents menu\n\n## Expected\n- Agents menu should dismiss after selection\n- Or have a close button\n- Chat area should be visible after starting conversation\n\n## Actual\n- Agents menu permanently visible\n- Blocks the chat/conversation view\n- No close option\n\n## Key Files\n- app/ai-workspace/page.tsx or similar\n- Look for agent selection component in main content area","notes":"## Retro\n- Root cause: Agent gallery display condition only checked messages.length === 0, but new conversations start with empty messages\n- Fix was simple: also check !activeConv.agentId since handleStartChatWithAgent sets the agentId\n- No issues encountered - straightforward one-line fix at line 847","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-23T21:54:12.981149462-05:00","updated_at":"2026-01-23T21:56:20.023878114-05:00","closed_at":"2026-01-23T21:56:20.023878114-05:00","close_reason":"Fixed: Added agentId check to agent gallery display condition so it hides after agent selection","labels":["ai-workspace","blocking","bug","ready","ux"]}
{"id":"personal-homepage-hapi","title":"Projects: Clean up and consolidate icon row actions","description":"Audit the icon row in ProjectOverview and consolidate/remove unused actions.\n\n## Current State\nIcons in ProjectOverview.tsx:\n1. Terminal - spawns terminal in project dir\n2. VS Code - opens project in VS Code\n3. Browse Files - spawns TFE (being replaced)\n4. GitHub - opens repo on GitHub\n\n## Tasks\n- [ ] Audit each icon's usage and necessity\n- [ ] Remove 'Browse Files' icon (replaced by FileTree task)\n- [ ] Evaluate: Is Terminal icon needed if we have integrated terminal?\n- [ ] Consider grouping: 'Open in...' dropdown vs flat icons\n- [ ] Update 'View Docs' action to link to Files page GitHub tab\n\n## Acceptance Criteria\n- Icon row is cleaner with only essential actions\n- No dead/redundant links\n- Clear purpose for each remaining icon","notes":"## Retro\n- Straightforward cleanup task\n- Terminal button kept: distinct value from ProjectCommands (runs pre-defined commands) - Terminal spawns ad-hoc shell in project dir\n- Removed ~50 lines including Browse Files button, File Browser Drawer, and unused imports\n- Build passes, lint has a separate worktree path issue unrelated to this change","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-23T18:49:16.10142466-05:00","created_by":"GGPrompts","updated_at":"2026-01-23T20:00:29.436616597-05:00","closed_at":"2026-01-23T20:00:29.436616597-05:00","close_reason":"Done: Removed Browse Files button and File Browser Drawer (users should use Files page). Kept Terminal button for ad-hoc shell access. VS Code and GitHub buttons unchanged. Cleaned up imports.","labels":["cleanup","frontend","gate:codex-review","projects","ready"],"dependencies":[{"issue_id":"personal-homepage-hapi","depends_on_id":"personal-homepage-3h58","type":"blocks","created_at":"2026-01-23T18:49:26.428479733-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-haxx","title":"Tests: Settings and preferences hooks","description":"Add tests for settings/preferences hooks.\n\n## Hooks to test\n- hooks/useSectionPreferences.ts (extend existing)\n- hooks/useSettings.ts (if exists)\n- hooks/useLocalStorage patterns\n\n## Test coverage\n- Default values\n- Persistence\n- Migration between versions","notes":"## prepared.prompt\n\n**Task:** Extend tests for settings/preferences.\n\n**Existing:** `__tests__/hooks/useSectionPreferences.test.ts`\n\n**Add more coverage:**\n- Edge cases\n- LocalStorage mocking\n- Default value handling\n\nWhen done, run `bd close \u003cissue-id\u003e`.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:16:03.195640852-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T22:39:22.110974865-05:00","closed_at":"2026-01-28T22:39:22.110974865-05:00","close_reason":"Done: Extended useSectionPreferences tests from 25 to 78 tests. Added comprehensive coverage for: edge cases in conversion functions (empty strings, undefined values, all icon mappings), localStorage mocking with corrupted/partial/null data handling, default value merging when sections or categories are added, hook behavior testing for all actions (visibility, order, categories, agents), and full category management lifecycle (add, update, delete, reorder).","labels":["hooks","ready","tests"]}
{"id":"personal-homepage-hiqh","title":"AI Workspace: Extract components to reduce file size","description":"ai-workspace.tsx is 1,297 lines - too large for maintainability.\n\n**Refactoring plan:**\n1. Extract `\u003cConversationSidebar /\u003e` (~300 lines)\n2. Extract `\u003cChatArea /\u003e` (~500 lines) \n3. Extract `\u003cSettingsPanel /\u003e` (~250 lines)\n4. Extract `\u003cContextIndicator /\u003e` (~150 lines)\n5. Extract `\u003cHeaderControls /\u003e` (~200 lines)\n\n**Target:** Main component should be \u003c400 lines, orchestrating sub-components.\n\n**Files:** app/sections/ai-workspace.tsx → multiple new files in app/sections/ai-workspace/","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:56.561813881-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:00:56.561813881-05:00","dependencies":[{"issue_id":"personal-homepage-hiqh","depends_on_id":"personal-homepage-aejo","type":"blocks","created_at":"2026-01-29T02:02:31.44101341-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-hiqh","depends_on_id":"personal-homepage-c8kd","type":"blocks","created_at":"2026-01-29T02:02:31.519354325-05:00","created_by":"GGPrompts"},{"issue_id":"personal-homepage-hiqh","depends_on_id":"personal-homepage-8hhk","type":"blocks","created_at":"2026-01-29T02:02:31.592591022-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-ibf","title":"Agent Cards: Agent gallery/selector in AI Workspace","description":"Add agent selection UI to AI Workspace. Grid/carousel of AgentCards. Filter by section. Show currently selected agent. Quick switch between agents.","notes":"prepared.skills: frontend:frontend-development, frontend:ui-styling\nprepared.files: app/sections/ai-workspace.tsx, components/agents/AgentCard.tsx, app/components/files/AgentGallery.tsx\nprepared.prompt: |\n  ## Task: Agent Cards - Agent gallery/selector in AI Workspace\n  \n  ### Context\n  Add an agent gallery/selector component to the AI Workspace section.\n  \n  ### Key Files\n  - app/sections/ai-workspace.tsx (AI workspace section)\n  - components/agents/AgentCard.tsx (agent card component)\n  - app/components/files/AgentGallery.tsx (existing gallery)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /frontend:ui-styling for gallery UI\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-ibf","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:24:53.795041626-05:00","created_by":"marci","updated_at":"2026-01-11T03:32:57.80747579-05:00","closed_at":"2026-01-11T03:32:57.80747579-05:00","close_reason":"Implemented agent gallery with search, filtering, grid/list views, and AI Workspace integration","dependencies":[{"issue_id":"personal-homepage-ibf","depends_on_id":"personal-homepage-9nq","type":"blocks","created_at":"2026-01-08T18:25:39.940312086-05:00","created_by":"marci"}]}
{"id":"personal-homepage-it1a","title":"Audit and normalize AI integrations across codebase","description":"AI is scattered across multiple places in the codebase with potentially different implementations. Need to audit all locations and normalize to use shared agents/code.\n\n## Known AI Locations\n1. **AI Workspace section** - Main chat interface (app/sections/ai-workspace.tsx)\n2. **AI Drawer** - Right sidebar chat (components/ai/AIDrawer.tsx + AIDrawerProvider.tsx)\n3. **Kanban page** - AI features on the kanban board\n4. **Kanban issue cards** - AI chat built into individual cards\n\n## Problems\n- Multiple implementations to maintain\n- Inconsistent agent/model configuration\n- Different UX patterns for same functionality\n- Hard to keep all locations in sync with CLI flag updates\n\n## Tasks\n1. Search codebase for all AI-related components and API calls\n2. Document each location's features and implementation\n3. Identify shared vs unique functionality\n4. Design unified AI service/hook that all locations can use\n5. Normalize to use shared agent system\n6. Single source of truth for CLI configurations\n\n## Goal\nOne AI implementation that powers all locations, with consistent agent selection and configuration.","design":"## Unified AI Service Architecture\n\n### Overview\n\nThe unified architecture consolidates AI functionality into a layered system:\n\n1. **Core Layer**: Single source of truth for types and backend integrations\n2. **Hooks Layer**: Reusable hooks for chat, projects, and agents\n3. **Context Layer**: Application-wide state management\n4. **Component Layer**: UI components that consume the hooks/context\n\n### Type System\n\n```typescript\n// lib/ai/types.ts - Unified Type Definitions\n\n// Base types\nexport type MessageRole = 'user' | 'assistant' | 'system'\nexport type AIBackend = 'claude' | 'gemini' | 'codex' | 'docker' | 'mock'\n\n// Common settings (all backends)\nexport interface CommonChatSettings {\n  temperature?: number\n  maxTokens?: number\n  systemPrompt?: string\n  appendSystemPrompt?: string\n  additionalDirs?: string[]\n}\n\n// Claude-specific (from CLI research)\nexport interface ClaudeSettings extends CommonChatSettings {\n  model?: string  // sonnet, opus, haiku\n  agent?: string  // ~/.claude/agents/\n  permissionMode?: 'acceptEdits' | 'bypassPermissions' | 'default' | 'delegate' | 'dontAsk' | 'plan'\n  allowedTools?: string[]\n  disallowedTools?: string[]\n  tools?: string[]\n  mcpConfig?: string[]\n  strictMcpConfig?: boolean\n  pluginDirs?: string[]\n  sessionId?: string\n  forkSession?: boolean\n  maxBudgetUsd?: number\n  betas?: string[]\n}\n\n// Codex-specific\nexport interface CodexSettings extends CommonChatSettings {\n  model?: string\n  sandbox?: 'read-only' | 'workspace-write' | 'danger-full-access'\n  approvalPolicy?: 'untrusted' | 'on-failure' | 'on-request' | 'never'\n  fullAuto?: boolean\n  profile?: string\n  useOss?: boolean\n  localProvider?: 'lmstudio' | 'ollama' | 'ollama-chat'\n  webSearch?: boolean\n}\n\n// Gemini-specific\nexport interface GeminiSettings extends CommonChatSettings {\n  model?: string\n  sandbox?: boolean\n  yolo?: boolean\n  approvalMode?: 'default' | 'auto_edit' | 'yolo' | 'plan'\n  allowedTools?: string[]\n  allowedMcpServers?: string[]\n  extensions?: string[]\n}\n\n// Unified ChatSettings\nexport interface ChatSettings {\n  model: string\n  backend: AIBackend\n  \n  // Common settings\n  common?: CommonChatSettings\n  \n  // Backend-specific (only one will be used based on backend)\n  claude?: ClaudeSettings\n  codex?: CodexSettings\n  gemini?: GeminiSettings\n  \n  // UI preferences\n  suggestedPrompts?: SuggestedPrompt[]\n}\n```\n\n### Shared Hooks\n\n```typescript\n// hooks/useProjects.ts\nexport function useProjects() {\n  const { getGitHubToken } = useAuth()\n  const { isPinned } = useAllProjectsMeta()\n  \n  const localQuery = useQuery({\n    queryKey: ['local-projects'],\n    queryFn: fetchLocalProjects,\n    staleTime: 5 * 60 * 1000,\n  })\n  \n  const githubQuery = useQuery({\n    queryKey: ['github-projects'],\n    queryFn: () =\u003e fetchGitHubProjects(getGitHubToken),\n    staleTime: 5 * 60 * 1000,\n  })\n  \n  const projects = useMemo(() =\u003e {\n    const merged = mergeProjects(githubQuery.data || [], localQuery.data || [])\n    return merged\n      .filter(p =\u003e p.local?.path)\n      .sort((a, b) =\u003e {\n        if (isPinned(a.slug) !== isPinned(b.slug)) {\n          return isPinned(a.slug) ? -1 : 1\n        }\n        return a.name.localeCompare(b.name)\n      })\n  }, [localQuery.data, githubQuery.data, isPinned])\n  \n  return {\n    projects,\n    isLoading: localQuery.isLoading || githubQuery.isLoading,\n    isPinned,\n  }\n}\n\n// hooks/useAgents.ts\nexport function useAgents(currentSection?: string) {\n  const query = useQuery\u003c{ agents: AgentCard[] }\u003e({\n    queryKey: ['agents-registry'],\n    queryFn: fetchAgentRegistry,\n    staleTime: 5 * 60 * 1000,\n  })\n  \n  const agents = useMemo(() =\u003e \n    query.data?.agents?.filter(a =\u003e a.enabled) ?? [],\n    [query.data]\n  )\n  \n  const recommended = useMemo(() =\u003e {\n    if (!currentSection) return null\n    return agents.find(a =\u003e a.sections?.includes(currentSection)) ?? null\n  }, [currentSection, agents])\n  \n  return {\n    agents,\n    recommended,\n    isLoading: query.isLoading,\n    getById: (id: string) =\u003e agents.find(a =\u003e a.id === id),\n  }\n}\n```\n\n### Enhanced useAIChat\n\n```typescript\n// hooks/useAIChat.ts - Enhanced with options\nexport interface UseAIChatOptions {\n  initialConversationId?: string\n  trackTokens?: boolean  // NEW: Enable token tracking\n  onConversationsChange?: (conversations: Conversation[]) =\u003e void\n  onSettingsChange?: (settings: ChatSettings) =\u003e void\n}\n\nexport function useAIChat(options: UseAIChatOptions = {}) {\n  const { trackTokens = false } = options\n  \n  // ... existing implementation ...\n  \n  // Token tracking (when enabled)\n  const tokenUsage = trackTokens ? useMemo(() =\u003e {\n    if (!activeConv.cumulativeUsage) return null\n    const usage = activeConv.cumulativeUsage\n    const contextLimit = 200000\n    const percentage = Math.round((usage.contextTokens / contextLimit) * 100)\n    return {\n      ...usage,\n      contextLimit,\n      percentage,\n      status: percentage \u003e= 90 ? 'danger' : percentage \u003e= 70 ? 'warning' : 'ok'\n    }\n  }, [activeConv.cumulativeUsage]) : null\n  \n  return {\n    // ... existing return values ...\n    tokenUsage, // NEW\n  }\n}\n```\n\n### Unified Context (Optional)\n\n```typescript\n// contexts/AIContext.tsx\nexport interface AIContextValue {\n  // Chat from useAIChat\n  chat: UseAIChatReturn\n  \n  // Projects from useProjects\n  projects: ReturnType\u003ctypeof useProjects\u003e\n  \n  // Agents from useAgents\n  agents: ReturnType\u003ctypeof useAgents\u003e\n  \n  // Global AI drawer state\n  drawer: {\n    state: 'collapsed' | 'minimized' | 'expanded'\n    width: 'narrow' | 'default' | 'wide'\n    open: () =\u003e void\n    close: () =\u003e void\n    expand: () =\u003e void\n    minimize: () =\u003e void\n    toggle: () =\u003e void\n    setWidth: (width: 'narrow' | 'default' | 'wide') =\u003e void\n  }\n  \n  // Selected agent (shared across locations)\n  selectedAgent: AgentCard | null\n  setSelectedAgent: (agent: AgentCard | null) =\u003e void\n  \n  // Selected project (shared across locations)\n  selectedProjectPath: string | null\n  setSelectedProjectPath: (path: string | null) =\u003e void\n}\n```\n\n### Component Usage Examples\n\n```tsx\n// AI Workspace (full-featured)\nfunction AIWorkspace() {\n  const chat = useAIChat({ trackTokens: true })\n  const { projects, isPinned } = useProjects()\n  const { agents, recommended } = useAgents('ai-workspace')\n  \n  // Has access to chat.tokenUsage for context warning\n  // Uses full settings panel\n}\n\n// AI Drawer (sidebar)\nfunction AIDrawer() {\n  const context = useAIDrawerContext() // Uses AIDrawerProvider\n  // context.chat, context.projects, context.agents all available\n  // Simpler settings UI but same underlying data\n}\n\n// MiniChat (embedded)\nfunction MiniChat({ agent }: { agent?: AgentProfile }) {\n  const chat = useAIChat() // Direct usage, no token tracking\n  // Uses agent prop for system prompt\n  // Minimal UI\n}\n```\n\n### Backend Integration Updates\n\n```typescript\n// lib/ai/claude.ts - Accept unified settings\nexport async function streamClaude(\n  messages: ChatMessage[],\n  settings?: ChatSettings,  // Changed from ChatSettings specific\n  cwd?: string,\n  sessionId?: string\n): Promise\u003cClaudeStreamResult\u003e {\n  // Extract Claude-specific settings\n  const claudeSettings = settings?.claude || {}\n  const commonSettings = settings?.common || {}\n  \n  const args = ['--print', '--output-format', 'stream-json', '--verbose']\n  \n  // Apply common settings\n  if (commonSettings.systemPrompt) {\n    args.push('--append-system-prompt', commonSettings.systemPrompt)\n  }\n  if (commonSettings.additionalDirs?.length) {\n    args.push('--add-dir', ...commonSettings.additionalDirs)\n  }\n  \n  // Apply Claude-specific settings\n  if (claudeSettings.model) args.push('--model', claudeSettings.model)\n  if (claudeSettings.agent) args.push('--agent', claudeSettings.agent)\n  if (claudeSettings.permissionMode) args.push('--permission-mode', claudeSettings.permissionMode)\n  if (claudeSettings.allowedTools?.length) args.push('--allowed-tools', ...claudeSettings.allowedTools)\n  if (claudeSettings.disallowedTools?.length) args.push('--disallowed-tools', ...claudeSettings.disallowedTools)\n  if (claudeSettings.mcpConfig?.length) args.push('--mcp-config', ...claudeSettings.mcpConfig)\n  if (claudeSettings.strictMcpConfig) args.push('--strict-mcp-config')\n  if (claudeSettings.pluginDirs?.length) args.push('--plugin-dir', ...claudeSettings.pluginDirs)\n  if (claudeSettings.maxBudgetUsd) args.push('--max-budget-usd', String(claudeSettings.maxBudgetUsd))\n  if (claudeSettings.betas?.length) args.push('--betas', ...claudeSettings.betas)\n  \n  // ... rest of implementation\n}\n```\n\n### Migration Strategy\n\nPhase 1 (Safe): Extract utilities\n- Create lib/ai/utils.ts with isAvatarUrl, isEmoji\n- Update imports (no behavior change)\n\nPhase 2 (Safe): Create new hooks\n- Create hooks/useProjects.ts\n- Create hooks/useAgents.ts\n- Keep old code working in parallel\n\nPhase 3 (Medium): Update consumers\n- Update ai-workspace.tsx to use new hooks\n- Update AIDrawerProvider.tsx to use new hooks\n- Remove duplicate code\n\nPhase 4 (Higher): Consolidate types\n- Merge types into lib/ai/types.ts\n- Update ChatSettings to unified format\n- Update API endpoints\n- Update backend integrations\n\nPhase 5 (Final): Remove deprecated code\n- Delete contexts/AIDrawerContext.tsx\n- Clean up lib/ai-workspace.ts\n- Final testing","notes":"## AI Integration Audit Report\n\n### Phase 1: Discovery - All AI Locations\n\n#### 1. Components Layer\n\n| File | Lines | Purpose |\n|------|-------|--------|\n| `app/sections/ai-workspace.tsx` | 1,617 | Main full-page AI chat interface |\n| `components/ai/AIDrawer.tsx` | 1,054 | Sliding drawer chat (sidebar) |\n| `components/ai/AIDrawerProvider.tsx` | 370 | Provider context for drawer state + chat |\n| `components/ai/MiniChat.tsx` | 278 | Embedded popover chat widget |\n| `components/ai/ChatMessage.tsx` | - | Shared message rendering |\n| `components/ai/ChatInput.tsx` | - | Shared input component |\n| `components/ai/Conversation.tsx` | - | Shared conversation display |\n| `components/ai/AILayoutWrapper.tsx` | - | Layout wrapper |\n\n#### 2. Hooks Layer\n\n| File | Lines | Purpose |\n|------|-------|--------|\n| `hooks/useAIChat.ts` | 760 | Core chat hook - conversation/settings/streaming |\n| `hooks/useAIDrawerChat.ts` | 238 | Extended hook for drawer-specific features |\n\n#### 3. Context Layer\n\n| File | Lines | Purpose |\n|------|-------|--------|\n| `contexts/AIDrawerContext.tsx` | 250 | Original drawer context (deprecated?) |\n| `components/ai/AIDrawerProvider.tsx` | 370 | Newer provider with agent selection |\n\n#### 4. Backend Integration Layer\n\n| File | Lines | Purpose |\n|------|-------|--------|\n| `lib/ai/index.ts` | 41 | Module exports |\n| `lib/ai/types.ts` | 62 | Shared types (ChatMessage, ChatSettings, etc.) |\n| `lib/ai/claude.ts` | 468 | Claude CLI integration |\n| `lib/ai/codex.ts` | 144 | Codex CLI integration |\n| `lib/ai/gemini.ts` | 131 | Gemini CLI integration |\n| `lib/ai/docker.ts` | - | Docker/local model integration |\n| `lib/ai/mock.ts` | - | Mock responses for testing |\n| `lib/ai/detect.ts` | - | Backend availability detection |\n| `lib/ai/conversation.ts` | - | JSONL conversation storage |\n| `lib/ai/codex-mcp.ts` | - | Codex MCP server integration |\n\n#### 5. API Routes\n\n| File | Purpose |\n|------|--------|\n| `app/api/ai/chat/route.ts` | Main chat endpoint |\n| `app/api/ai/models/route.ts` | List available models |\n| `app/api/ai/conversations/route.ts` | CRUD for conversations |\n| `app/api/ai/agents/route.ts` | Agent listing |\n| `app/api/ai/agents/registry/route.ts` | Agent registry |\n| `app/api/ai/agents/directory/route.ts` | Agent directory path |\n| `app/api/ai/explain-script/route.ts` | Script explanation |\n| `app/api/ai/chat/codex-mcp/route.ts` | Codex MCP chat |\n\n#### 6. Shared Utilities\n\n| File | Lines | Purpose |\n|------|-------|--------|\n| `lib/ai-workspace.ts` | 493 | Types, constants, storage utilities |\n| `lib/agents/types.ts` | 310 | Agent card types and schemas |\n\n---\n\n### Phase 2: Analysis - Feature Comparison\n\n#### Features by Location\n\n| Feature | AI Workspace | AI Drawer | MiniChat |\n|---------|--------------|-----------|----------|\n| Full conversation history | YES | YES | YES |\n| Model selection | YES | YES | NO |\n| Project context (cwd) | YES | YES | NO |\n| Agent selection | YES (Gallery) | YES (Dropdown) | YES (prop) |\n| System prompt override | YES | YES | NO (uses agent) |\n| Claude session persistence | YES | YES | YES |\n| Token tracking | YES (detailed) | NO | NO |\n| Context usage warning | YES | NO | NO |\n| Export to markdown | YES | NO | NO |\n| Continue in new chat | YES | NO | NO |\n| Tool use display | YES | YES | YES |\n| Width customization | NO | YES (3 presets) | Fixed |\n| Keyboard shortcuts | NO | NO | NO |\n| Auto-scroll | YES | YES | YES |\n\n#### State Management Approach\n\n| Location | State Source | Persistence |\n|----------|--------------|-------------|\n| AI Workspace | useAIChat hook directly | localStorage |\n| AI Drawer | useAIChat via AIDrawerProvider | localStorage |\n| MiniChat | useAIChat hook directly | localStorage |\n\n**Note:** All three use the SAME `useAIChat` hook, which is good. The drawer adds a context layer on top for drawer state and agent selection.\n\n---\n\n### Phase 2: Duplicated Code\n\n#### 1. **Project Fetching** (Duplicated 3x)\n\nBoth `ai-workspace.tsx` and `AIDrawer.tsx` have nearly identical code:\n```typescript\n// Fetch local projects\nconst { data: localProjects } = useQuery({\n  queryKey: ['local-projects'],\n  queryFn: async () =\u003e {...}\n})\n\n// Fetch GitHub projects  \nconst { data: githubProjects } = useQuery({\n  queryKey: ['github-projects-for-ai'],\n  queryFn: async () =\u003e {...}\n})\n\n// Merge and sort projects\nconst availableProjects = React.useMemo(() =\u003e {...})\n```\n\n#### 2. **Avatar URL Check** (Duplicated 3x)\n\n```typescript\nfunction isAvatarUrl(str: string): boolean {\n  if (str.startsWith('/')) return true\n  try { new URL(str); return true } catch { return false }\n}\n```\nAppears in: `ai-workspace.tsx`, `AIDrawer.tsx`, and inline in several places.\n\n#### 3. **Emoji Check** (Duplicated 2x)\n\n```typescript\nfunction isEmoji(str: string): boolean {\n  const emojiRegex = /^[\\p{Emoji}\\u200d]+$/u\n  return emojiRegex.test(str) \u0026\u0026 str.length \u003c= 8\n}\n```\nAppears in: `ai-workspace.tsx` (only currently used there).\n\n#### 4. **Settings Panel** (Similar but not identical)\n\nBoth have settings panels but AI Workspace has more options (Claude-specific, Gemini-specific, Codex-specific). The drawer has a simpler version.\n\n---\n\n### Phase 2: Inconsistencies Found\n\n#### 1. **Context Providers**\n- `contexts/AIDrawerContext.tsx` exists but seems unused\n- `components/ai/AIDrawerProvider.tsx` is the actual provider in use\n- Creates confusion about which to use\n\n#### 2. **Agent Selection**\n- AI Workspace: Uses `AgentGallery` modal with full agent cards\n- AI Drawer: Uses `DropdownMenu` with simplified list\n- MiniChat: Receives agent as prop, no selection UI\n\n#### 3. **Token Tracking**\n- AI Workspace: Has `contextUsage`, `cumulativeUsage`, context warning banner\n- AI Drawer: NO token tracking at all\n- MiniChat: NO token tracking\n\n#### 4. **Claude-Specific Settings**\n- AI Workspace: Exposes claudeModel, claudeAgent, permissionMode, additionalDirs, allowedTools, disallowedTools\n- AI Drawer: Only exposes model selection (generic)\n- Inconsistent configuration depth\n\n#### 5. **Conversation Persistence Indicator**\n- AI Workspace: Shows \"Persistent (JSONL)\" vs \"Session only\" badge\n- AI Drawer: No indicator\n\n#### 6. **Type Duplication**\n- `lib/ai/types.ts` defines `ChatSettings`\n- `lib/ai-workspace.ts` defines `ChatSettings` (different shape!)\n- Both define `AIBackend`, `MessageRole`\n\n---\n\n### Phase 3: Unified Architecture Design\n\n#### Proposed Architecture\n\n```\n                     +-------------------+\n                     |  ChatSettings     |\n                     |  (Unified Type)   |\n                     +--------+----------+\n                              |\n              +---------------+---------------+\n              |                               |\n     +--------v---------+           +---------v--------+\n     |  useAIChat()     |           |  useAgents()     |\n     |  (Core Hook)     |           |  (Agent Hook)    |\n     +--------+---------+           +---------+--------+\n              |                               |\n              +---------------+---------------+\n                              |\n                     +--------v---------+\n                     | useUnifiedAI()   |\n                     | (Composition)    |\n                     +--------+---------+\n                              |\n         +--------------------+--------------------+\n         |                    |                    |\n+--------v-------+   +--------v-------+   +--------v-------+\n| AIWorkspace    |   | AIDrawer       |   | MiniChat       |\n| (Full Page)    |   | (Sidebar)      |   | (Embedded)     |\n+----------------+   +----------------+   +----------------+\n```\n\n#### Key Changes\n\n**1. Consolidate Types** (`lib/ai/types.ts`)\n```typescript\n// Single source of truth for ChatSettings\nexport interface ChatSettings {\n  // Common\n  model: string\n  temperature?: number\n  maxTokens?: number\n  systemPrompt?: string\n  \n  // Backend-specific (from CLI research)\n  claude?: ClaudeSettings\n  codex?: CodexSettings  \n  gemini?: GeminiSettings\n}\n```\n\n**2. Create Shared Hooks**\n```typescript\n// hooks/useProjects.ts - Extract project fetching\nexport function useProjects() {\n  const localProjects = useQuery({...})\n  const githubProjects = useQuery({...})\n  const merged = useMemo(() =\u003e mergeProjects(...), [...])\n  return { projects: merged, isPinned, isLoading }\n}\n\n// hooks/useAgents.ts - Extract agent logic\nexport function useAgents() {\n  const registry = useQuery({...})\n  const recommended = useMemo(() =\u003e findBySection(...), [...])\n  return { agents, recommended, loading }\n}\n```\n\n**3. Enhance useAIChat with Optional Features**\n```typescript\nexport function useAIChat(options: UseAIChatOptions = {}) {\n  // Core functionality (current)\n  // Add optional features:\n  options.trackTokens?: boolean      // Enable token tracking\n  options.includeAgentSelection?: boolean\n  options.projectPath?: string | null\n}\n```\n\n**4. Create Unified AI Context**\n```typescript\n// contexts/UnifiedAIContext.tsx\nexport function UnifiedAIProvider({ children }) {\n  const chat = useAIChat({ trackTokens: true })\n  const projects = useProjects()\n  const agents = useAgents()\n  \n  // Shared drawer state\n  const [drawerState, setDrawerState] = useState\u003cDrawerState\u003e('collapsed')\n  \n  return (\n    \u003cUnifiedAIContext.Provider value={{ chat, projects, agents, drawer }}\u003e...\n  )\n}\n```\n\n**5. Deprecate Duplicate Files**\n- Remove `contexts/AIDrawerContext.tsx` (merge into provider)\n- Move utilities to `lib/ai/utils.ts`: `isAvatarUrl`, `isEmoji`\n\n---\n\n### Migration Plan\n\n#### Phase 1: Type Consolidation (Low Risk)\n1. Move `lib/ai-workspace.ts` types to `lib/ai/types.ts`\n2. Keep `lib/ai-workspace.ts` for UI utilities only\n3. Update all imports\n\n#### Phase 2: Extract Shared Hooks (Medium Risk)\n1. Create `hooks/useProjects.ts` from duplicated code\n2. Create `hooks/useAgents.ts` from AIDrawerProvider\n3. Update ai-workspace.tsx and AIDrawer.tsx to use new hooks\n\n#### Phase 3: Enhance useAIChat (Medium Risk)\n1. Add optional token tracking to useAIChat\n2. Add optional agent integration\n3. Update all consumers\n\n#### Phase 4: Consolidate Contexts (Higher Risk)\n1. Create `UnifiedAIProvider`\n2. Migrate AIDrawerProvider to use unified context\n3. Update all components\n4. Remove old contexts\n\n#### Phase 5: Apply CLI Flags (from personal-homepage-4yqz)\n1. Update ChatSettings with backend-specific sections\n2. Update Settings UI in ai-workspace.tsx\n3. Update API to pass new flags to backends\n\n---\n\n### File Changes Summary\n\n| Action | File | Description |\n|--------|------|-------------|\n| CREATE | `lib/ai/utils.ts` | Shared utilities (isAvatarUrl, isEmoji) |\n| CREATE | `hooks/useProjects.ts` | Project fetching hook |\n| CREATE | `hooks/useAgents.ts` | Agent management hook |\n| MODIFY | `lib/ai/types.ts` | Consolidate all AI types |\n| MODIFY | `hooks/useAIChat.ts` | Add token tracking option |\n| MODIFY | `components/ai/AIDrawerProvider.tsx` | Use new hooks |\n| MODIFY | `app/sections/ai-workspace.tsx` | Use new hooks, remove duplication |\n| MODIFY | `components/ai/AIDrawer.tsx` | Use new hooks, add token display |\n| DELETE | `contexts/AIDrawerContext.tsx` | Merge into AIDrawerProvider |\n| MODIFY | `lib/ai-workspace.ts` | Remove types (keep UI utils only) |\n\n---\n\n### Acceptance Criteria Status\n\n- [x] All AI locations documented (6 components, 2 hooks, 2 contexts, 10 lib files, 8 API routes)\n- [x] Duplicated code identified (project fetching, avatar checks, similar settings panels)\n- [x] Inconsistencies cataloged (contexts, agent selection, token tracking, CLI settings depth, types)\n- [x] Unified service architecture designed (shared hooks + unified context)\n- [x] Migration plan with file changes listed (5 phases, 10 file changes)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T14:35:09.350762093-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T15:03:29.037393397-05:00","closed_at":"2026-01-28T15:03:29.037393397-05:00","close_reason":"Done: Audited all AI integrations (6 components, 2 hooks, 2 contexts, 10 lib files, 8 API routes). Identified duplicated code (project fetching, avatar checks), inconsistencies (type definitions, token tracking, agent selection UX), and designed unified architecture with shared hooks (useProjects, useAgents), enhanced useAIChat with optional token tracking, and consolidated type system supporting CLI flags from prerequisite issue. Migration plan includes 5 phases with 10 file changes.","labels":["ai-workspace","audit","ready","refactor"],"dependencies":[{"issue_id":"personal-homepage-it1a","depends_on_id":"personal-homepage-4yqz","type":"blocks","created_at":"2026-01-28T14:44:53.070807172-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-j5k3","title":"Implement agent context isolation (devMode vs userMode)","description":"Page-specific agents (weather, stocks, music) get polluted with dev context they don't need.\n\n## Problem\n1. `CLAUDE.md` from project root gets loaded - contains dev instructions irrelevant to weather chat\n2. `~/.beads/PRIME.md` injected via hooks - dev workflow for issue tracking\n3. Results in confused responses mixing dev tasks with user queries\n\n## Proposed Solutions\n\n### Option A: Agent Mode Flag\nAdd `mode: \"user\" | \"dev\"` to agent.json:\n- `\"dev\"` (default): Current behavior, loads CLAUDE.md, respects hooks\n- `\"user\"`: Skips project context, bypasses dev hooks\n\n### Option B: Clean Invocation Path\nFor user-mode agents:\n- Set cwd to `~` or `/tmp` instead of project root\n- Use `--setting-sources user` to skip project settings\n- Add header to beads hook to check agent mode and skip\n\n### Option C: Separate API Endpoint\n- `/api/ai/chat` - dev mode (current)\n- `/api/ai/chat/user` - clean mode for page agents\n\n## Implementation\n1. Add `mode` field to agent schema in `lib/agents/types.ts`\n2. Update `lib/ai/claude.ts` to handle mode\n3. Update beads hook to check for user-mode agents\n4. Update page agents to set `mode: \"user\"`\n\n## Acceptance Criteria\n- [ ] Weather agent doesn't mention CLAUDE.md or beads\n- [ ] Stocks agent can chat without dev context\n- [ ] Dev agents (code-agent) still work as before\n- [ ] Clean separation between user and dev contexts","notes":"## Retro\n- What worked: Clear separation of concerns - AgentMode type in types.ts, cwd handling in claude.ts, mode config in agent.json files\n- What was unclear: Initially needed to trace through multiple files to understand how agent settings flow from selection to API call","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T15:39:01.267565597-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T16:23:38.736445976-05:00","closed_at":"2026-01-28T16:23:38.736445976-05:00","close_reason":"Done: Added AgentMode type (dev/user) to agent schema. User-mode agents now run in home directory to escape project context (CLAUDE.md, .beads/). Updated weather, files, music, research, and trading agents to use 'user' mode. Code-agent explicitly set to 'dev' mode. Changes flow through: types.ts -\u003e loader.ts -\u003e ai-workspace.tsx -\u003e useAIChat.ts -\u003e claude.ts","labels":["ready"]}
{"id":"personal-homepage-j75","title":"Add real YouTube comments to Video Player","description":"Display real YouTube comments for embedded videos.\n\n**Based on:** docs/research/video-player-integration.md (P2 feature)\n\n**Implementation:**\n1. Create `app/api/youtube/comments/route.ts`\n2. Fetch commentThreads.list (3 units per 100 comments)\n3. Display top-level comments with replies\n4. Sort by relevance or newest\n5. Lazy load more comments on scroll\n6. Replace mock comments in video-player.tsx\n\n**API Call:**\n```\nGET /commentThreads?part=snippet\u0026videoId=VIDEO_ID\u0026maxResults=100\n```\n\n**Display:**\n- Author avatar, name, date\n- Comment text (with expandable long comments)\n- Like count\n- Reply count with expand/collapse\n\n**Quota:** ~3 units per 100 comments","notes":"prepared.skills: frontend:frontend-development, backend:backend-development\nprepared.files: app/sections/video-player.tsx\nprepared.prompt: |\n  ## Feature: Add real YouTube comments to Video Player\n  \n  ### Context\n  Integrate real YouTube comments into the video player section.\n  \n  ### Key Files\n  - app/sections/video-player.tsx (video player section)\n  \n  ### Skills\n  Use /frontend:frontend-development for React UI\n  Use /backend:backend-development for YouTube API integration\n  \n  ### Approach\n  Need YouTube Data API for fetching comments. Check rate limits and auth.\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-j75","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T13:01:14.820773649-05:00","updated_at":"2026-01-11T03:10:16.379657539-05:00","closed_at":"2026-01-11T03:10:16.379657539-05:00","close_reason":"Feature already fully implemented - API route, hook, UI component, and settings integration all in place. Users need to add YouTube Data API v3 key in Settings to enable comments."}
{"id":"personal-homepage-jaj","title":"Investigate TabzChrome new tab search bar for Search Hub enhancements","description":"The TabzChrome new tab page has a search bar that matches against multiple sources:\n- Bookmarks\n- Terminal profiles\n- And more\n\nThis works really well and could inform enhancements to the Search Hub section or provide a unified quick-launch experience.\n\nReference: ~/projects/TabzChrome new tab page implementation","notes":"## Research Findings: TabzChrome New Tab Search Bar\n\n### 1. How the CommandBar Works\n\nThe search bar is implemented in `extension/newtab/components/CommandBar.tsx`. Key features:\n\n- **Single unified input** with `$` prefix aesthetic (terminal-style)\n- **Live suggestions dropdown** appearing as user types\n- **Auto-focus on mount** with 300ms delay for smooth UX\n- **Debounced bookmark search** (150ms) to avoid excessive API calls\n\n### 2. Search Sources\n\nThe CommandBar searches against **4 data sources**:\n\n1. **URLs** - Detects URL patterns (http/https or domain-like strings like `github.com`)\n2. **Terminal Profiles** - Matches profile name OR category via simple `includes()` string matching\n3. **Recent Directories** - File paths matching the query\n4. **Chrome Bookmarks** - Using `chrome.bookmarks.search()` API with 150ms debounce\n\nFallback: If no matches found and not a URL, suggests a Google search.\n\n### 3. Matching Logic\n\n**NOT fuzzy matching** - uses simple `toLowerCase().includes()` for profiles/dirs.\n\nMatching priorities in suggestion generation order:\n1. URL detection first (if looks like URL)\n2. Profile matches (up to 4 results)\n3. Directory matches (up to 3 results)\n4. Bookmark matches (up to 5 results)\n5. Fallback search suggestion\n\n### 4. UI Patterns\n\n**Keyboard Navigation:**\n- `ArrowDown/Tab` - Next suggestion\n- `ArrowUp/Shift+Tab` - Previous suggestion\n- `Enter` - Execute selected action\n- `Escape` - Close suggestions, clear input\n- `/` key (from NewTab.tsx) - Focus search from anywhere on page\n- `1-9` keys - Quick spawn profiles by index\n\n**Visual Design:**\n- Each suggestion has: icon, title, subtitle, action badge\n- Color-coded icons by type (profile color or amber for bookmarks)\n- Selected state with left border accent\n- CRT-inspired aesthetic with scanlines/noise overlays\n\n**Suggestion Item Structure:**\n```typescript\ninterface Suggestion {\n  type: 'profile' | 'url' | 'search' | 'dir' | 'bookmark'\n  id: string\n  title: string\n  subtitle?: string\n  icon?: React.ReactNode\n  color?: string\n  action: () =\u003e void\n}\n```\n\n### 5. Additional Features\n\n**Omnibox Integration** (`background/omnibox.ts`):\n- `term \u003ccommand\u003e` from Chrome address bar\n- Profile suggestions, URL handling, common commands\n- Max 5 suggestions\n\n**Web Shortcuts Grid:**\n- Pulls from Chrome bookmarks \"New Tab\" or \"Favorites\" folder\n- Google favicon API for icons\n- Grid layout with hover effects\n\n### 6. Enhancement Ideas for Search Hub\n\n**High-Impact:**\n1. **Unified quick-launch bar** - Single input that searches bookmarks + engines + AI services\n2. **Keyboard shortcuts** - `1-9` for engine selection, `/` to focus\n3. **Suggestion dropdown** - Show matching bookmarks/recent searches as user types\n4. **Type-ahead with categories** - Group suggestions by source (bookmark, engine, recent)\n\n**Medium-Impact:**\n1. **Command palette style** - `Cmd+K` to open overlay search\n2. **Shortcut prefixes** - `b:` for bookmarks, `g:` for google, etc.\n3. **Debounced search** - Prevent excessive API calls while typing\n4. **Mouse hover selection** - Update selected index on hover\n\n**Lower-Priority:**\n1. **Recent directories** integration (if terminal support exists)\n2. **Chrome bookmarks API** (would need extension context)\n3. **CRT visual effects** (might not fit homepage aesthetic)\n\n### Key Files Reference\n\n- `~/projects/TabzChrome/extension/newtab/components/CommandBar.tsx` - Main search component\n- `~/projects/TabzChrome/extension/newtab/NewTab.tsx` - Parent with keyboard shortcuts\n- `~/projects/TabzChrome/extension/newtab/styles/newtab.css` - Styling patterns\n- `~/projects/TabzChrome/extension/background/omnibox.ts` - Address bar integration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:06:59.135697628-05:00","created_by":"matt","updated_at":"2026-01-05T09:53:28.014469186-05:00","closed_at":"2026-01-05T09:53:28.014469186-05:00","close_reason":"Research complete: Documented TabzChrome CommandBar patterns, search sources, and enhancement ideas for Search Hub in issue notes"}
{"id":"personal-homepage-jjz","title":"Agent Cards: Create agent registry and CRUD operations","description":"Build agent storage system. localStorage for client, optional API routes for persistence. CRUD operations: create, read, update, delete agents. Include default/seed agents.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T18:24:51.700030531-05:00","created_by":"marci","updated_at":"2026-01-09T01:36:29.575683237-05:00","closed_at":"2026-01-09T01:36:29.575683237-05:00","close_reason":"Implemented agent registry with CRUD operations and seed agents","dependencies":[{"issue_id":"personal-homepage-jjz","depends_on_id":"personal-homepage-bnp","type":"blocks","created_at":"2026-01-08T18:25:39.728280675-05:00","created_by":"marci"}]}
{"id":"personal-homepage-jki","title":"Kanban: plugin list is hidden, small, and hard to read","description":"On the Kanban page, there is a list of plugins but it is hidden off in a corner and very small/hard to read. Needs better visibility and readability.","notes":"## Retro\nStraightforward UI improvement. Build had worktree symlink issues but TypeScript check passed cleanly. Changes focused on:\n- Collapsed state: wider, better contrast, badge, hover effects\n- Expanded state: better marketplace headers, component summary pills","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T20:41:00.893508143-05:00","updated_at":"2026-01-23T03:08:25.569857418-05:00","closed_at":"2026-01-23T03:08:25.569857418-05:00","close_reason":"Done: Improved collapsed state with wider width, better text contrast, plugin count badge, and hover effects. Enhanced expanded state with better marketplace headers and component summary styling.","labels":["kanban","ui"]}
{"id":"personal-homepage-jmg","title":"Update AI Workspace: Codex models and default working directory","description":"The AI Workspace page needs updates to match current Codex CLI v0.77.0 capabilities and better integrate with the sidebar working directory selector.","design":"## Current State\n\n### Codex Models (v0.77.0)\nThe current Codex models are:\n1. **gpt-5.2-codex** (default) - Latest frontier agentic coding model\n2. **gpt-5.1-codex-max** - Codex-optimized flagship for deep and fast reasoning\n3. **gpt-5.1-codex-mini** - Optimized for codex, cheaper, faster, but less capable\n4. **gpt-5.2** - Latest frontier model with improvements across knowledge, reasoning and coding\n\n### Codex CLI Flags\n- `-m, --model \u003cMODEL\u003e` - Model selection\n- `-a, --ask-for-approval` - Approval policy (untrusted, on-failure, on-request, never)\n- `-s, --sandbox` - Sandbox mode (read-only, workspace-write, danger-full-access)\n- `--full-auto` - Low-friction sandboxed automatic execution\n- `-C, --cd \u003cDIR\u003e` - Working directory\n- `--add-dir \u003cDIR\u003e` - Additional writable directories\n- `--search` - Enable web search\n\n### Directory Dropdown Issue\nThe directory dropdown in AI Workspace header currently defaults to \"No project context\". It should instead use the `workingDir` from the left sidebar's `useWorkingDirectory` hook as the default.\n\n## Implementation\n\n### 1. Pass workingDir to AI Workspace\n- In `app/page.tsx`, pass `workingDir` prop to `AIWorkspaceSection`\n- Update `AIWorkspaceSection` props interface to accept `workingDir?: string`\n\n### 2. Use workingDir as default\n- In `app/sections/ai-workspace.tsx`:\n  - Initialize `selectedProjectPath` with `initialProjectPath || workingDir || null`\n  - Update the effect that handles project path restoration\n\n### 3. Update Codex model options (if needed)\n- Check if `/api/ai/chat` route properly handles codex model selection\n- Verify `codexModel` setting in `ChatSettings` supports new model names\n- Consider adding reasoning effort support (low/medium/high)\n\n## Files to Modify\n- `app/page.tsx` - Pass workingDir prop\n- `app/sections/ai-workspace.tsx` - Accept and use workingDir prop\n- `lib/ai-workspace.ts` - Update ChatSettings if needed for new codex options\n- `app/api/ai/chat/route.ts` - Verify codex model passthrough","acceptance_criteria":"1. AI Workspace directory dropdown defaults to sidebar's working directory when set\n2. Users can still override to different project or \"No project context\"\n3. Codex model options match current CLI capabilities (gpt-5.2-codex, gpt-5.1-codex-max, gpt-5.1-codex-mini, gpt-5.2)\n4. Reasoning effort selection works if implemented","notes":"prepared.skills: frontend:frontend-development, backend:backend-development\nprepared.files: app/sections/ai-workspace.tsx, docs/ai-workspace-patterns.md\nprepared.prompt: |\n  ## Feature: Update AI Workspace - Codex models and default working directory\n  \n  ### Context\n  Add Codex model support and set default working directory for AI Workspace.\n  \n  ### Key Files\n  - app/sections/ai-workspace.tsx (main AI workspace section)\n  - docs/ai-workspace-patterns.md (AI patterns documentation)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /backend:backend-development for API integration\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-jmg","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T17:15:31.089989548-05:00","updated_at":"2026-01-11T03:11:03.412772818-05:00","closed_at":"2026-01-11T03:11:03.412772818-05:00","close_reason":"Completed: Updated Codex models to v0.77.0, added defaultWorkingDir prop","labels":["ai-workspace","codex","ux"]}
{"id":"personal-homepage-jpm","title":"Consolidate working directory selection across all sections","description":"## Problem\nWorking directory can be set in multiple places but they don't stay in sync:\n- Left sidebar (recent projects dropdown)\n- Settings section\n- Files page\n- Projects page\n- Kanban board\n- Profile/TabzChrome settings\n\nUnclear which takes priority. Changing one doesn't update others.\n\n## Solution\n1. **Single source of truth** - One global working directory state (likely in a context/provider)\n2. **Shared selector component** - Reusable WorkingDirSelector that all sections use\n3. **Sync all locations** - Changing in any location updates everywhere\n4. **Consistent UI** - Same dropdown/list pattern as sidebar (recent projects)\n5. **Persist preference** - Save to localStorage, restore on reload\n\n## Files to Audit\n- app/page.tsx (sidebar working dir)\n- app/sections/settings.tsx\n- app/sections/files.tsx (or files dashboard)\n- app/sections/projects-dashboard.tsx\n- app/sections/kanban.tsx\n- components/MusicPlayerProvider.tsx pattern (for context approach)\n- hooks/useSectionPreferences.ts (may need similar pattern)\n\n## Approach\n1. Create WorkingDirProvider context with global state\n2. Create shared WorkingDirSelector component\n3. Replace all individual selectors with shared component\n4. Wire up TabzChrome default workdir to same source\n5. Test all sections update when changed from any location\n\n## Acceptance\n- Changing workdir in sidebar updates all sections\n- Changing workdir in any section updates sidebar\n- Recent projects list is shared across all selectors\n- TabzChrome terminal commands use the global workdir\n- State persists across page reloads","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T14:46:14.580054062-05:00","created_by":"marci","updated_at":"2026-01-10T19:09:48.266897354-05:00","closed_at":"2026-01-10T19:09:48.266897354-05:00","close_reason":"Consolidated working directory to single source of truth via WorkingDirProvider context"}
{"id":"personal-homepage-jsm","title":"Global AI Drawer - persistent, collapsible, reusable chat component","description":"Convert AI Workspace from a dedicated section into a persistent drawer that lives at the layout level. Focus on making it beautiful, smooth, and reusable.\n\n**Goals:**\n- Persistent across navigation (doesn't unmount when changing sections)\n- Expand/collapse with smooth animations\n- Modern UI using shadcn AI components\n- Reusable pattern - extractable for other projects (like xterm terminals)\n\n**Backends (all should work):**\n- TabzChrome WebSocket → headless Claude\n- Docker Desktop → local LLMs\n- OpenRouter/direct API\n\n**Reference:** https://github.com/shadcnio/react-shadcn-components\n- 16 AI components: Conversation, Message, Prompt Input, Response, Code Block, etc.\n- Auto-scrolling chat container optimized for streaming\n- Framer Motion animations","design":"## Phase 1: Core Drawer\n\n### Component Structure\n```\ncomponents/ai/\n  AIDrawer.tsx          # Main drawer wrapper (Sheet/Drawer from shadcn)\n  AIChat.tsx            # Chat logic (extracted from ai-workspace)\n  AIMessage.tsx         # Individual message (use shadcn Message component)\n  AIPromptInput.tsx     # Input area (use shadcn Prompt Input)\n  AICodeBlock.tsx       # Code rendering (use shadcn Code Block)\n```\n\n### Layout Integration\n```tsx\n// app/layout.tsx\n\u003cAIDrawerProvider\u003e\n  {children}\n  \u003cAIDrawer /\u003e  {/* Always mounted, controlled by context */}\n\u003c/AIDrawerProvider\u003e\n```\n\n### Drawer States\n1. **Collapsed** - Small tab/button visible (\"AI\" or chat icon)\n2. **Minimized** - Header bar showing current conversation title\n3. **Expanded** - Full chat interface (right sidebar or bottom sheet)\n4. **Fullscreen** - Takes over viewport (optional)\n\n### Animations (Framer Motion)\n- Smooth expand/collapse transitions\n- Message appear animations\n- Streaming text reveal\n- Hover states on actions\n\n### Shadcn AI Components to Use\n- `Conversation` - Chat container with auto-scroll\n- `Message` - User/assistant message bubbles\n- `Prompt Input` - Input with submit button\n- `Response` - Streaming-optimized markdown\n- `Code Block` - Syntax highlighted code\n- `Loader` - Streaming indicator\n- `Tool` - Tool use display\n\n### Reusability Goal\nExtract core chat logic into a package/pattern that can be:\n- Imported into other projects\n- Configured with different backends\n- Styled with project's theme\n\nLike xterm terminals - drop in, configure, done.\n\n## Phase 2 (Future)\n- Section → Agent surfacing\n- Context passing from current page\n- Beads Agent for kanban","acceptance_criteria":"- [ ] AI chat in persistent drawer at layout level\n- [ ] Expand/collapse with smooth animations\n- [ ] Streaming works while navigating sections\n- [ ] Uses shadcn AI components (Message, Conversation, Prompt Input)\n- [ ] All backends work (TabzChrome, Docker, API)\n- [ ] Existing conversations preserved\n- [ ] Minimized state shows conversation indicator\n- [ ] Code blocks render with syntax highlighting\n- [ ] Tool use displays cleanly\n- [ ] Pattern is extractable/reusable","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-22T22:32:44.161551084-05:00","updated_at":"2026-01-22T23:41:38.002057565-05:00","closed_at":"2026-01-22T23:41:38.002057565-05:00","close_reason":"Broken down into subtasks: 9y2 (scaffold), abv (extract logic), yj4 (shadcn components), 2y4 (animations), dtv (backend wiring)","labels":["ai","ux"]}
{"id":"personal-homepage-k2xi","title":"Prompts Playground Phase 2: Multi-model batch sending with CLI invocation","notes":"## Retro\n- What worked: Clean separation of model invoker service, API route, and UI components. Parallel invocation with Promise.allSettled worked well.\n- What was unclear: Nothing major - Phase 1 foundation was solid to build on.","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T22:48:00.376171643-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T23:45:39.229781728-05:00","closed_at":"2026-01-28T23:45:39.229781728-05:00","close_reason":"Done: Implemented multi-model batch sending with CLI invocation. Created ModelInvoker service (lib/model-invoker.ts), API route (/api/prompts-playground/invoke), PromptInput component with Send to All, updated DynamicBrowserPanel with response/loading states, and integrated parallel model invocation in prompts-playground.tsx.","dependencies":[{"issue_id":"personal-homepage-k2xi","depends_on_id":"personal-homepage-c1wu","type":"discovered-from","created_at":"2026-01-28T22:48:00.377714116-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-kj9","title":"Bookmarks: folder options too far from bookmark on wide monitors","description":"On large monitors, when hovering a bookmark the folder action options appear all the way on the other side of the screen. This is awkward UX - the options should be closer to the hovered item (like how terminals have the plan button closer to their option).","notes":"## Retro\nStraightforward fix - just added align=\"end\" to two DropdownMenuContent components in the list view section.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T20:40:59.231800293-05:00","updated_at":"2026-01-23T03:04:46.763277704-05:00","closed_at":"2026-01-23T03:04:46.763277704-05:00","close_reason":"Done: Added align=end to folder and bookmark dropdown menus in list view","labels":["bookmarks","responsive","ux"]}
{"id":"personal-homepage-kjv","title":"Add prompt generation API endpoint","description":"Create a lightweight AI endpoint for generating worker prompts from beads issues. Uses a cheap model (Haiku or GPT-5-mini) to turn issue context into a well-structured worker prompt.\n\n## Endpoint\nPOST /api/beads/issues/[id]/generate-prompt\nBody: { workspace: string }\nResponse: { prompt: string }\n\n## Implementation\n1. Fetch issue details (title, description, labels, dependencies)\n2. Build a prompt asking AI to create a worker prompt\n3. Use cheap model backend (haiku preferred)\n4. Return generated prompt text\n\n## System prompt for generation\n```\nYou are a worker prompt writer. Given a beads issue, create a clear, actionable prompt that a Claude worker could follow to complete the task.\n\nInclude:\n- Clear objective\n- Key files to modify (if inferrable)\n- Acceptance criteria\n- Any constraints from dependencies\n\nKeep it concise but complete.\n```\n\n## Files to create\n- app/api/beads/issues/[id]/generate-prompt/route.ts\n\n## Dependencies\n- Uses existing /api/ai/chat infrastructure for AI calls","notes":"## Retro\n- Straightforward implementation following existing patterns\n- Used /api/beads/issues/[id]/route.ts as template for route handling and workspace validation\n- Used /api/ai/chat/route.ts as template for SSE stream parsing\n- Build passes, TypeScript check passes\n- Lint command has issue with worktree path but code compiles correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-23T02:07:12.196139111-05:00","updated_at":"2026-01-23T02:48:02.019584704-05:00","closed_at":"2026-01-23T02:48:02.019584704-05:00","close_reason":"Done: Created POST /api/beads/issues/[id]/generate-prompt endpoint that fetches issue details, builds context, calls Claude AI, and returns generated worker prompt","labels":["ai","api","kanban","wave-1"]}
{"id":"personal-homepage-km3n","title":"Feature: Files page settings (depth, font size)","description":"The Files page was ported from TabzChrome but is missing settings that exist there:\n\n## Missing Settings\n1. **Max depth** - How deep to recurse into directories\n2. **Font size** - Adjustable font size for file tree\n\n## Reference\nCheck TabzChrome file browser settings for the original implementation.\n\n## Current State\nUnknown what max depth is being used - may be hardcoded or using a default.","notes":"## Retro\n- What worked: Reference implementation from TabzChrome was clear, adding settings to existing FilesContext avoided prop drilling\n- What was unclear: Initially considered creating separate context but found existing FilesContext was the right place","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-28T22:25:43.803772692-05:00","updated_at":"2026-01-28T23:06:57.424883376-05:00","closed_at":"2026-01-28T23:06:57.424883376-05:00","close_reason":"Added settings UI for Files page with font size slider (12-24px), font family dropdown, and tree depth slider (1-10). Settings persist in localStorage via useFileViewerSettings hook, integrated into FilesContext for use across components.","labels":["files","ready","settings","ui"]}
{"id":"personal-homepage-kw1","title":"Kanban: issue description textarea too small (only 4 lines)","description":"When clicking on a Kanban card to view/edit, the description textarea only shows ~4 lines. This makes it hard to read or write longer descriptions.\n\nShould either:\n- Auto-expand based on content\n- Have a larger minimum height\n- Be resizable","notes":"## Retro\nStraightforward fix - changed min-h-[100px] to min-h-[200px], added max-h-[400px], and changed resize-none to resize-y in TaskDetailsForm.tsx:111.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-22T23:48:59.770644055-05:00","updated_at":"2026-01-23T03:04:15.101330639-05:00","closed_at":"2026-01-23T03:04:15.101330639-05:00","close_reason":"Increased textarea from 100px to 200px min-height with 400px max, enabled resize-y","labels":["kanban","ui","ux","wave-1"]}
{"id":"personal-homepage-kz3","title":"Fix TabzChrome profile import - spawn terminals and fix metadata","description":"Issues with importing profiles from TabzChrome:\n\n1. **Terminals sent to queue instead of spawned** - Imported terminals go to queue rather than spawning directly, which loses their metadata/theme settings\n\n2. **Reference docs used as working directory** - The merge profiles option is incorrectly using attached reference doc paths (e.g. `~/projects/TabzChrome/docs/reference/claude-code.md`) as the working directory instead of the actual project path\n\nShould spawn terminals directly to preserve theme/metadata, and correctly parse the working directory from TabzChrome bookmarks.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T16:45:21.699432125-05:00","updated_at":"2026-01-08T13:20:20.813386354-05:00","closed_at":"2026-01-08T13:20:20.813386354-05:00","close_reason":"fix(bookmarks): fix TabzChrome profile import - spawn terminals and extract workingDir","labels":["import","tabz-chrome","terminal"]}
{"id":"personal-homepage-l3dt","title":"Feature: Consolidate AI to right sidebar / AI Workspace","description":"Consider moving all AI chat functionality to the right sidebar / AI Workspace page instead of having separate chat in kanban boards.\n\n## Current\n- AI chat embedded in kanban board\n- Separate AI Workspace / sidebar\n\n## Considerations\n- Keep the nice chat UI styling from kanban\n- Unified experience in one place\n- Context about current task (beads issue) should still be available\n- May want to keep a 'quick chat' option in kanban that opens sidebar","notes":"## Retro\n- What worked: Clean separation of concerns - AI drawer handles all chat functionality, kanban just passes task context\n- What was unclear: Nothing major, approach was straightforward once architecture was understood","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:06:25.161732657-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T21:33:07.503423713-05:00","closed_at":"2026-01-28T21:33:07.503423713-05:00","close_reason":"Consolidated AI chat to sidebar. Removed embedded chat tab from TaskModal, added button to open AI sidebar with task context. Users now get full AI Workspace features when chatting about tasks.","labels":["ai-workspace","architecture","ready"]}
{"id":"personal-homepage-l7b","title":"Photo Gallery: Add URL input and file picker for custom images","description":"Enhance Photo Gallery to accept custom images beyond the mock Unsplash data.\n\nFeatures to add:\n1. **URL Input**: Text field to paste image URLs\n2. **File Picker**: Button to select local image files (browser File API)\n3. **Drag-and-Drop**: Drop zone for image files\n4. **Persistence**: Save custom gallery to localStorage or GitHub (like Quick Notes)\n\nImplementation:\n- Add 'Add Photo' button/modal in gallery toolbar\n- URL input with preview before adding\n- File input accepting image/* types\n- Convert files to blob URLs for display\n- Store metadata (title, tags) for each added image\n- Option to clear/reset to demo images\n\nNice-to-have:\n- EXIF extraction from uploaded files\n- Bulk import from folder (via TabzChrome)\n- Album organization for custom images","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T10:40:59.836559298-05:00","created_by":"matt","updated_at":"2026-01-05T11:45:51.814144705-05:00","closed_at":"2026-01-05T11:45:51.814144705-05:00","close_reason":"Implemented: Photo Gallery custom image upload with URL input, file picker, drag-and-drop, localStorage persistence, and reset to demo option","dependencies":[{"issue_id":"personal-homepage-l7b","depends_on_id":"personal-homepage-dds","type":"blocks","created_at":"2026-01-05T10:41:10.772450001-05:00","created_by":"matt"}]}
{"id":"personal-homepage-lao8","title":"Polish: Re-crop agent avatars to be properly centered","description":"The 6 agent avatars were auto-cropped from a ChatGPT-generated grid image but the circles aren't perfectly centered in each crop.\n\n## Current State\n- Avatars work and display correctly\n- But circles are slightly off-center (shifted right in most)\n\n## Files\n- `public/avatars/*.png` - The avatar images to re-crop\n- Original source: `C:\\Users\\marci\\Downloads\\workspaceavatars.png`\n\n## Fix\nManually crop each avatar in an image editor to center the circular icon properly.\n\n## Agents\n- code-agent.png\n- files-agent.png\n- music-dj.png\n- research-librarian.png\n- trading-agent.png\n- weather-agent.png","notes":"## prepared.prompt\n\n**Task:** Re-crop 6 agent avatars to center the circular icons properly.\n\nThe avatars were auto-cropped from a grid and the circles are slightly off-center (shifted right in most cases). Your job is to manually adjust each crop to perfectly center the circular icon.\n\n**Files to edit:**\n- /home/marci/projects/personal-homepage/public/avatars/code-agent.png\n- /home/marci/projects/personal-homepage/public/avatars/files-agent.png\n- /home/marci/projects/personal-homepage/public/avatars/music-dj.png\n- /home/marci/projects/personal-homepage/public/avatars/research-librarian.png\n- /home/marci/projects/personal-homepage/public/avatars/trading-agent.png\n- /home/marci/projects/personal-homepage/public/avatars/weather-agent.png\n\n**What to do:**\n1. Open each PNG in an image editor (GIMP, Photoshop, or equivalent)\n2. Identify the circular agent avatar within each image\n3. Re-crop the image so the circle is perfectly centered with equal padding on all sides\n4. Save each file back to its original location (overwrite)\n5. Commit all 6 changes with a descriptive message\n\n**Tips:**\n- Use ImageMagick if scripting: `convert -gravity Center -crop WxH+0+0 input.png output.png`\n- Or use a visual editor and eyeball the centering\n- The circles should be symmetric and centered both horizontally and vertically\n- Maintain the same file format and approximately similar dimensions\n\n**Acceptance Criteria:**\n- [ ] All 6 avatars are re-cropped\n- [ ] Circular icons are perfectly centered in each image\n- [ ] No artifacts or quality loss\n- [ ] All files committed to git with clear message\n- [ ] Changes tested visually (avatars display centered in the UI)\n\nWhen done, commit your changes and run `bd close personal-homepage-lao8`","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-23T19:42:05.524253436-05:00","updated_at":"2026-01-28T14:59:22.982458089-05:00","closed_at":"2026-01-28T14:59:22.982458089-05:00","close_reason":"Done: Re-cropped all 6 agent avatars to center circular icons properly using ImageMagick","labels":["design","gate:visual-qa","polish","ready"]}
{"id":"personal-homepage-lvrr","title":"Add Claude Code context hooks for accurate token tracking","description":"Check Claude Code changelog for new context/context-remaining hooks and integrate them into AI Workspace for accurate token tracking.\n\n## Context\n- Current implementation uses Claude CLI session token counts which can be misleading\n- Claude Code recently added hooks for context tracking per release notes\n- These hooks would provide real-time accurate context usage\n\n## Tasks\n1. Check Claude Code changelog/docs for context hooks API\n2. Integrate hooks into AI Workspace context indicator\n3. Replace/supplement current token estimation with hook data","notes":"## Retro\n- What worked: Claude CLI stream-json already provides good usage data in result events; accumulating this across messages gives accurate context tracking\n- What was unclear: Initially unclear if there were direct context hooks - research confirmed there are not, but the existing usage data in stream events is sufficient\n- Implementation: Added CumulativeUsage type, accumulateUsage helper, tracking in useAIChat hook, enhanced context indicator with detailed breakdown","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-26T00:49:23.865924384-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T14:58:01.224921416-05:00","closed_at":"2026-01-28T14:58:01.224921416-05:00","close_reason":"Done: Integrated cumulative token tracking from Claude CLI usage data. Added CumulativeUsage type with contextTokens tracking, accumulateUsage helper, and enhanced context indicator showing input/output/cache breakdown with usage source badge (tracked/actual/estimated).","labels":["ready"]}
{"id":"personal-homepage-m33","title":"Investigate integrating portfolio-style-guides media pages","description":"Explore feasibility of adding the music-player, video-player, and photo-gallery pages from ~/projects/portfolio-style-guides into personal-homepage.\n\nThese pages have nice styling and could potentially be:\n- Combined into a unified media section\n- Wired up to use local system files/directories\n- Integrated with existing theme system\n\nThis is an investigation task to assess:\n- What would need to change to integrate them\n- How to handle local file system access\n- Whether they should be separate sections or combined\n- Any dependencies or conflicts with existing code","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T22:19:12.716265627-05:00","created_by":"matt","updated_at":"2026-01-04T23:41:39.558189887-05:00","closed_at":"2026-01-04T23:41:39.558189887-05:00","close_reason":"Research completed: documented media integration analysis for music-player, video-player, and photo-gallery components from portfolio-style-guides"}
{"id":"personal-homepage-mag","title":"Add testing infrastructure and initial tests","description":"Set up testing infrastructure for the project. Currently no tests exist.\n\n**Setup Tasks:**\n1. Choose testing framework (Vitest recommended for Next.js)\n2. Add testing dependencies\n3. Configure test environment\n4. Add test scripts to package.json\n\n**Initial Tests to Add:**\n1. Unit tests for utility functions (lib/*.ts)\n2. Hook tests (hooks/*.ts) - especially complex ones like useSpotifyPlayer\n3. API route tests (app/api/**)\n4. Component smoke tests for key sections\n\n**Framework Options:**\n- **Vitest** (recommended): Fast, Vite-based, great DX\n- **Jest**: More established, heavier setup\n- **Playwright**: For E2E tests\n\n**Suggested package.json scripts:**\n```json\n\"test\": \"vitest run\",\n\"test:watch\": \"vitest\",\n\"test:coverage\": \"vitest run --coverage\"\n```\n\n**Priority areas for tests:**\n1. lib/spotify.ts - OAuth PKCE flow\n2. lib/video-utils.ts - if exists\n3. hooks/useAuth.ts - auth state\n4. API routes - request/response validation","notes":"prepared.skills: backend:backend-development\nprepared.files: package.json, tsconfig.json\nprepared.prompt: |\n  ## Task: Add testing infrastructure and initial tests\n  \n  ### Context\n  Set up testing infrastructure (Jest or Vitest) and create initial tests.\n  Currently NO test framework exists in the project.\n  \n  ### Key Files\n  - package.json (add test dependencies)\n  - tsconfig.json (TypeScript config)\n  \n  ### Skills\n  Use /backend:backend-development for testing setup\n  \n  ### Approach\n  1. Choose test framework (Vitest recommended for Next.js)\n  2. Add dependencies and config\n  3. Create example tests for a few components\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-mag","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-05T15:05:56.827032781-05:00","updated_at":"2026-01-11T03:11:59.444654663-05:00","closed_at":"2026-01-11T03:11:59.444654663-05:00","close_reason":"Testing infrastructure added with Vitest, 28 tests passing"}
{"id":"personal-homepage-mkmn","title":"Projects: Upgrade Kanban tab to beads-integrated version","description":"Replace the simple localStorage-based ProjectKanban.tsx with the beads-integrated kanban system.\n\n## Current State\n- `components/projects/ProjectKanban.tsx` uses localStorage, drag-drop columns\n- `app/components/kanban/` has full beads-integrated system with visualizations\n\n## Tasks\n- [ ] Import beads kanban components into ProjectKanban tab\n- [ ] Wire up to project's beads directory (if exists) or show empty state\n- [ ] Keep column customization UI or migrate to beads labels\n- [ ] Remove old localStorage migration code\n\n## Files\n- Replace: `components/projects/ProjectKanban.tsx`\n- Use: `app/components/kanban/board/`, `hooks/useBeadsBan.ts`\n\n## Acceptance Criteria\n- Kanban tab shows beads issues for the project\n- Visualizations (dependency graph, timeline) available\n- Falls back gracefully if project has no .beads/ directory","notes":"## Retro\n- Straightforward replacement - KanbanBoard already handles all complexity\n- Component went from ~790 lines to ~56 lines\n- No issues with implementation - existing useBeadsBan hook works perfectly\n- Build passed, lint has worktree config issues (not related to changes)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-23T18:49:15.292053119-05:00","created_by":"GGPrompts","updated_at":"2026-01-23T18:56:13.494039158-05:00","closed_at":"2026-01-23T18:56:13.494039158-05:00","close_reason":"Done: Replaced localStorage ProjectKanban with beads-integrated KanbanBoard. Passes project.local.path as workspace, handles remote-only repos gracefully.","labels":["frontend","gate:test-runner","kanban","projects","ready"]}
{"id":"personal-homepage-mqw","title":"Music Audit: Fix JSON parse error in spotify.ts removeTracks","description":"## Bug: JSON Parse Error in removeTracks\n\n### Root Cause Analysis\nThe `removeTracks` function in `lib/spotify.ts:654-658` calls `spotifyFetch` with a DELETE request:\n\n```typescript\nexport async function removeTracks(trackIds: string[]): Promise\u003cvoid\u003e {\n  await spotifyFetch('/me/tracks', {\n    method: 'DELETE',\n    body: JSON.stringify({ ids: trackIds }),\n  })\n}\n```\n\nThe issue is in `spotifyFetch` at line 474 which always calls `response.json()`:\n- DELETE requests to `/me/tracks` return **204 No Content** on success\n- Line 465-467 handles 204 correctly by returning `{} as T`\n- **BUT** the Spotify API sometimes returns **200 OK with empty body** instead of 204\n\n### Fix Location\n`lib/spotify.ts` line ~470-474:\n```typescript\n// Current code tries to parse JSON even for empty responses\nreturn response.json()\n```\n\n### Solution\nAdd empty body check before JSON parsing:\n```typescript\nconst text = await response.text()\nif (!text) return {} as T\nreturn JSON.parse(text)\n```\n\n### Affected Components\n- `components/PersistentMusicDrawer.tsx` line 114 - toggleLike function\n- `components/SpotifyPlayer.tsx` line 378 - toggleLike function\n\n### Test Steps\n1. Start music playback\n2. Click heart icon to unlike a track\n3. Verify no console error about JSON parsing","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-09T14:43:18.229677811-05:00","created_by":"marci","updated_at":"2026-01-09T15:16:00.815769052-05:00","closed_at":"2026-01-09T15:16:00.815769052-05:00","close_reason":"Fixed in commits 944f992 and 2cfa67a"}
{"id":"personal-homepage-ms01","title":"Bug: Agent avatars display as text path instead of image in chat messages","description":"In AI Workspace chat messages, agent avatars show the raw path text `/avatars/files-agent.png` instead of rendering the actual image.\n\n## Expected\nAgent avatar image displays next to assistant messages\n\n## Actual\nShows literal text: `/avatars/files-agent.png`\n\n## Likely Cause\nChatMessage component probably checks `isEmoji()` or `isUrl()` but the path-based avatars aren't being recognized as images, so they fall through to text display.\n\n## Key Files\n- `components/ai/ChatMessage.tsx` - Chat message rendering\n- `app/sections/ai-workspace.tsx` - Where agent avatar is passed\n- Same `isUrl()` fix needed that was applied to AgentCard.tsx\n\n## Fix\nUpdate avatar rendering in ChatMessage to recognize `/path` format as valid image source (same pattern as AgentCard.tsx fix).","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-23T19:40:11.989612944-05:00","updated_at":"2026-01-23T19:41:19.15040896-05:00","closed_at":"2026-01-23T19:41:19.15040896-05:00","close_reason":"Fixed: Added path check in ai-workspace.tsx to render img tag for path-based avatars","labels":["ai-workspace","bug","quick-fix"]}
{"id":"personal-homepage-ms2","title":"Enhance Agent Cards with --plugin-dir spawning and TabzChrome profiles","description":"Extend the Agent Cards System (bwt) with isolated agent spawning via --plugin-dir and TabzChrome saved profiles.\n\n## Background Research (from TabzBeads)\n- **TabzBeads-0jn**: Confirmed `--plugin-dir` bypasses enabled/disabled plugins\n- **TabzBeads-xa0**: TabzChrome profiles can pre-configure agent terminals\n- Disabled plugins' skills load when spawned with `--plugin-dir`\n- Skill naming: `\u003cversion\u003e:\u003cskill-name\u003e` when loaded via plugin-dir\n\n## Current State (Already Done)\n- Agent gallery/selector UI (ibf) ✅\n- Selector knowledge in prompts for tabz automation (ab4) ✅\n- Agent builder wizard (afg) ✅\n- AI avatar generation (6e0) ✅\n\n## Enhancement\nEach agent card could link to:\n1. **Plugin path** - `--plugin-dir` for section-specific skills\n2. **TabzChrome profile** - pre-configured terminal (window, model, MCP)\n3. **Spawn action** - one-click isolated agent terminal\n\n## Implementation\n1. Add `pluginPath` and `profileId` fields to Agent data model\n2. Agent builder wizard step: select plugins + profile\n3. Spawn button calls TabzChrome API with profile + `--plugin-dir`\n4. skill-picker integration: auto-match task → agent → spawn\n\n## Benefits\n- Each section agent runs in isolated context\n- Section-specific plugins without bloating main session\n- Pre-configured profiles for consistent spawning\n- Natural language dispatch via skill-picker\n\n## Related\n- TabzBeads-0jn: Agent-scoped plugins via --plugin-dir\n- TabzBeads-xa0: Conductor + TabzChrome profiles integration\n- personal-homepage-bwt: Epic: Specialized Agent Cards System","notes":"## Retro\n- Implementation was straightforward, following existing patterns\n- AgentBuilderWizard step indexing required careful update when inserting new step\n- TabzBridge hook already had spawnTerminal method ready to use\n- Spawn button uses emerald color scheme when config is present to indicate plugin isolation\n- profileId field added but not yet fully utilized (future: TabzChrome profile selection)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-12T01:53:01.633146556-05:00","updated_at":"2026-01-21T01:34:41.899939587-05:00","closed_at":"2026-01-21T01:34:41.899939587-05:00","close_reason":"Implemented agent spawning with plugin isolation and TabzChrome profiles: added pluginPath/profileId fields, new wizard step, and Spawn button with TabzBridge integration","labels":["agents","architecture","gate:codex-review","plugins","ready","tabz"]}
{"id":"personal-homepage-nb9","title":"AI Workspace: spaces being removed from chat messages","description":"In the AI Workspace chats, spaces are being removed from messages. This is similar to the issue seen in the file tree read aloud feature.","notes":"## Investigation\n\n**Same root cause as c9y** - fix c9y first, this will be resolved.\n\nThe spaces issue originates in the chat API streaming, not in AI Workspace display.\n\n## Dependency\nThis is downstream of c9y - once the newline stripping is fixed in the chat route, both TTS and chat display will work.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T20:41:03.425962409-05:00","updated_at":"2026-01-22T23:41:49.195250894-05:00","closed_at":"2026-01-22T23:41:49.195250894-05:00","close_reason":"Dependent issue c9y was fixed (regex change). Verify in AI Workspace - reopen if spaces still being removed.","labels":["ai-workspace","text-processing"],"dependencies":[{"issue_id":"personal-homepage-nb9","depends_on_id":"personal-homepage-c9y","type":"blocks","created_at":"2026-01-21T20:47:32.749463352-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-nle","title":"codex-review: 5t2 (Dual Device Selectors)","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-20T23:36:57.925774663-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:01:42.549345471-05:00","closed_at":"2026-01-21T00:01:42.549345471-05:00","close_reason":"PASS: Code review approved. Centralized device selection with optimistic updates and proper error rollback. Single source of truth via activeDeviceId syncs with SDK and remote playback.","labels":["codex-review","gate"],"dependencies":[{"issue_id":"personal-homepage-nle","depends_on_id":"personal-homepage-5t2","type":"blocks","created_at":"2026-01-20T23:37:11.312133874-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-nlpj","title":"Agent config transparency: file-based settings with Open Folder","description":"**Goal:** Make agent configurations transparent and self-serviceable.\n\n**Current state (opaque):**\n- AI Workspace has temperature/system prompt settings in UI\n- Unclear where configs actually live\n- Have to ask Claude to understand/modify agent setup\n\n**Desired state (BeadsHive-style):**\n```\npersonal-homepage/\n├── agents/\n│   ├── kanban-planner/\n│   │   ├── CLAUDE.md      ← System prompt\n│   │   ├── agent.json     ← Model, temperature, tools, skills\n│   │   └── skills/        ← Page-specific skills (optional)\n│   ├── file-explorer/\n│   │   ├── CLAUDE.md\n│   │   └── agent.json\n│   └── ...\n```\n\n**Features:**\n- \"Open Folder\" button in AI Workspace settings → reveals agent source directory\n- Settings UI reads/writes actual files (not hidden state)\n- Create new agent = create folder with template files\n- Copy existing agent folder to duplicate configuration\n\n**Benefits:**\n- Self-sufficient agent management\n- See exactly what each agent is configured with\n- Edit CLAUDE.md directly in preferred editor\n- Follows proven BeadsHive pattern","notes":"## Retro\n- Straightforward implementation following the task prompt\n- No blockers encountered\n- seed-agents.ts is still present but no longer used by registry endpoint - could be removed in follow-up\n- Build passes, all endpoints working","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-23T17:29:18.452275016-05:00","created_by":"GGPrompts","updated_at":"2026-01-23T18:58:24.249269807-05:00","closed_at":"2026-01-23T18:58:24.249269807-05:00","close_reason":"Done: Added file-based agent config with agents/ directory structure and Open Folder button in AI Workspace settings","labels":["ai-workspace","dev-experience","gate:test-runner","ready"]}
{"id":"personal-homepage-nmt","title":"Add Run/Check/Explain Script actions","description":"Port script actions from TabzChrome\n\nFeatures:\n- Run Script - execute script in new terminal (.sh, .py, .js, .ts, etc.)\n- Check / Dry Run - syntax check or dry run if supported\n- Explain Script - use Claude to analyze and explain script\n  - Displays result in expandable menu\n  - Optional TTS for explanation\n\nRequires: TabzChrome spawn API and Claude integration\n\nReference: TabzChrome/extension/dashboard/components/files/FileTree.tsx (lines 853-928)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T01:13:11.524985252-05:00","created_by":"marci","updated_at":"2026-01-10T19:10:09.196209125-05:00","closed_at":"2026-01-10T19:10:09.196209125-05:00","close_reason":"Implemented script actions (Run, Check, Explain) in file tree context menu"}
{"id":"personal-homepage-npw","title":"Add Claude Code Analytics Section","description":"Create a new section to display Claude Code usage analytics. Research showed claude-code-templates has a --analytics flag that launches a dashboard at localhost:3333 showing token usage, conversation stats, and session monitoring. We could integrate this or build a custom section using the same data sources.","design":"Options:\n1. Embed/proxy claude-code-templates --analytics dashboard\n2. Build custom section using Anthropic Analytics API\n3. Parse local Claude Code session data\n\nRecommended stack: TanStack Query + Recharts (existing patterns)","acceptance_criteria":"- Display token usage metrics\n- Show conversation counts\n- Track session activity\n- Real-time updates via polling or WebSocket","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-11T04:08:41.889809744-05:00","created_by":"marci","updated_at":"2026-01-11T04:25:45.103753586-05:00","closed_at":"2026-01-11T04:25:45.103753586-05:00","close_reason":"Added Analytics section with token usage chart, session list, and conversation stats","labels":["analytics","new-section","research-needed"]}
{"id":"personal-homepage-nzq","title":"Add audio file playback in file tree","description":"Port audio playback from TabzChrome\n\nFeatures:\n- Play/Stop buttons in context menu for audio files\n- Supports .mp3, .wav, .ogg, .m4a, .webm, .flac, .aac\n- Direct playback via TabzChrome backend\n- Endpoint: /api/audio/local-file\n\nReference: TabzChrome/extension/dashboard/components/files/FileTree.tsx (lines 702-751)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T01:13:00.0619149-05:00","created_by":"marci","updated_at":"2026-01-10T19:19:35.728194046-05:00","closed_at":"2026-01-10T19:19:35.728194046-05:00","close_reason":"feat(files): add audio file playback in file tree context menu"}
{"id":"personal-homepage-o0y","title":"AI Workspace: Add Codex MCP server for persistent multi-turn chat","description":"Replace codex exec (one-shot) with codex mcp-server for true session continuity, matching Claude Code's --resume capability. Uses @modelcontextprotocol/sdk for MCP client integration.","design":"## Goal\n\nGive Codex the same multi-turn chat experience as Claude Code - persistent sessions without re-sending conversation history.\n\n## Reference Implementation\n\nSee **docs/research/codex-mcp-integration.md** for full code samples including:\n- `lib/ai/codex-mcp.ts` - MCP client wrapper\n- `app/api/ai/chat/codex-mcp/route.ts` - SSE streaming route\n- Fallback strategies and operational tips\n\n## Current State\n\n- `lib/ai/codex.ts` uses `codex exec` (one-shot)\n- Manually builds \"User: / Assistant:\" prompt concatenation\n- No session continuity - context grows with each message\n\n## Solution: codex mcp-server\n\nCodex CLI can run as an MCP server (`codex mcp-server`) exposing two tools:\n- `codex()` - start a conversation, returns conversationId\n- `codex-reply()` - continue conversation with conversationId\n\n## Architecture\n\n```\nBrowser \u003c--\u003e SSE \u003c--\u003e Next.js API \u003c--\u003e stdio \u003c--\u003e codex mcp-server (per conversation)\n                           |\n                      JSONL persistence\n```\n\n## Known Limitation (IMPORTANT)\n\nGitHub issue #8580: `codex()` tool does NOT reliably return `conversationId`, breaking `codex-reply()`.\n\n**Primary fallback**: Keep one process per chat alive (session stays in-memory).\n\n## Files to Create/Modify\n\n- `lib/ai/codex-mcp.ts` - NEW: MCP client wrapper\n- `app/api/ai/chat/codex-mcp/route.ts` - NEW: SSE streaming route\n- `app/sections/ai-workspace.tsx` - Update to use new route\n- `lib/ai-workspace.ts` - Add codexConversationId to types","acceptance_criteria":"1. Codex chat maintains session without re-sending history\n2. Tool use visibility in UI (if Codex emits tool events)\n3. Graceful fallback if conversationId unavailable\n4. Process cleanup on idle timeout\n5. SSE streaming to browser works","notes":"completed_at: 2026-01-11T03:32:04-05:00, commit: 8711e8d, complexity: complex","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T18:06:32.778700953-05:00","updated_at":"2026-01-11T03:32:09.870510727-05:00","closed_at":"2026-01-11T03:32:09.870510727-05:00","close_reason":"Implemented Codex MCP server integration for persistent multi-turn chat","labels":["ai-workspace","codex","mcp","streaming"]}
{"id":"personal-homepage-o5k","title":"Fix GitHub Activity contribution graph showing minimal activity","description":"The Activity section on the GitHub Activity page only shows 2 green squares despite having significant activity over the past year.\n\nIssues to investigate:\n1. Is the GitHub API being called correctly for contribution data?\n2. Are we using the right endpoint (contributions require GraphQL API)?\n3. Is the date range correct (should show last 12 months)?\n4. Is the data being parsed/rendered correctly?\n5. Are there authentication/scope issues limiting the data returned?\n\nNote: GitHub contribution data requires the GraphQL API with the correct query - the REST API doesn't provide contribution calendar data directly.\n\nExpected behavior:\n- Show accurate contribution graph matching github.com profile\n- Display last 12 months of activity\n- Color intensity should reflect activity level per day","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T11:10:49.224844792-05:00","created_by":"matt","updated_at":"2026-01-05T11:22:31.579819921-05:00","closed_at":"2026-01-05T11:22:31.579819921-05:00","close_reason":"Implemented: GitHub contribution graph now uses GraphQL API for accurate contribution data matching github.com profile"}
{"id":"personal-homepage-ofy6","title":"Fix Agent Editor: Make CLI flag reference interactive command builder","description":"The Agent Editor CLI flag reference panel shows copyable flags but there's no way to add them to the spawn command.\n\n## Current Problems\n\n1. CLI Flag Reference shows flags but they're just copyable text - can't add to command\n2. Backend dropdown is read-only - can't change backend\n3. TabzChrome profile field doesn't apply to personal-homepage agents\n4. No way to edit CLI flags beyond Working Dir and Plugin Dir fields\n\n## Expected Behavior\n\n1. **Interactive flag reference** - clicking a flag adds it to the command builder\n2. **Command builder** - text area or structured UI showing the full spawn command being built\n3. **Working dir** - keep as optional field\n4. **Remove TabzChrome profile** - not relevant for AI chat agents\n\n## Files\n\n- components/agents/AgentBuilderWizard.tsx - Main editor component\n- lib/ai/cli-flags.ts - Flag definitions (already has good data)\n\n## Acceptance Criteria\n\n- [ ] Clicking a flag in reference panel adds it to spawn command\n- [ ] Can see/edit full spawn command being built\n- [ ] Can remove flags from command\n- [ ] Remove TabzChrome profile field\n- [ ] Working dir remains optional","notes":"## Retro\n- Straightforward implementation\n- Key patterns: React state for parsed flags, controlled inputs for values\n- Interactive command builder makes flag selection intuitive\n- Raw mode preserved for power users who want direct editing\n- profileId removed from types would be a follow-up cleanup (still in types.ts)","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T20:17:10.597699467-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T20:30:52.607301535-05:00","closed_at":"2026-01-28T20:30:52.607301535-05:00","close_reason":"Done: Interactive CLI command builder implemented - click flags to add, chips to remove, live preview","labels":["agents","quick-fix","ready","ui"]}
{"id":"personal-homepage-oir","title":"Adapt claude-code-templates plugin dashboard for kanban board","description":"Integrate plugin/skill visualization from claude-code-templates into the kanban board.\n\n## Context\nThe claude-code-templates project has a plugin dashboard that:\n- Scans .claude-plugin/ directories for plugin metadata\n- Shows installed plugins with version, description, author\n- Counts components (agents, commands, hooks, MCPs)\n- Displays enabled status from settings.json\n\n## Implementation Ideas\n1. Add a 'Plugins' section to kanban board sidebar\n2. Show installed plugins with their component counts\n3. Display which skills/agents are available for issues\n4. Link skills mentioned in issues to their plugin source\n\n## Their API Endpoints (for reference)\n```\n/api/plugins      - Complete plugin list with metadata\n/api/marketplaces - Marketplace sources and plugin counts\n/api/permissions  - All available agents, commands, hooks, MCPs\n/api/summary      - Aggregated statistics\n```\n\n## Key Files to Study\n- cli-tool/src/plugin-dashboard.js - Main dashboard logic\n- cli-tool/src/plugin-dashboard-web/ - Web UI\n\n## Related\n- GitHub: https://github.com/davila7/claude-code-templates\n- personal-homepage-5tq (analytics dashboard exploration)\n- personal-homepage-d9r (transcript viewer feature)","notes":"prepared.skills: frontend:frontend-development, frontend:ui-styling\nprepared.files: app/sections/kanban.tsx, app/components/kanban/\nprepared.prompt: |\n  ## Feature: Adapt claude-code-templates plugin dashboard for kanban board\n  \n  ### Context\n  Adapt the plugin dashboard template for use in the kanban board.\n  \n  ### Key Files\n  - app/sections/kanban.tsx (kanban section)\n  - app/components/kanban/ (kanban components)\n  \n  ### Skills\n  Use /frontend:frontend-development for React patterns\n  Use /frontend:ui-styling for dashboard styling\n  \n  ### When Done\n  Run: /conductor:bdw-worker-done personal-homepage-oir","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T13:49:20.91660907-05:00","created_by":"marci","updated_at":"2026-01-11T04:23:03.628066018-05:00","closed_at":"2026-01-11T04:23:03.628066018-05:00","close_reason":"Implemented PluginsSidebar with plugin cards, integrated into kanban board"}
{"id":"personal-homepage-p6fn","title":"Feature: Add hover highlighting to main sidebar and other places","description":"The agent dropdown in kanban has nice hover highlighting feedback. Add similar hover states to:\n\n- Main left sidebar navigation items\n- Other interactive elements that currently have no hover feedback\n\n## Reference\n- Agent dropdown highlighting style in kanban chat\n- Apply consistent hover feedback across the app\n\n## Files\n- components/Sidebar.tsx or similar\n- May need global hover utility classes","notes":"## prepared.prompt\n\n**Task:** Add hover highlighting to main sidebar and other places.\n\n**Reference:** Agent dropdown in kanban has nice hover feedback.\n\n**Files:**\n- `components/Sidebar.tsx` or navigation components\n- Look for nav items without hover states\n\n**Fix:** Add hover:bg-accent or similar Tailwind classes to interactive elements. Match the style from kanban agent dropdown.\n\nWhen done, run `bd close personal-homepage-p6fn`.","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:06:29.08781548-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T21:12:06.619934297-05:00","closed_at":"2026-01-28T21:12:06.619934297-05:00","close_reason":"Done: Added hover:bg-accent and hover:text-accent-foreground classes to all interactive menu items in dropdown-menu, select, and context-menu UI components for consistent hover highlighting. Components updated: DropdownMenuItem, DropdownMenuSubTrigger, DropdownMenuCheckboxItem, DropdownMenuRadioItem, SelectItem, ContextMenuItem, ContextMenuSubTrigger, ContextMenuCheckboxItem, ContextMenuRadioItem.","labels":["design","ready","ui"]}
{"id":"personal-homepage-p8f","title":"[Kanban Migration] Migrate visualization components (charts, graphs)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:10:28.417308354-05:00","created_by":"matt","updated_at":"2026-01-04T23:49:17.336844047-05:00","closed_at":"2026-01-04T23:49:17.336844047-05:00","close_reason":"Implemented: Migrated visualization components (BeadsVisualization, DependencyNetworkGraph, IssueDistributionChart, IssueTimelineChart, SprintHealthRadar) from ai-kanban-board","dependencies":[{"issue_id":"personal-homepage-p8f","depends_on_id":"personal-homepage-ce7","type":"blocks","created_at":"2026-01-04T23:10:56.016613111-05:00","created_by":"matt"}]}
{"id":"personal-homepage-pw8","title":"Bookmarks API: mcp-cli requires active Claude session","description":"## Bug\nTabz API routes return 503 when no Claude session is running.\n\n### Error\n```\nMCP state file not found at /tmp/claude-code-mcp-cli/\u003csession-id\u003e.json\nIs Claude Code running?\n```\n\n### Root Cause\nBoth routes use `claude --mcp-cli call tabz/...` which requires an active Claude session with MCP connected. When Next.js runs standalone, there's no session.\n\n### Affected Routes\n- `app/api/tabz/bookmarks/search/route.ts` - tabz_search_bookmarks\n- `app/api/tabz/open-url/route.ts` - tabz_open_url\n\n### Options\n1. **Direct HTTP to TabzChrome** - Use `http://localhost:8129/api/*` directly\n2. **Graceful degradation** - Return 'MCP unavailable' with fallback behavior\n3. **WebSocket MCP client** - Connect directly to tabz MCP server\n\n### Recommended Fix\nReplace `claude --mcp-cli` with direct HTTP calls to TabzChrome:\n```typescript\n// Instead of execFile('claude', ['--mcp-cli', 'call', 'tabz/...'])\nconst res = await fetch('http://localhost:8129/api/bookmarks/search?q=...')\n```\n\nThis removes the Claude session dependency entirely.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:36:45.8102147-05:00","created_by":"marci","updated_at":"2026-01-09T15:42:00.578878362-05:00","closed_at":"2026-01-09T15:42:00.578878362-05:00","close_reason":"Improved error handling - now returns helpful 503 instead of noisy errors. Future enhancement: implement direct MCP connection to TabzChrome to remove Claude session dependency."}
{"id":"personal-homepage-q19","title":"Add working directory column to Projects page","description":"Add a column to the Projects page that shows the working directory path for each project.\n\nThis helps users quickly see:\n- Where each project is located on disk\n- Which projects are under the global working directory scope\n- Easy reference for terminal navigation before using existing 'Open terminal' action\n\nImplementation:\n1. Add 'Path' or 'Location' column to projects table/grid\n2. Show relative path if under global working dir, full path otherwise\n3. Consider truncating long paths with tooltip for full path\n4. Make path clickable to copy to clipboard","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T11:08:41.396844275-05:00","created_by":"matt","updated_at":"2026-01-05T11:22:04.61244725-05:00","closed_at":"2026-01-05T11:22:04.61244725-05:00","close_reason":"Implemented: Added working directory path column to Projects page with relative path display, truncation, tooltip, and copy-to-clipboard functionality"}
{"id":"personal-homepage-q59z","title":"Bug: Context % inflated by cache read tokens","description":"Context percentage shows 57% on first message because it's counting cache read tokens (83k) as part of context usage.\n\nCache read tokens are reused system prompt - not new context being consumed. The percentage should reflect actual new context, not cached content.\n\n## Current\n- First message shows ~57% context (misleading)\n- Includes cache_read_tokens in calculation\n\n## Expected\n- Show actual context consumption\n- Exclude or separately show cached tokens\n- Or show breakdown: 'Context: 9% (57% with cache)'\n\n## Files\n- Token tracking logic in useAIChat.ts or similar\n- Context display component","notes":"## prepared.prompt\n\n**Task:** Fix context % to exclude cache read tokens.\n\n**Problem:** Shows 57% on first message due to cache_read_tokens (83k) being counted.\n\n**Files:**\n- `hooks/useAIChat.ts` - token tracking logic\n- Look for where cacheReadTokens is added to total\n\n**Fix:** Calculate context % from input_tokens + output_tokens only, not cache_read_tokens. Cache is reused prompt, not new context.\n\nWhen done, run `bd close personal-homepage-q59z`.","status":"closed","priority":2,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T21:06:09.439194645-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T21:11:09.786824601-05:00","closed_at":"2026-01-28T21:11:09.786824601-05:00","close_reason":"Done: Fixed context % calculation to exclude cacheReadTokens. Only input_tokens now count toward context window usage, since cache_read represents efficiently reused content (like cached system prompts), not new context consumption.","labels":["ai-workspace","ready","token-tracking"]}
{"id":"personal-homepage-qkh","title":"Fix Files page context menu transparent background","description":"## Bug\nRight-clicking on the Files page shows a context menu with a fully transparent background. The menu needs an opaque background to be readable.\n\n## Location\n- app/sections/files.tsx or app/components/files/ (context menu component)\n\n## Fix\nAdd proper background styling (e.g., `bg-popover`, `glass-dark`, or explicit background color) to the context menu container.","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:30:15.074918351-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:43:43.131193423-05:00","closed_at":"2026-01-21T00:43:43.131193423-05:00","close_reason":"Fixed: Added glass-dark background to context menu for opaque styling","labels":["files","quick-fix","ui"]}
{"id":"personal-homepage-qxm","title":"Music: Device selector doesn't deselect previous device","description":"## Bug\nWhen switching from 'Personal Homepage' (web SDK) to another device like 'MATT' (PC), the drawer's device selector doesn't visually deselect the previous device.\n\n### Expected\n- Only the newly selected device should show as 'Active'\n- Previous device should lose active styling\n\n### Reproduction\n1. Open music player with Personal Homepage as active device\n2. Click device selector in drawer\n3. Select 'MATT' (or any other device)\n4. Both devices appear active/selected\n\n### Root Cause (suspected)\nThe active check in PersistentMusicDrawer.tsx line 294:\n```typescript\nconst isActive = device.is_active || device.id === player.deviceId\n```\n\nThis checks BOTH `device.is_active` (from Spotify API) AND `device.id === player.deviceId` (local SDK device ID).\n\nAfter switching, `player.deviceId` still holds the SDK device ID even though Spotify's `is_active` moved to the new device.\n\n### Fix\nOnly use `device.is_active` for active state, or clear `player.deviceId` when SDK is not the active device.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:18:38.523258799-05:00","created_by":"marci","updated_at":"2026-01-09T15:20:56.038002501-05:00","closed_at":"2026-01-09T15:20:56.038002501-05:00","close_reason":"Fixed in commit 3228c3b"}
{"id":"personal-homepage-rfd","title":"Fix Spotify player next/previous not working from liked songs","description":"## Bug\nThe persistent Spotify music player at the bottom of the page cannot switch between songs. Pressing next/previous does nothing, even when on the Music page viewing Liked songs.\n\n## Steps to Reproduce\n1. Go to Music page\n2. Play from Liked songs\n3. Press next button on persistent player\n4. Nothing happens\n\n## Investigation\n- Check if playback context is being set correctly\n- May be related to recent 1vt fix (hasContext tracking)\n- Check if next/previous calls are reaching Spotify API\n\n## Files\n- components/PersistentMusicDrawer.tsx\n- hooks/useSpotifyPlayer.ts\n- lib/spotify.ts","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-21T00:56:44.415646884-05:00","created_by":"GGPrompts","updated_at":"2026-01-21T00:59:12.171550499-05:00","closed_at":"2026-01-21T00:59:12.171550499-05:00","close_reason":"Duplicate of 2ps","labels":["music-player","spotify"]}
{"id":"personal-homepage-rkt","title":"Add YouTube/video download with ytconverter","description":"Wrap ytconverter/yt-dlp for downloading videos from YouTube.\n\n**Based on:** docs/research/video-player-integration.md (Phase 3)\n\n**Implementation:**\n1. Create Python FastAPI wrapper for yt-dlp OR use subprocess directly\n2. Create `app/api/youtube/download/route.ts`\n3. Server-Sent Events for real-time progress\n4. Quality selection UI (360p to 4K, audio-only)\n5. Download queue management\n6. Downloaded files appear in Browse Local tab\n\n**yt-dlp Format Strings:**\n- Best: bestvideo+bestaudio/best\n- 720p: bestvideo[height\u003c=720]+bestaudio\n- Audio: bestaudio/best\n\n**Progress Data Available:**\n- _percent_str, _speed_str, _eta_str\n- downloaded_bytes, total_bytes\n\n**Files to create:**\n- `app/api/youtube/download/route.ts`\n- `components/DownloadProgress.tsx`\n- `hooks/useVideoDownload.ts`\n\n**Note:** Legal gray area - for personal use only.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T13:01:12.960824159-05:00","updated_at":"2026-01-05T15:36:17.330041096-05:00","closed_at":"2026-01-05T15:36:17.330041096-05:00","close_reason":"Merged into personal-homepage-1hp (duplicate yt-dlp implementation)"}
{"id":"personal-homepage-rku5","title":"Prompts Playground Phase 3: Arena-style comparison with metrics and voting","notes":"## Retro\n- What worked: Building incrementally on existing component patterns, using the same localStorage approach for voting persistence\n- What was unclear: Nothing major - the existing codebase had clear patterns to follow\n\n## Implementation\n- Created MetricsDisplay with collapsible panel, comparison bars, fastest/slowest indicators\n- Created ResponseVoting with thumbs up/down, pick winner, useVoting hook with localStorage persistence\n- Created DiffViewer with split/unified views, line-based diff algorithm\n- Created ExportComparison with Markdown/JSON export, copy to clipboard\n- Integrated voting controls into panel headers with WinnerBadge overlay\n- Updated DynamicPanelViewer and DynamicBrowserPanel to pass voting props through\n- Updated main section to wire everything together","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T22:48:01.387815831-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T23:55:33.083732524-05:00","closed_at":"2026-01-28T23:55:33.083732524-05:00","close_reason":"Done: Implemented Phase 3 arena-style comparison features - MetricsDisplay with response time/char/word counts and comparison bars, ResponseVoting with thumbs up/down and pick winner with localStorage persistence, DiffViewer with split/unified modes and diff stats, ExportComparison with Markdown/JSON export and clipboard copy. All integrated into panel headers and main section.","dependencies":[{"issue_id":"personal-homepage-rku5","depends_on_id":"personal-homepage-c1wu","type":"discovered-from","created_at":"2026-01-28T22:48:01.390101557-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-sfat","title":"Contextual AI: Section-aware agent switching with floating bubble","description":"Make the AI sidebar contextually aware of the current page, automatically showing the relevant agent and resuming recent conversations.\n\n## UX Vision\n\n### Floating Chat Bubble (Bottom Right)\n\n- Shows the current page's recommended agent avatar\n- Weather page shows Weather Agent avatar\n- Stocks page shows Trading Agent avatar\n- Music page shows Music DJ avatar\n- Click to open sidebar with that agent\n\n### Sidebar Behavior\n\n- Open/closed state is user-controlled (remembers preference)\n- Selected agent auto-switches based on current section\n- Loads most recent conversation with that agent\n- User can still manually switch agents or start new chat\n\n### Flow Example\n\n1. User on Weather page, sidebar closed\n2. Floating bubble shows Weather Agent avatar\n3. User clicks bubble - Sidebar opens with Weather Agent + recent convo\n4. User navigates to Stocks\n5. Bubble changes to Trading Agent avatar\n6. Sidebar (still open) switches to Trading Agent + recent convo\n7. User closes sidebar\n8. User navigates to Music - Bubble shows Music DJ, sidebar stays closed\n9. User clicks bubble - Opens with Music DJ + recent convo\n\n## Implementation Notes\n\n- Agents already have sections array in config\n- useAgents hook has getForSection helper\n- Conversations have agentId for filtering\n- JSONL persistence makes loading old convos cheap\n- Store sidebar open/closed state in localStorage\n\n## Files to Modify\n\n- components/ai/AIDrawer.tsx - Add section awareness\n- components/ai/AIDrawerProvider.tsx - Track section, manage auto-switch\n- components/FloatingChatBubble.tsx (new) - Floating bubble with agent avatar\n- app/page.tsx - Pass current section to AI context","notes":"## Retro\n- Most infrastructure already existed in AIDrawerProvider (section tracking, agent recommendation)\n- Main additions: conversation switching by agentId, agentId tagging on new conversations\n- Floating bubble updated to show agent avatar via recommendedAgent\n- Build verified successfully\n\nImplementation was straightforward as the useAgents hook already had findForSection()","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T19:17:06.367099098-05:00","updated_at":"2026-01-28T19:39:27.225873274-05:00","closed_at":"2026-01-28T19:39:27.225873274-05:00","close_reason":"Done: Added contextual AI with section-aware agent switching. Floating bubble shows agent avatar, auto-switches conversations on agent change, tags new conversations with agentId.","labels":["ai-workspace","ready","sidebar","ux"]}
{"id":"personal-homepage-sida","title":"Bug: New agent chat shows black screen instead of sample prompts","description":"When starting a chat with an agent but before sending any messages, the chat area shows a black/empty screen instead of the normal empty conversation view with 4 customizable sample prompts.\n\n## Steps to Reproduce\n1. Go to AI Workspace\n2. Select an agent to start a new conversation\n3. Before sending any message, observe the chat area\n\n## Expected\n- Should show the empty conversation view with 4 sample prompts\n- Same as starting a chat without an agent\n\n## Actual\n- Black/empty screen\n- No sample prompts visible\n\n## Likely Cause\nRecent changes to hide agent gallery may have affected the empty state rendering when agentId is set but messages.length === 0.\n\n## Key Files\n- app/sections/ai-workspace.tsx (recently modified)\n- Look for empty state / sample prompts component","notes":"## Retro\nStraightforward fix. The ternary condition on line 847 had two cases but needed three:\n1. No messages + no agent → AgentGallery landing\n2. No messages + agent selected → Sample prompts (was missing, causing black screen)\n3. Has messages → Show messages\n\nAdded the missing middle case with a styled empty state showing the agent info and 4 clickable sample prompts.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-23T21:58:39.262220824-05:00","updated_at":"2026-01-23T22:00:39.540347382-05:00","closed_at":"2026-01-23T22:00:39.540347382-05:00","close_reason":"Fixed: Added empty state with sample prompts when agent is selected but no messages yet","labels":["ai-workspace","bug","ready","ux"]}
{"id":"personal-homepage-sil","title":"Music drawer: Fix layout and add sidebar now-playing indicator","description":"## Problem\nThe persistent music drawer reserves bottom padding (pb-24) even when closed, leaving empty space that covers content.\n\n## Solution\n1. Remove unconditional `pb-24` from main content in page.tsx\n2. Make drawer a true overlay (no content shifting)\n3. Update Music Player sidebar item to show current song when playing:\n   - Normal: \"Music Player\" with Music icon\n   - Playing: \"Song Name - Artist\" (truncated) with animated music icon\n   - Clicking opens the drawer overlay\n4. When drawer closed + not playing: sidebar shows normal \"Music Player\"\n\n## UX Flow\n- User plays music → sidebar updates to show song\n- Click sidebar item → drawer opens as overlay\n- Close drawer → sidebar still shows current song\n- Stop music → sidebar reverts to \"Music Player\"\n\n## Files\n- app/page.tsx (remove pb-24, update sidebar item)\n- components/PersistentMusicDrawer.tsx (ensure true overlay)\n- components/MusicPlayerProvider.tsx (expose current track to sidebar)\n\n## Acceptance\n- No empty space when drawer closed\n- Sidebar shows current song when playing\n- Drawer opens/closes without shifting content","notes":"conductor_session: ctt-conductor-cfa5e311\nworker_session: ctt-personal-homepage-si-f262475d\nstarted_at: 2026-01-09T14:23:47-05:00","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T14:21:49.210220011-05:00","created_by":"marci","updated_at":"2026-01-09T14:42:51.3179795-05:00","closed_at":"2026-01-09T14:42:51.3179795-05:00","close_reason":"Fixed manually by conductor - navigation restored, now-playing indicator working"}
{"id":"personal-homepage-soh","title":"Fix Spotify player controls not working after bottom drawer move","description":"## Bug\nThe Spotify player controls stopped working after the player was moved to the bottom drawer. This is a regression from the earlier bd-2ps fix.\n\n## Context\n- bd-2ps fixed next/prev buttons for Liked Songs by removing hasContext requirement\n- After moving to bottom drawer, controls no longer work at all\n\n## Steps to Reproduce\n1. Play music from Spotify\n2. Try using play/pause, next, or previous buttons in bottom drawer\n3. Nothing happens\n\n## Files\n- components/PersistentMusicDrawer.tsx\n- hooks/useSpotifyPlayer.ts","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T01:42:52.738232842-05:00","updated_at":"2026-01-21T01:51:05.529506827-05:00","closed_at":"2026-01-21T01:51:05.529506827-05:00","close_reason":"Not a bug - works after restart. Original bd-2ps fix is working correctly.","labels":["music-player","regression","spotify"]}
{"id":"personal-homepage-t3q","title":"Media sections: Add local directory browsing via TabzChrome","description":"Enable browsing and playing media from local directories using TabzChrome file system access.\n\nThis enhancement applies to all media sections:\n- Photo Gallery: Browse ~/Pictures or configured directory\n- Music Player: Browse ~/Music or configured directory  \n- Video Player: Browse ~/Videos or configured directory\n\nFeatures:\n1. **Directory Selector**: Pick a local folder to use as media library\n2. **File Browser**: List files in selected directory via TabzChrome\n3. **Thumbnail Generation**: Generate previews for media files\n4. **Recursive Scan**: Option to include subdirectories\n5. **Watch Mode**: Auto-refresh when files change\n\nImplementation:\n- Use TabzChrome MCP for file:// URL access\n- API route to list directory contents (needs server access)\n- Configure media directories in Settings\n- Cache file listings for performance\n- Support common media formats per type\n\nRequires:\n- TabzChrome connection for file:// access\n- Or: Local API server with filesystem access\n- Settings UI for directory configuration","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-05T10:41:02.486952624-05:00","created_by":"matt","updated_at":"2026-01-05T11:54:23.03356358-05:00","closed_at":"2026-01-05T11:54:23.03356358-05:00","close_reason":"Implemented local directory browsing for media sections with security protections","dependencies":[{"issue_id":"personal-homepage-t3q","depends_on_id":"personal-homepage-dds","type":"blocks","created_at":"2026-01-05T10:41:10.894984249-05:00","created_by":"matt"},{"issue_id":"personal-homepage-t3q","depends_on_id":"personal-homepage-g6u","type":"blocks","created_at":"2026-01-05T10:41:10.934195662-05:00","created_by":"matt"},{"issue_id":"personal-homepage-t3q","depends_on_id":"personal-homepage-3z3","type":"blocks","created_at":"2026-01-05T10:41:10.975046368-05:00","created_by":"matt"}]}
{"id":"personal-homepage-t91","title":"Add TabzChrome profile/bookmark import-export support","description":"Add ability to import and export TabzChrome-compatible JSON files for profiles and bookmarks, enabling data sync between the apps.\n\nFeatures:\n1. Export bookmarks to TabzChrome JSON format\n2. Import bookmarks from TabzChrome JSON export\n3. Export terminal profiles/commands in TabzChrome format\n4. Import TabzChrome profiles as terminal commands\n\nBenefits:\n- Share data between personal-homepage and TabzChrome\n- Backup/restore bookmark and profile data\n- Migrate between setups easily\n\nImplementation:\n- Add Import/Export buttons to Bookmarks section\n- Add Import/Export to Settings \u003e Integrations tab\n- Match TabzChrome JSON schema exactly\n- Handle merge vs replace on import\n\nReference: Check TabzChrome source for JSON schema format.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T10:35:03.478223009-05:00","created_by":"matt","updated_at":"2026-01-05T11:26:18.237241129-05:00","closed_at":"2026-01-05T11:26:18.237241129-05:00","close_reason":"Implemented TabzChrome profile/bookmark import-export with Sync dropdown in Bookmarks section"}
{"id":"personal-homepage-tmtb","title":"AI Drawer FAB: Show page-specific agent avatar instead of generic icon","description":"Replace the generic chat bubble FAB with the avatar of the agent that's relevant to the current page.\n\n## Goal\nVisual clarity - user immediately sees which AI helper is available for this page.\n\n## Current\n- Generic chat icon (MessageSquare) on all pages\n- No indication of which agent will respond\n\n## Proposed\n- Music page shows 🎵 (Music DJ avatar)\n- Trading page shows 📊 (Trading Assistant avatar)\n- Weather page shows 🌤️ (Weather Agent avatar)\n- Files page shows 📁 (Files Agent avatar)\n- etc.\n\n## Implementation\n1. Get current section from navigation/route\n2. Query agents to find one where `agent.sections.includes(currentSection)`\n3. Display that agent's avatar on the FAB\n4. Tooltip on hover shows agent name\n5. Fallback to generic icon if no matching agent\n\n## Key Files\n- `components/ai/AIDrawer.tsx` - Has the FAB button (~line 818)\n- `lib/agents/loader.ts` - Agent loading with sections field\n- `agents/*/agent.json` - Already have sections mapped\n\n## Agent → Section Mapping (already exists)\n- Code Agent → ai-workspace\n- Files Agent → files\n- Music DJ → music-player\n- Research Librarian → bookmarks, search-hub\n- Trading Assistant → stocks\n- Weather Agent → weather","notes":"## Retro (updated)\n- Fixed gate failure: replaced next/image with Avatar component\n- Now consistent with AgentCard pattern\n- Avatar component handles both local and remote images properly","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T19:30:09.011775714-05:00","updated_at":"2026-01-23T20:09:01.290267153-05:00","closed_at":"2026-01-23T20:09:01.290267153-05:00","close_reason":"Done: Fixed to use Avatar component for consistency and remote image support","labels":["ai-workspace","frontend","gate:codex-review","quick-win","ready","ux"]}
{"id":"personal-homepage-trf","title":"Kanban: gate tags not visible on cards","description":"Gate labels (gate:test-runner, gate:visual-qa, etc.) are not visible on Kanban cards.\n\nThese labels are important for knowing what quality checks an issue needs. They should be displayed as small badges/chips on the card.","notes":"## Retro\n- Task was straightforward\n- KanbanCard.tsx already had similar badge patterns (priority, type, dependency indicators) to follow\n- Added 6 gate types with distinct icons and colors\n- Gate badges positioned after metadata row, before git indicator","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-22T23:48:41.622953944-05:00","updated_at":"2026-01-23T03:05:19.305268586-05:00","closed_at":"2026-01-23T03:05:19.305268586-05:00","close_reason":"Done: Added gate label badges to Kanban cards with icons for test-runner, visual-qa, codex-review, docs-check, build, and security gates","labels":["kanban","ui","wave-1"]}
{"id":"personal-homepage-twz","title":"Restructure documentation for LLM consumption with progressive disclosure","description":"Overhaul documentation system to be LLM-optimized with minimal context and progressive disclosure.\n\n**Approach: Index + Pointers (not @ imports)**\n\nCLAUDE.md becomes a complete index with regular markdown links (not @ imports). LLMs see everything exists but only read docs when relevant.\n\n**Target CLAUDE.md Structure (~100 lines):**\n```markdown\n# Personal Homepage\n\nNext.js 15 dashboard with weather, feeds, notes, stocks, and more.\n\n## Commands\n| Task | Command |\n|------|---------|\n| Dev | npm run dev |\n| Build | npm run build |\n\n## Sections\n\n| Section | File | Docs |\n|---------|------|------|\n| Weather | app/sections/weather.tsx | [docs/sections/weather.md] |\n| Music Player | app/sections/music-player.tsx | [docs/sections/music-player.md] |\n... (all 21 sections - complete but lean)\n\n## Key Patterns\n- Adding sections: [docs/navigation.md]\n- Styling: [docs/design-system.md]\n- Auth: [docs/auth.md]\n- TabzChrome: [docs/tabz-integration.md]\n\n## TabzChrome Integration\nAll interactive elements have data-tabz-* attributes for MCP automation.\nSee [docs/tabz-integration.md] for selector reference and adding connectors.\n```\n\n**Implementation Tasks:**\n\n1. **Create docs/sections/ folder** with one file per section:\n   - Brief format: purpose, files, patterns, integration\n   - Cover all 21 sections including missing ones\n   - Convert research docs to implementation guides for music/video\n\n2. **Rewrite CLAUDE.md** (~100 lines):\n   - Commands table\n   - Complete sections table with file + docs link\n   - Key patterns with doc links\n   - TabzChrome note with link to full docs\n\n3. **Create llms.txt** at project root:\n   - Standard llms.txt format\n   - Links to key docs with descriptions\n\n4. **Update existing docs:**\n   - Ensure docs/tabz-integration.md has \"Adding Connectors\" section\n   - Update navigation.md with current section list\n   - Update CHANGELOG.md\n\n5. **Section docs format (docs/sections/[name].md):**\n```markdown\n# Section Name\n\nBrief description (1-2 sentences).\n\n## Files\n- app/sections/[name].tsx - Main component\n- hooks/use[Name].ts - State/logic (if exists)\n- components/[Related].tsx - Sub-components (if any)\n\n## Features\n- Feature 1\n- Feature 2\n\n## TabzChrome Selectors\n- data-tabz-section=\"name\" - Container\n- data-tabz-action=\"action\" - Interactive elements\n\n## Integration\nHow it connects to auth, APIs, other sections.\n```\n\n**Current Missing Sections (need new docs):**\n- crypto-dashboard\n- disasters-monitor\n- github-activity\n- market-pulse\n- kanban\n- photo-gallery\n- music-player (upgrade research doc)\n- video-player (upgrade research doc)\n- spacex-tracker\n- projects-dashboard","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-05T14:54:56.352092192-05:00","updated_at":"2026-01-05T15:11:51.490040934-05:00","closed_at":"2026-01-05T15:11:51.490040934-05:00","close_reason":"Implemented: Documentation restructured for LLM consumption with progressive disclosure"}
{"id":"personal-homepage-u3j","title":"Create /api/files/* backend routes","description":"## Task\nCreate API routes for file operations.\n\n## Endpoints\n- GET /api/files/tree - Directory listing\n- GET /api/files/read - File content\n- POST /api/files/write - Save file\n\n## Location\n- app/api/files/","notes":"## Retro\nStraightforward implementation following existing patterns from tree/route.ts and content/route.ts.\n\n- Used same expandTilde and isPathSafe helpers\n- Added createIfMissing flag for flexibility\n- Auto-creates parent directories when needed\n- Build/lint checks complicated by worktree module resolution issues (pre-existing)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-20T23:35:17.422051567-05:00","updated_at":"2026-01-20T23:56:25.155426362-05:00","closed_at":"2026-01-20T23:56:25.155426362-05:00","close_reason":"Done: Created POST /api/files/write route with path safety validation, size limits, and createIfMissing option","labels":["api","files","migration","ready"]}
{"id":"personal-homepage-u6hr","title":"Feature: Port calendar-scheduler template from portfolio-style-guides","description":"Port the calendar-scheduler template from portfolio-style-guides to personal-homepage.\n\n## Source\n- `~/projects/portfolio-style-guides/app/templates/calendar-scheduler/page.tsx` (54.5 KB)\n- Multi-view calendar: month, week, day, agenda\n- Recurring events, attendees, reminders, video calls\n- Uses shadcn/ui + Framer Motion (same as personal-homepage)\n\n## Tasks\n1. Create new Calendar section in personal-homepage\n2. Port component with styling adjustments (glass classes, terminal-glow)\n3. Add Google Calendar API integration:\n   - OAuth2 with Calendar scopes (can share with Gmail OAuth)\n   - Fetch events from all calendars\n   - Create/edit/delete events\n   - RSVP to invites\n4. Add to navigation items\n5. Add TabzChrome data-tabz-* attributes\n\n## Dependency\n- Shares OAuth setup with email integration (personal-homepage-b1ch)","notes":"## Retro\n- What worked: Porting from portfolio-style-guides template was straightforward. The existing useGoogleAuth hook made API integration simple.\n- What was unclear: TypeScript type inference for Object.entries needed explicit casting to fix.\n- Files created: app/sections/calendar.tsx, app/api/calendar/{events,calendars}/*","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T23:22:13.785058903-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T23:51:16.70374704-05:00","closed_at":"2026-01-28T23:51:16.70374704-05:00","close_reason":"Done: Ported calendar-scheduler template from portfolio-style-guides. Created Calendar section with Google Calendar API integration (list calendars, CRUD events). Added month/week/day/agenda views, quick-add, glass styling, and TabzChrome attributes.","dependencies":[{"issue_id":"personal-homepage-u6hr","depends_on_id":"personal-homepage-uydz","type":"blocks","created_at":"2026-01-28T23:24:27.420437419-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-uif1","title":"AI Drawer: Wire up contextual agent selection based on current page","description":"The AI Drawer (right sidebar) should auto-select the appropriate agent based on the current page/section, and allow manual override.\n\n## Current State\n- AIDrawer exists but has NO agent selection\n- Agents have `sections` field mapping them to pages (already configured)\n- The wiring just isn't connected\n\n## Agent → Section Mapping (already exists)\n- Code Agent → ai-workspace\n- Files Agent → files\n- Music DJ → music-player\n- Research Librarian → bookmarks, search-hub\n- Trading Assistant → stocks\n- Weather Agent → weather\n\n## Requirements\n1. AIDrawerContext needs to track current section/page\n2. Auto-select agent when section changes\n3. Show active agent in drawer header (avatar + name)\n4. Allow manual agent switching via dropdown\n5. Show \"Recommended for this page\" indicator\n\n## Key Files\n- `contexts/AIDrawerContext.tsx` - Add section tracking + agent state\n- `components/ai/AIDrawer.tsx` - Add agent picker UI in header\n- `lib/agents/loader.ts` - Already has agent loading logic\n\n## Implementation Notes\n- Use `agents.find(a =\u003e a.sections?.includes(currentSection))` for auto-select\n- Section name comes from the active navigation item\n- Consider fallback to \"Claude\" or generic agent if no match","notes":"## Retro\n- Straightforward implementation, context structure was well-organized\n- AIDrawerProvider already had the right patterns for state management\n- Agent loader and types were already set up with sections field\n- Used existing query pattern for fetching agents from registry","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T19:18:41.082327846-05:00","updated_at":"2026-01-23T21:43:41.379572811-05:00","closed_at":"2026-01-23T21:43:41.379572811-05:00","close_reason":"Done: Added contextual agent selection to AI Drawer - tracks current section, auto-selects matching agents, adds agent picker dropdown with Recommended badge","labels":["ai-workspace","frontend","gate:codex-review","gate:test-runner","ready"],"dependencies":[{"issue_id":"personal-homepage-uif1","depends_on_id":"personal-homepage-tmtb","type":"blocks","created_at":"2026-01-23T19:50:12.010848386-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-umya","title":"Fix AI Workspace chat issues: corrupted content, 100% context, empty tool uses","description":"After the tool use display fix, old conversations have corrupted data causing:\n\n1. **Huge response displayed twice** - Old messages have raw `__CLAUDE_EVENT__` markers in saved content\n2. **100% context used** - Stale/corrupted usage data\n3. **Tool uses showing empty** - Old format lacks proper toolUses data\n\n## Root Cause\nThe fix to preserve event markers for client-side parsing worked, but conversations saved during the transition have corrupted content mixing raw markers with parsed text.\n\n## Fix\nAdd migration in `loadConversations()` to strip event markers from old messages:\n\n```typescript\n// lib/ai-workspace.ts line 255-258\nmessages: conv.messages.map((msg: any) =\u003e ({\n  ...msg,\n  timestamp: new Date(msg.timestamp),\n  // Migration: strip any event markers from old corrupted messages\n  content: msg.content?.replace(/__CLAUDE_EVENT__.*?__END_EVENT__/g, '').replace(/\\n{3,}/g, '\\n\\n') || '',\n})),\n```\n\nThis cleans corrupted data on load without losing actual content.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T01:12:49.109838065-05:00","updated_at":"2026-01-28T13:58:02.908806154-05:00","closed_at":"2026-01-28T13:58:02.908806154-05:00","close_reason":"Fixed: Added migration in loadConversations() to strip __CLAUDE_EVENT__ markers from old corrupted messages on load","labels":["ai-workspace","bug","migration"]}
{"id":"personal-homepage-uydz","title":"Feature: Google OAuth integration for Gmail + Calendar APIs","description":"Set up Google OAuth2 for Gmail and Calendar API access.\n\n## Tasks\n1. Create Google Cloud Console project (or use existing)\n2. Enable Gmail API and Calendar API\n3. Configure OAuth consent screen\n4. Create OAuth2 credentials (Web application)\n5. Add callback URL for personal-homepage\n6. Create auth flow in personal-homepage:\n   - Add Google OAuth button to auth/login\n   - Store tokens securely (Supabase or encrypted localStorage)\n   - Handle token refresh\n7. Create API routes:\n   - POST /api/auth/google - initiate OAuth flow\n   - GET /api/auth/google/callback - handle callback\n   - GET /api/auth/google/refresh - refresh tokens\n\n## Scopes Needed\n- https://www.googleapis.com/auth/gmail.readonly (read emails)\n- https://www.googleapis.com/auth/gmail.send (send emails)\n- https://www.googleapis.com/auth/gmail.modify (labels, archive, delete)\n- https://www.googleapis.com/auth/calendar.readonly (read events)\n- https://www.googleapis.com/auth/calendar.events (create/edit events)\n\n## Reference\n- User may have existing Google Cloud project from previous gmail cleaner\n- Check Google Cloud Console for existing projects","notes":"## Retro\n- What worked: Following existing patterns from Spotify OAuth integration\n- Code structure: lib/google-auth.ts, hooks/useGoogleAuth.ts, API routes\n- Tests: Added 31 passing tests for lib and hook\n- UI: GoogleOAuthCard component in Settings \u003e Integrations\n\n## Files Created\n- lib/google-auth.ts - OAuth client, token management\n- hooks/useGoogleAuth.ts - React hook for connection state\n- app/api/auth/google/route.ts - Initiate OAuth flow\n- app/api/auth/google/callback/route.ts - Handle callback\n- app/api/auth/google/refresh/route.ts - Token refresh\n- docs/google-oauth.md - Setup documentation\n- .env.example - Environment template\n- __tests__/lib/google-auth.test.ts\n- __tests__/hooks/useGoogleAuth.test.ts","status":"closed","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T23:23:31.809178935-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T23:40:29.235591742-05:00","closed_at":"2026-01-28T23:40:29.235591742-05:00","close_reason":"Done: Implemented Google OAuth2 integration with API routes (/api/auth/google, callback, refresh), client library (lib/google-auth.ts), React hook (useGoogleAuth), Settings UI (GoogleOAuthCard), docs, and 31 tests. Tokens stored in encoded localStorage. Requires GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET in .env.local."}
{"id":"personal-homepage-v5x","title":"Music Audit: Consolidate duplicate device selectors","description":"## Bug: Duplicate Device Selectors Out of Sync\n\n### Root Cause Analysis\nThere are **two independent device selectors** that don't share state:\n\n1. **PersistentMusicDrawer.tsx** (lines 272-309)\n   - Uses `player.devices` from `useMusicPlayerSafe()`\n   - Calls `player.refreshDevices()` and `player.switchDevice()`\n   - Device list: `player.devices`\n   - Current device: `player.deviceId`\n\n2. **SpotifyPlayer.tsx** (lines 201-239 - DeviceSelector component)\n   - Receives `devices`, `currentDeviceId`, `onSelect`, `onRefresh` as props\n   - Used at line ~470 with same `devices` array from `useSpotifyPlayer`\n\n### Why They Desync\nBoth use the **same hook** (`useSpotifyPlayer`) but:\n- `PersistentMusicDrawer` accesses via `MusicPlayerProvider` context\n- `SpotifyPlayer` calls `useSpotifyPlayer` directly (separate instance!)\n- When one refreshes, the other doesn't update\n\n### Solution Options\n**Option A (Recommended):** Remove device selector from SpotifyPlayer.tsx since PersistentMusicDrawer is always visible\n**Option B:** Make SpotifyPlayer.tsx use the MusicPlayerProvider context instead of calling useSpotifyPlayer directly\n\n### Files to Modify\n- `components/SpotifyPlayer.tsx` - Remove DeviceSelector or use context\n- Ensure single source of truth for device state\n\n### Test Steps\n1. Open music player section\n2. Verify only one device selector visible\n3. Switch devices and verify state is consistent","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T14:43:18.228094794-05:00","created_by":"marci","updated_at":"2026-01-09T15:16:00.824468397-05:00","closed_at":"2026-01-09T15:16:00.824468397-05:00","close_reason":"Fixed in commits 944f992 and 2cfa67a"}
{"id":"personal-homepage-wf69","title":"AI Drawer: Compress page content instead of overlapping","description":"When the AI Drawer (right sidebar) is expanded, it currently overlaps the main page content. It should instead compress/push the page content to make room.\n\n## Current Behavior\n- AI Drawer opens as an overlay on top of page content\n- User can't see full page while chatting\n- Content is hidden behind the drawer\n\n## Desired Behavior\n- AI Drawer pushes main content to the left when expanded\n- Page content compresses/reflows to fit remaining space\n- Similar to VS Code sidebar behavior\n- User can see both chat and page content simultaneously\n\n## Implementation Notes\n- Update AIDrawer positioning from fixed/absolute to affect layout flow\n- Main content area needs to respond to drawer state\n- Consider transition animation for smooth resize\n- May need to update page layout wrapper\n- Handle responsive breakpoints (mobile may still need overlay)\n\n## Files Likely Involved\n- components/ai/AIDrawer.tsx\n- components/ai/AIDrawerProvider.tsx\n- app/layout.tsx or main page wrapper\n- Possibly app/page.tsx for content area","notes":"## Retro\n\n### What worked\n- Clean separation of concerns: AILayoutWrapper handles only the push layout logic\n- Using CSS variables for drawer width allows other components to access it if needed\n- Hydration-safe implementation with mounted state check\n- Responsive behavior: desktop uses push layout, mobile keeps overlay\n- Shared MINIMIZED_WIDTH constant ensures consistency between components\n\n### What was unclear\n- The exact breakpoint to match Tailwind lg (1024px) - used standard Tailwind value\n- Whether the transition duration (300ms) matches the drawer animation - matches the spring animation feel","status":"closed","priority":3,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T14:37:09.686325533-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T14:58:16.882216342-05:00","closed_at":"2026-01-28T14:58:16.882216342-05:00","close_reason":"Done: Converted AI Drawer from overlay to push layout. Created AILayoutWrapper component that adds right margin to content on desktop (lg+) when drawer is open. Drawer width synchronization via shared constants (MINIMIZED_WIDTH, DRAWER_WIDTH_VALUES). Mobile keeps overlay behavior. Smooth 300ms transition animation. Fixed pre-existing TypeScript error in useAIChat.ts.","labels":["ai-workspace","layout","ready","ux"]}
{"id":"personal-homepage-x1pt","title":"Floating button: Show selected agent or generic icon on AI Workspace","description":"The floating agent button always shows 'code agent' on AI Workspace page, but that page is for using any agent.\n\n## Current\n- Always shows code agent icon on AI Workspace\n\n## Expected\n- Show currently selected agent's icon (if one is selected in the chat)\n- Fall back to generic icon (star/sparkles) if no specific agent selected\n- AI Workspace shouldn't default to any particular agent\n\n## Files\n- components/agents/FloatingAgentButton.tsx\n- May need to check how section-to-agent mapping works","notes":"## prepared.prompt\n\n**Task:** Fix floating button to show selected agent or generic icon on AI Workspace.\n\n**Problem:** Always shows code agent on AI Workspace, but that page is for any agent.\n\n**File to modify:**\n\n`/home/marci/projects/personal-homepage/components/agents/FloatingAgentButton.tsx`\n\n**Fix:**\n- If on AI Workspace section, don't auto-select an agent based on section\n- Show the currently selected agent from chat state (if any)\n- Fall back to generic star/sparkles icon if no agent selected\n\n**Logic:**\n```typescript\n// Don't use section-based agent for AI Workspace\nconst isAIWorkspace = currentSection === 'ai-workspace'\nconst displayAgent = isAIWorkspace \n  ? selectedAgent  // from chat state, may be null\n  : recommendedAgent || selectedAgent\n\n// Render\nif (displayAgent) {\n  // Show agent icon/avatar\n} else {\n  // Show generic star icon\n}\n```\n\n**Acceptance criteria:**\n- [ ] AI Workspace shows selected agent or generic icon\n- [ ] Other sections still show recommended agent\n- [ ] Clicking opens drawer with correct agent\n\nWhen done, run `bd close personal-homepage-x1pt`.","status":"closed","priority":1,"issue_type":"bug","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T20:53:10.650462913-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T20:57:37.213574501-05:00","closed_at":"2026-01-28T20:57:37.213574501-05:00","close_reason":"Fixed floating button to show selected agent on AI Workspace. Now shows the current chat agent or sparkles icon when on AI Workspace, while other sections still show the recommended agent.","labels":["quick-fix","ready","ui"]}
{"id":"personal-homepage-xdjo","title":"AI Workspace: Add conversation search/filter","description":"No way to search or filter conversations when list grows beyond 50+.\n\n**Feature:** Add search bar to conversation sidebar that filters by:\n- Title/content\n- Date range\n- Model used\n- Agent used\n\nAlso add sort options (recent, oldest, by model, by agent).\n\n**Files:** app/sections/ai-workspace.tsx (ConversationSidebar area)","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:51.454054748-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:00:51.454054748-05:00","dependencies":[{"issue_id":"personal-homepage-xdjo","depends_on_id":"personal-homepage-hiqh","type":"blocks","created_at":"2026-01-29T02:02:33.358764955-05:00","created_by":"GGPrompts"}]}
{"id":"personal-homepage-xst","title":"Scratchpad + Kanban integration: link notes to beads issues","description":"The Scratchpad page could integrate well with the beads kanban board. Consider ways to link scratchpad notes to issues or allow creating issues from notes.","status":"deferred","priority":2,"issue_type":"feature","created_at":"2026-01-21T20:41:05.095807945-05:00","updated_at":"2026-01-21T20:47:35.350974967-05:00","labels":["beads","integration","kanban","scratchpad"]}
{"id":"personal-homepage-y4d","title":"[Kanban Migration] Add Kanban section to sidebar navigation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T23:10:29.937153197-05:00","created_by":"matt","updated_at":"2026-01-05T09:10:16.548245804-05:00","closed_at":"2026-01-05T09:10:16.548245804-05:00","close_reason":"Implemented: Added Kanban section to sidebar navigation with LayoutGrid icon, section component, and full integration","dependencies":[{"issue_id":"personal-homepage-y4d","depends_on_id":"personal-homepage-9y5","type":"blocks","created_at":"2026-01-04T23:10:57.311784803-05:00","created_by":"matt"}]}
{"id":"personal-homepage-yb0g","title":"AI Workspace: Agent working directory with global fallback","notes":"## Retro\n- Implementation was straightforward\n- Added workingDir to AgentCard type and Zod schema\n- Created effectiveWorkingDir computed value with fallback chain\n- Updated UI to show effective dir with source indicator tooltip\n- Existing agents don't need workingDir - they'll use global fallback\n- Future agents can set workingDir in agent.json if needed","status":"closed","priority":2,"issue_type":"feature","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-28T14:05:34.710901621-05:00","created_by":"GGPrompts","updated_at":"2026-01-28T14:09:27.777036098-05:00","closed_at":"2026-01-28T14:09:27.777036098-05:00","close_reason":"Implemented agent workingDir with global fallback. Priority: selected \u003e agent.workingDir \u003e defaultWorkingDir. UI now shows effective dir with source tooltip.","labels":["agents","ai-workspace"]}
{"id":"personal-homepage-yf0","title":"Add Open in Editor action","description":"Port Open in Editor from TabzChrome\n\nFeatures:\n- Opens file in user's default editor\n- Uses $EDITOR environment variable\n- Falls back to nano if $EDITOR not set\n- Available from context menu and file viewer toolbar\n\nReference: TabzChrome/extension/dashboard/components/files/FileTreeContextMenu.tsx","notes":"completed_at: 2026-01-10T19:26:00-05:00\ncommit: 3400938","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-09T01:13:33.313484282-05:00","created_by":"marci","updated_at":"2026-01-10T19:26:01.520405887-05:00","closed_at":"2026-01-10T19:26:01.520405887-05:00","close_reason":"Implemented: Open in Editor now uses spawnWithOptions with autoExecute for proper execution"}
{"id":"personal-homepage-yj4","title":"AIDrawer: Integrate shadcn AI components","description":"Add modern UI components from shadcn AI library:\n\nReference: https://github.com/shadcnio/react-shadcn-components\n\nComponents to integrate:\n- `Conversation` - Chat container with auto-scroll during streaming\n- `Message` - User/assistant message bubbles\n- `Prompt Input` - Input area with submit\n- `Response` - Streaming-optimized markdown rendering\n- `Code Block` - Syntax highlighted code blocks\n- `Loader` - Streaming indicator\n- `Tool` - Tool use display\n\nInstall via shadcn CLI or copy components. Style to match personal-homepage theme.","notes":"## Retro\n- shadcn registry does not have dedicated AI chat components - the referenced repo was not a standard shadcn registry\n- Existing components (ChatMessage, ChatInput, TypingIndicator, ToolUseDisplay) already provided most functionality\n- Created Conversation component for message list with auto-scroll during streaming\n- Main work was wiring existing components to AIDrawerContext and updating AIDrawer from placeholder to real chat UI\n- SSR issue: useAIChat returned undefined activeConv during static generation - fixed with fallback conversation\n- Two separate AIDrawerProviders existed: simple one in components/ai/ (drawer state only) and full one in contexts/ (with chat) - switched to full one\n- MiniChat.tsx was a good reference for how to wire the components together","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T23:41:01.04789572-05:00","updated_at":"2026-01-23T00:13:19.934395135-05:00","closed_at":"2026-01-23T00:13:19.934395135-05:00","close_reason":"Done: Integrated chat components into AIDrawer - created Conversation component, wired ChatMessage/ChatInput/TypingIndicator, switched to full-featured AIDrawerContext, fixed SSR fallback","labels":["ai-drawer","ui","wave-2"],"dependencies":[{"issue_id":"personal-homepage-yj4","depends_on_id":"personal-homepage-9y2","type":"blocks","created_at":"2026-01-22T23:41:01.050328064-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-yni","title":"Add PromptyViewer for .prompty files","description":"Port PromptyViewer from TabzChrome\n\nFeatures:\n- Specialized viewer for .prompty prompt template files\n- Inline field editing with variable substitution\n- Tab navigation between fields\n- Progress tracking for filled vs unfilled fields\n- Send to terminal functionality\n- YAML frontmatter parsing with links and descriptions\n- Syntax highlighting for code blocks in prompts\n- Markdown rendering with custom component processing\n\nReference: TabzChrome/extension/dashboard/components/files/PromptyViewer.tsx","notes":"completed_at: 2026-01-10T19:28:11-05:00\ncommit: 22e326f","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-09T01:13:24.803279166-05:00","created_by":"marci","updated_at":"2026-01-10T19:28:12.849972137-05:00","closed_at":"2026-01-10T19:28:12.849972137-05:00","close_reason":"Implemented PromptyViewer component for .prompty files"}
{"id":"personal-homepage-ynl","title":"Integrate TabzChrome MCP for Chrome bookmarks search in Search Hub","description":"Use the TabzChrome MCP API to enable searching Chrome bookmarks directly from the Search Hub section.\n\nTabzChrome MCP tools available:\n- tabz_search_bookmarks - Search Chrome bookmarks\n- tabz_get_bookmark_tree - Get full bookmark structure\n- tabz_save_bookmark - Save new bookmarks\n\nImplementation ideas:\n1. Add a 'Chrome Bookmarks' search source in Search Hub\n2. Use tabz_search_bookmarks for live search as user types\n3. Show bookmark results alongside other search sources\n4. Clicking a result opens the URL via tabz_open_url\n5. Add option to save current page as bookmark\n\nBenefits:\n- Unified search experience between homepage and TabzChrome\n- Access Chrome bookmarks without opening new tab page\n- Consistent with TabzChrome CommandBar pattern\n\nReference: TabzChrome CommandBar implementation in extension/newtab/components/CommandBar.tsx","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-05T10:35:02.515257696-05:00","created_by":"matt","updated_at":"2026-01-05T11:28:17.518722526-05:00","closed_at":"2026-01-05T11:28:17.518722526-05:00","close_reason":"Implemented: Chrome bookmarks search integration in Search Hub via TabzChrome MCP"}
{"id":"personal-homepage-z0io","title":"Agent Editor UI: Create/edit agents with spawn commands","description":"Add edit/create functionality to the existing AI Workspace agent modal, with spawn command editor and CLI flag reference.\n\n## Context\n\nAI Workspace already has an agent gallery modal. Add:\n- Edit button on existing agents\n- New agent button\n- Spawn command editor with CLI flag reference\n\n## Key Features\n\n### Spawn Command Editor\n\n- Working dir field (optional - if blank, uses global settings from personal-homepage)\n- Spawn command text input or builder\n- **CLI Flag Reference Panel**: Shows available flags based on selected backend\n  - Only show flags relevant to print mode (`-p`), not interactive mode flags\n  - Reference data from personal-homepage-4yqz research\n\n### Backend-Specific Flag Reference\n\nWhen user selects backend, show relevant flags:\n\n**Claude** (print mode):\n- `--model` (sonnet, opus, haiku)\n- `--permission-mode` (acceptEdits, bypassPermissions, default, plan, etc.)\n- `--add-dir` (additional directories)\n- `--plugin-dir` (plugin directories)\n- `--append-system-prompt`\n- `--allowed-tools` / `--disallowed-tools`\n- `--mcp-config`\n- `--max-budget-usd`\n- etc.\n\n**Codex**:\n- `--model`\n- `--sandbox` (read-only, workspace-write, danger-full-access)\n- `--ask-for-approval` (untrusted, on-failure, on-request, never)\n- `--add-dir`\n- `--search` (web search)\n- etc.\n\n**Gemini**:\n- `--model`\n- `--approval-mode` (default, auto_edit, yolo, plan)\n- `--sandbox`\n- `--allowed-tools`\n- `--extensions`\n- etc.\n\n### Inheritance\n\n- Working dir: agent.workingDir || globalSettings.workingDir\n- If spawn command is blank, fall back to individual settings fields\n\n## Files to Modify\n\n- `components/ai/AgentGallery.tsx` - Add edit/new buttons\n- `components/ai/AgentEditor.tsx` (new) - Editor with flag reference\n- `lib/ai/cli-flags.ts` (new) - Flag definitions per backend\n- `app/api/ai/agents/[id]/route.ts` - CRUD for agents","notes":"## Retro\n- Straightforward implementation following existing patterns\n- AgentBuilderWizard already had good foundation with initialData prop\n- Key insight: Replace plugins step with more comprehensive spawn step\n- CLI flags organized by category for better UX in reference panel\n- File-based agent storage works well with CLAUDE.md + agent.json pattern\n- Build passed first try for all changes","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T18:15:46.951848486-05:00","updated_at":"2026-01-28T19:58:45.030206326-05:00","closed_at":"2026-01-28T19:58:45.030206326-05:00","close_reason":"Done: Added Agent Editor UI with create/edit functionality, spawn command builder with CLI flag reference, and CRUD API routes","labels":["agents","ai-workspace","ready","ui"],"dependencies":[{"issue_id":"personal-homepage-z0io","depends_on_id":"personal-homepage-4aa0","type":"blocks","created_at":"2026-01-28T19:23:15.099359467-05:00","created_by":"daemon"}]}
{"id":"personal-homepage-z70j","title":"Bug: Files page plugins component shares space with file viewer, can't see selection","description":"On the Files page, the plugins component is sharing the panel with the file viewer. When you select a plugin, you can't see which plugin is selected without closing the entire plugins menu.\n\n## Context\nThis was brought over from TabzChrome where plugins were a filter option for the file tree (different UX pattern).\n\n## Expected\n- Plugin selection should be visible while browsing files\n- Or plugins should filter the file tree like in TabzChrome\n\n## Actual\n- Plugins panel replaces file viewer\n- No way to see selected plugin without closing menu\n\n## Possible Fixes\n1. Move plugins to a sidebar/drawer that doesn't replace file viewer\n2. Show selected plugin as a badge/chip above file tree\n3. Make plugins a filter for the file tree (original TabzChrome pattern)","notes":"## Retro\n- Straightforward layout restructure\n- Removed Card wrapper from PluginList since parent container now provides styling\n- Added toggle button with panel icons for showing/hiding plugins\n- Plugins only visible in local file mode (not GitHub mode)","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-23T19:45:00.392188942-05:00","updated_at":"2026-01-25T20:29:20.66131613-05:00","closed_at":"2026-01-25T20:29:20.66131613-05:00","close_reason":"Done: Plugins now shown as collapsible sidebar alongside file viewer instead of tab","labels":["files","gate:codex-review","gate:visual-qa","plugins","ready","ux"]}
{"id":"personal-homepage-zg7b","title":"AI Workspace: Show toast notification on message feedback","description":"When user clicks thumbs up/down on a message, there's no visual confirmation that feedback was recorded.\n\n**Fix:** Add toast notification showing 'Feedback recorded' or similar.\n\n**Files:** app/sections/ai-workspace.tsx (message feedback handlers)","status":"open","priority":2,"issue_type":"task","owner":"marcinek.matthew@gmail.com","created_at":"2026-01-29T02:00:55.184149857-05:00","created_by":"GGPrompts","updated_at":"2026-01-29T02:00:55.184149857-05:00"}
{"id":"personal-homepage-zhw","title":"Fix Video Player local file loading and subfolder browsing","description":"Video Player fails to load local video files with 404 errors and 'illegal path' message.\n\n**Current Issues:**\n1. Trying to load video from ~/Videos subfolder returns 404 Not Found\n2. Error: 'Unable to add filesystem: \u003cillegal path\u003e'\n3. File picker doesn't show subfolders - only top-level files\n\n**Expected Behavior:**\n1. Local video files should load and play correctly\n2. File browser should show subfolders and allow navigation into them\n3. No 'illegal path' errors when browsing valid directories\n\n**Investigation Needed:**\n1. Check API route that serves local files - is path validation too strict?\n2. Check if subfolder paths are being properly resolved\n3. Verify the media URL generation for nested paths\n4. Check if there's path traversal protection blocking legitimate subfolder access\n\n**Files to Check:**\n- API route for media files (app/api/media/... or similar)\n- hooks/useMediaLibrary.ts - getMediaUrl function\n- components/LocalMediaBrowser.tsx - directory listing logic\n- app/sections/video-player.tsx - how it requests files\n\n**Fix Requirements:**\n1. Allow recursive directory browsing in file picker\n2. Properly serve files from subdirectories\n3. Handle path encoding for special characters\n4. Show folder navigation UI (breadcrumbs or tree view)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T12:14:14.141332015-05:00","created_by":"matt","updated_at":"2026-01-05T12:25:01.525416526-05:00","closed_at":"2026-01-05T12:25:01.525416526-05:00","close_reason":"Fixed: Subdirectories now visible in video browser, local files now play correctly"}
