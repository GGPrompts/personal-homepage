@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* ===== TERMINAL THEME (Default) ===== */
  :root {
    /* Core colors */
    --background: 220 13% 5%;           /* Very dark slate/black */
    --foreground: 160 84% 95%;          /* Light cyan-white */

    --card: 220 13% 15%;                /* Balanced for glassmorphism over black */
    --card-foreground: 160 84% 95%;

    --popover: 220 13% 15%;             /* Balanced for glassmorphism over black */
    --popover-foreground: 160 84% 95%;

    --primary: 160 84% 39%;             /* Terminal green/cyan */
    --primary-foreground: 220 13% 5%;

    --secondary: 217 91% 60%;           /* Vivid blue */
    --secondary-foreground: 0 0% 100%;

    --muted: 220 13% 25%;
    --muted-foreground: 160 20% 85%;

    --accent: 160 60% 20%;
    --accent-foreground: 160 84% 95%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 160 60% 25%;              /* Cyan border */
    --input: 160 60% 25%;
    --ring: 160 84% 39%;

    --radius: 0.5rem;

    /* RGB values for glow effects (emerald/cyan) */
    --primary-rgb: 16 185 129;          /* Emerald-500 */
    --secondary-rgb: 6 182 212;         /* Cyan-500 */

    /* Glass background colors */
    --glass-bg: 16 185 129;             /* Emerald tint */
    --glass-dark-bg: 220 13% 12%;       /* Dark slate */
    --glass-overlay-bg: 220 13% 8%;     /* Very dark slate */

    /* Body gradient colors */
    --gradient-1: 16 185 129;           /* Emerald */
    --gradient-2: 6 182 212;            /* Cyan */
  }

  /* ===== AMBER THEME ===== */
  :root[data-theme="amber"] {
    /* Core colors */
    --background: 250 30% 4%;           /* Dark purple-blue */
    --foreground: 40 100% 95%;          /* Warm light */

    --card: 250 25% 15%;                /* Purple-blue card */
    --card-foreground: 40 100% 95%;

    --popover: 250 25% 15%;             /* Purple-blue popover */
    --popover-foreground: 40 100% 95%;

    --primary: 40 100% 67%;             /* Golden amber #ffc857 */
    --primary-foreground: 250 30% 10%;

    --secondary: 217 91% 60%;           /* Bright blue */
    --secondary-foreground: 0 0% 100%;

    --muted: 250 20% 20%;               /* Muted purple */
    --muted-foreground: 40 20% 70%;     /* Muted amber */

    --accent: 40 95% 50%;               /* Orange accent */
    --accent-foreground: 250 30% 10%;

    --destructive: 0 72% 51%;           /* Red */
    --destructive-foreground: 0 0% 100%;

    --border: 40 80% 60%;               /* Amber border */
    --input: 40 80% 60%;
    --ring: 40 100% 67%;

    /* RGB values for glow effects (amber/gold) */
    --primary-rgb: 255 200 87;          /* Amber #ffc857 */
    --secondary-rgb: 255 152 0;         /* Orange */

    /* Glass background colors */
    --glass-bg: 40 30 50;               /* Purple tint */
    --glass-dark-bg: 20 20 30;          /* Dark purple */
    --glass-overlay-bg: 25 20 35;       /* Very dark purple */

    /* Body gradient colors */
    --gradient-1: 12 12 20;             /* Dark blue */
    --gradient-2: 18 12 25;             /* Dark purple */
  }

  /* ===== CARBON THEME ===== */
  :root[data-theme="carbon"] {
    /* Core colors */
    --background: 0 0% 3%;              /* Pure black/carbon */
    --foreground: 0 0% 95%;             /* Pure white */

    --card: 0 0% 8%;                    /* Very dark gray */
    --card-foreground: 0 0% 95%;

    --popover: 0 0% 8%;                 /* Very dark gray */
    --popover-foreground: 0 0% 95%;

    --primary: 0 0% 90%;                /* Light gray accent */
    --primary-foreground: 0 0% 10%;

    --secondary: 0 0% 20%;              /* Medium dark gray */
    --secondary-foreground: 0 0% 95%;

    --muted: 0 0% 15%;                  /* Dark gray */
    --muted-foreground: 0 0% 78%;       /* Lighter gray for better contrast */

    --accent: 0 0% 18%;                 /* Dark gray */
    --accent-foreground: 0 0% 95%;

    --destructive: 0 72% 51%;           /* Pure red */
    --destructive-foreground: 0 0% 95%;

    --border: 0 0% 28%;                 /* More visible gray border */
    --input: 0 0% 20%;
    --ring: 0 0% 90%;

    /* RGB values for glow effects (white) */
    --primary-rgb: 255 255 255;         /* White */
    --secondary-rgb: 200 200 200;       /* Light gray */

    /* Glass background colors */
    --glass-bg: 30 30 30;               /* Dark gray tint */
    --glass-dark-bg: 20 20 20;          /* Darker gray */
    --glass-overlay-bg: 15 15 15;       /* Very dark gray */

    /* Body gradient colors */
    --gradient-1: 0 0 0;                /* Black */
    --gradient-2: 17 17 17;             /* Dark gray */
  }

  /* ===== LIGHT THEME ===== */
  :root[data-theme="light"] {
    /* Core colors */
    --background: 210 20% 98%;          /* Soft off-white #fafbfc */
    --foreground: 0 0% 10%;             /* Dark charcoal #1a1a1a */

    --card: 0 0% 100%;                  /* Pure white cards */
    --card-foreground: 0 0% 10%;

    --popover: 0 0% 100%;               /* Pure white popovers */
    --popover-foreground: 0 0% 10%;

    --primary: 211 100% 40%;            /* Professional blue #0066cc */
    --primary-foreground: 0 0% 100%;

    --secondary: 214 32% 95%;           /* Light blue-gray #f0f4f8 */
    --secondary-foreground: 0 0% 10%;

    --muted: 210 24% 93%;               /* Light gray #e8edf2 */
    --muted-foreground: 215 16% 47%;    /* Slate #64748b */

    --accent: 187 85% 36%;              /* Teal accent #0891b2 */
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 51%;           /* Red #dc2626 */
    --destructive-foreground: 0 0% 100%;

    --border: 214 32% 91%;              /* Subtle light border #e2e8f0 */
    --input: 214 32% 91%;
    --ring: 211 100% 40%;

    /* RGB values for glow effects (blue) */
    --primary-rgb: 0 102 204;           /* Blue #0066cc */
    --secondary-rgb: 8 145 178;         /* Teal */

    /* Glass background colors */
    --glass-bg: 255 255 255;            /* White tint */
    --glass-dark-bg: 248 250 252;       /* Very light gray */
    --glass-overlay-bg: 255 255 255;    /* Pure white */

    /* Body gradient colors */
    --gradient-1: 250 251 252;          /* Off-white */
    --gradient-2: 243 244 246;          /* Light gray */
  }

  /* ===== OCEAN THEME ===== */
  :root[data-theme="ocean"] {
    /* Core colors */
    --background: 210 50% 4%;           /* Deep ocean blue */
    --foreground: 190 80% 95%;          /* Light cyan-white */

    --card: 210 45% 12%;                /* Dark ocean card */
    --card-foreground: 190 80% 95%;

    --popover: 210 45% 12%;             /* Dark ocean popover */
    --popover-foreground: 190 80% 95%;

    --primary: 188 100% 50%;            /* Bright aqua/turquoise #00d4ff */
    --primary-foreground: 210 50% 8%;

    --secondary: 196 85% 25%;           /* Deep teal #0a5968 */
    --secondary-foreground: 190 80% 95%;

    --muted: 210 35% 20%;               /* Muted ocean */
    --muted-foreground: 190 30% 75%;

    --accent: 173 100% 45%;             /* Bright cyan accent #00e5cc */
    --accent-foreground: 210 50% 8%;

    --destructive: 0 84% 60%;           /* Red */
    --destructive-foreground: 0 0% 100%;

    --border: 188 75% 30%;              /* Ocean border */
    --input: 188 75% 30%;
    --ring: 188 100% 50%;

    /* RGB values for glow effects (aqua/teal) */
    --primary-rgb: 0 212 255;           /* Bright aqua */
    --secondary-rgb: 0 229 204;         /* Cyan-teal */

    /* Glass background colors */
    --glass-bg: 0 150 180;              /* Ocean blue tint */
    --glass-dark-bg: 210 45% 10%;       /* Dark ocean */
    --glass-overlay-bg: 210 50% 6%;     /* Very dark ocean */

    /* Body gradient colors */
    --gradient-1: 0 212 255;            /* Aqua */
    --gradient-2: 10 89 104;            /* Deep teal */
  }

  /* ===== SUNSET THEME ===== */
  :root[data-theme="sunset"] {
    /* Core colors */
    --background: 280 40% 4%;           /* Deep purple-orange */
    --foreground: 30 90% 95%;           /* Warm light */

    --card: 280 35% 14%;                /* Purple-orange card */
    --card-foreground: 30 90% 95%;

    --popover: 280 35% 14%;             /* Purple-orange popover */
    --popover-foreground: 30 90% 95%;

    --primary: 15 100% 60%;             /* Bright orange/coral #ff6633 */
    --primary-foreground: 280 40% 10%;

    --secondary: 295 80% 35%;           /* Deep magenta/purple #8b1fa3 */
    --secondary-foreground: 30 90% 95%;

    --muted: 280 25% 20%;               /* Muted purple */
    --muted-foreground: 30 40% 75%;

    --accent: 340 90% 60%;              /* Pink highlight #ff4d8f */
    --accent-foreground: 280 40% 10%;

    --destructive: 0 84% 60%;           /* Red */
    --destructive-foreground: 0 0% 100%;

    --border: 15 85% 45%;               /* Orange border */
    --input: 15 85% 45%;
    --ring: 15 100% 60%;

    /* RGB values for glow effects (orange/pink) */
    --primary-rgb: 255 102 51;          /* Orange-coral */
    --secondary-rgb: 255 77 143;        /* Pink */

    /* Glass background colors */
    --glass-bg: 139 31 163;             /* Purple tint */
    --glass-dark-bg: 280 35% 12%;       /* Dark purple */
    --glass-overlay-bg: 280 40% 8%;     /* Very dark purple */

    /* Body gradient colors */
    --gradient-1: 255 102 51;           /* Orange */
    --gradient-2: 139 31 163;           /* Purple */
  }

  /* ===== FOREST THEME ===== */
  :root[data-theme="forest"] {
    /* Core colors */
    --background: 150 35% 4%;           /* Dark forest green */
    --foreground: 85 75% 95%;           /* Light lime-white */

    --card: 150 30% 12%;                /* Forest card */
    --card-foreground: 85 75% 95%;

    --popover: 150 30% 12%;             /* Forest popover */
    --popover-foreground: 85 75% 95%;

    --primary: 82 100% 55%;             /* Bright lime/chartreuse #8aff00 */
    --primary-foreground: 150 35% 8%;

    --secondary: 150 80% 25%;           /* Deep emerald #0d7a3d */
    --secondary-foreground: 85 75% 95%;

    --muted: 150 25% 18%;               /* Muted forest */
    --muted-foreground: 85 30% 70%;

    --accent: 100 85% 50%;              /* Bright green accent #73e600 */
    --accent-foreground: 150 35% 8%;

    --destructive: 0 84% 60%;           /* Red */
    --destructive-foreground: 0 0% 100%;

    --border: 82 70% 35%;               /* Lime border */
    --input: 82 70% 35%;
    --ring: 82 100% 55%;

    /* RGB values for glow effects (lime/green) */
    --primary-rgb: 138 255 0;           /* Lime-chartreuse */
    --secondary-rgb: 115 230 0;         /* Bright green */

    /* Glass background colors */
    --glass-bg: 13 122 61;              /* Forest green tint */
    --glass-dark-bg: 150 30% 10%;       /* Dark forest */
    --glass-overlay-bg: 150 35% 6%;     /* Very dark forest */

    /* Body gradient colors */
    --gradient-1: 138 255 0;            /* Lime */
    --gradient-2: 13 122 61;            /* Deep emerald */
  }

  /* ===== MIDNIGHT THEME ===== */
  :root[data-theme="midnight"] {
    /* Core colors */
    --background: 250 50% 6%;           /* Very dark indigo/navy */
    --foreground: 290 85% 95%;          /* Light magenta-white */

    --card: 250 45% 10%;                /* Dark indigo card */
    --card-foreground: 290 85% 95%;

    --popover: 250 45% 10%;             /* Dark indigo popover */
    --popover-foreground: 290 85% 95%;

    --primary: 290 100% 65%;            /* Bright magenta/fuchsia #ff66ff */
    --primary-foreground: 250 50% 6%;

    --secondary: 260 80% 35%;           /* Deep purple #5c1fb3 */
    --secondary-foreground: 290 85% 95%;

    --muted: 250 35% 15%;               /* Muted indigo */
    --muted-foreground: 290 35% 75%;

    --accent: 310 90% 60%;              /* Magenta highlight #ff4da6 */
    --accent-foreground: 250 50% 6%;

    --destructive: 0 84% 60%;           /* Red */
    --destructive-foreground: 0 0% 100%;

    --border: 290 75% 40%;              /* Magenta border */
    --input: 290 75% 40%;
    --ring: 290 100% 65%;

    /* RGB values for glow effects (magenta/purple) */
    --primary-rgb: 255 102 255;         /* Bright magenta */
    --secondary-rgb: 153 77 255;        /* Purple-blue */

    /* Glass background colors */
    --glass-bg: 92 31 179;              /* Purple tint */
    --glass-dark-bg: 250 45% 8%;        /* Dark indigo */
    --glass-overlay-bg: 250 50% 5%;     /* Very dark indigo */

    /* Body gradient colors */
    --gradient-1: 255 102 255;          /* Magenta */
    --gradient-2: 92 31 179;            /* Deep purple */
  }

  /* ===== NEON THEME ===== */
  :root[data-theme="neon"] {
    /* Core colors */
    --background: 0 0% 4%;              /* Almost pure black */
    --foreground: 320 100% 95%;         /* Light hot pink-white */

    --card: 0 0% 8%;                    /* Near black card */
    --card-foreground: 320 100% 95%;

    --popover: 0 0% 8%;                 /* Near black popover */
    --popover-foreground: 320 100% 95%;

    --primary: 320 100% 60%;            /* Hot pink/magenta #ff0099 */
    --primary-foreground: 0 0% 4%;

    --secondary: 185 100% 50%;          /* Electric blue/cyan #00bfff */
    --secondary-foreground: 0 0% 4%;

    --muted: 0 0% 12%;                  /* Very dark gray */
    --muted-foreground: 320 50% 80%;

    --accent: 270 100% 60%;             /* Electric purple #9933ff */
    --accent-foreground: 0 0% 4%;

    --destructive: 0 84% 60%;           /* Red */
    --destructive-foreground: 0 0% 100%;

    --border: 320 90% 50%;              /* Hot pink border */
    --input: 320 90% 50%;
    --ring: 320 100% 60%;

    /* RGB values for glow effects (neon pink/cyan) */
    --primary-rgb: 255 0 153;           /* Hot pink */
    --secondary-rgb: 0 191 255;         /* Electric cyan */

    /* Glass background colors */
    --glass-bg: 255 0 153;              /* Neon pink tint */
    --glass-dark-bg: 0 0% 6%;           /* Near black */
    --glass-overlay-bg: 0 0% 3%;        /* Very near black */

    /* Body gradient colors */
    --gradient-1: 255 0 153;            /* Hot pink */
    --gradient-2: 0 191 255;            /* Electric cyan */
  }

  /* ===== SLATE THEME ===== */
  :root[data-theme="slate"] {
    /* Core colors */
    --background: 220 20% 4%;           /* Dark slate gray */
    --foreground: 210 100% 95%;         /* Light sky-white */

    --card: 220 18% 14%;                /* Slate card */
    --card-foreground: 210 100% 95%;

    --popover: 220 18% 14%;             /* Slate popover */
    --popover-foreground: 210 100% 95%;

    --primary: 200 100% 60%;            /* Sky blue #33b3ff */
    --primary-foreground: 220 20% 10%;

    --secondary: 210 60% 35%;           /* Steel blue #3366a3 */
    --secondary-foreground: 210 100% 95%;

    --muted: 220 15% 20%;               /* Muted slate */
    --muted-foreground: 210 40% 75%;

    --accent: 195 90% 50%;              /* Bright cyan-blue #0d9ddb */
    --accent-foreground: 220 20% 10%;

    --destructive: 0 84% 60%;           /* Red */
    --destructive-foreground: 0 0% 100%;

    --border: 200 50% 35%;              /* Blue-gray border */
    --input: 200 50% 35%;
    --ring: 200 100% 60%;

    /* RGB values for glow effects (sky blue) */
    --primary-rgb: 51 179 255;          /* Sky blue */
    --secondary-rgb: 13 157 219;        /* Cyan-blue */

    /* Glass background colors */
    --glass-bg: 51 102 163;             /* Steel blue tint */
    --glass-dark-bg: 220 18% 12%;       /* Dark slate */
    --glass-overlay-bg: 220 20% 8%;     /* Very dark slate */

    /* Body gradient colors */
    --gradient-1: 51 179 255;           /* Sky blue */
    --gradient-2: 51 102 163;           /* Steel blue */
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  html {
    scroll-behavior: smooth;
    overflow-y: scroll !important; /* Always show scrollbar to prevent layout shift */
    width: 100%;
  }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    /* Prevent body from getting overflow: hidden when dropdowns open */
    overflow-x: hidden !important;
    width: 100%;
    position: relative;
  }

  /* ===== THEME-AWARE SCROLLBARS ===== */
  /* Firefox */
  * {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) hsl(var(--background));
  }

  /* WebKit (Chrome, Safari, Edge) */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(var(--background));
    border-radius: 5px;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 5px;
    border: 2px solid hsl(var(--background));
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--primary) / 0.7);
  }

  ::-webkit-scrollbar-thumb:active {
    background: hsl(var(--primary));
  }

  ::-webkit-scrollbar-corner {
    background: hsl(var(--background));
  }

  /* Light theme scrollbar adjustments */
  :root[data-theme="light"] ::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.3);
    border: 2px solid hsl(var(--background));
  }

  :root[data-theme="light"] ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.5);
  }

  :root[data-theme="light"] ::-webkit-scrollbar-thumb:active {
    background: hsl(var(--primary));
  }

  :root[data-theme="light"] * {
    scrollbar-color: hsl(var(--muted-foreground) / 0.3) hsl(var(--background));
  }

  /* Prevent Radix UI from hiding overflow and causing layout shift */
  body[data-scroll-locked] {
    overflow-y: scroll !important;
    padding-right: 0 !important;
  }

  /* ===== BACKGROUND TONES (independent of theme) ===== */
  /* These control body background gradient, decoupled from theme accent colors */

  /* Charcoal - Dark slate (default) */
  :root[data-bg-tone="charcoal"] body {
    background-color: hsl(220 13% 5%);
    background-image:
      radial-gradient(circle at 20% 50%, rgba(var(--gradient-1), 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(var(--gradient-2), 0.05) 0%, transparent 50%);
    background-attachment: fixed;
  }

  /* Deep Purple - Purple-blue */
  :root[data-bg-tone="deep-purple"] body {
    background: linear-gradient(135deg, rgba(12, 12, 20, 1) 0%, rgba(18, 12, 25, 1) 50%, rgba(15, 12, 22, 1) 100%);
    background-attachment: fixed;
  }

  /* Pure Black - True black */
  :root[data-bg-tone="pure-black"] body {
    background: #000000;
    background-attachment: fixed;
  }

  /* Light - Off-white */
  :root[data-bg-tone="light"] body {
    background: linear-gradient(135deg, #fafbfc 0%, #f3f4f6 100%);
    background-attachment: fixed;
  }

  /* Ocean - Deep blue */
  :root[data-bg-tone="ocean"] body {
    background: linear-gradient(135deg, #001a33 0%, #002b4d 50%, #003d66 100%);
    background-attachment: fixed;
  }

  /* Sunset - Purple-pink */
  :root[data-bg-tone="sunset"] body {
    background: linear-gradient(135deg, #331a33 0%, #4d1a4d 50%, #661a66 100%);
    background-attachment: fixed;
  }

  /* Forest - Dark green */
  :root[data-bg-tone="forest"] body {
    background: linear-gradient(135deg, #0d1a0d 0%, #1a331a 50%, #264d26 100%);
    background-attachment: fixed;
  }

  /* Midnight - Indigo */
  :root[data-bg-tone="midnight"] body {
    background: linear-gradient(135deg, #0a0a1a 0%, #14142b 50%, #1f1f3d 100%);
    background-attachment: fixed;
  }

  /* Neon Dark - Near-black */
  :root[data-bg-tone="neon-dark"] body {
    background: linear-gradient(135deg, #0a0a0a 0%, #0d0d0d 50%, #141414 100%);
    background-attachment: fixed;
  }

  /* Slate - Blue-gray */
  :root[data-bg-tone="slate"] body {
    background: linear-gradient(135deg, #1a1f29 0%, #263241 50%, #334459 100%);
    background-attachment: fixed;
  }

  /* ===== LIGHT THEME PASTEL OVERRIDES ===== */
  /* When light theme is selected, background tones become pastel versions */

  /* Charcoal → Silver */
  :root[data-theme="light"][data-bg-tone="charcoal"] body {
    background: linear-gradient(135deg, #e8e8e8 0%, #f0f0f0 50%, #f5f5f5 100%);
    background-attachment: fixed;
  }

  /* Deep Purple → Lavender */
  :root[data-theme="light"][data-bg-tone="deep-purple"] body {
    background: linear-gradient(135deg, #e8e0f0 0%, #ede4f5 50%, #f2eaf8 100%);
    background-attachment: fixed;
  }

  /* Pure Black → White */
  :root[data-theme="light"][data-bg-tone="pure-black"] body {
    background: #ffffff;
    background-attachment: fixed;
  }

  /* Light stays light */
  :root[data-theme="light"][data-bg-tone="light"] body {
    background: linear-gradient(135deg, #fafbfc 0%, #f3f4f6 100%);
    background-attachment: fixed;
  }

  /* Ocean → Sky Blue */
  :root[data-theme="light"][data-bg-tone="ocean"] body {
    background: linear-gradient(135deg, #e0f0ff 0%, #e8f4ff 50%, #f0f8ff 100%);
    background-attachment: fixed;
  }

  /* Sunset → Rose/Blush */
  :root[data-theme="light"][data-bg-tone="sunset"] body {
    background: linear-gradient(135deg, #fce4ec 0%, #fdeef2 50%, #fff5f7 100%);
    background-attachment: fixed;
  }

  /* Forest → Mint */
  :root[data-theme="light"][data-bg-tone="forest"] body {
    background: linear-gradient(135deg, #e0f5e9 0%, #e8f8ef 50%, #f0fbf4 100%);
    background-attachment: fixed;
  }

  /* Midnight → Periwinkle */
  :root[data-theme="light"][data-bg-tone="midnight"] body {
    background: linear-gradient(135deg, #e8e8f8 0%, #ededfc 50%, #f2f2ff 100%);
    background-attachment: fixed;
  }

  /* Neon Dark → Soft Gray */
  :root[data-theme="light"][data-bg-tone="neon-dark"] body {
    background: linear-gradient(135deg, #f0f0f0 0%, #f5f5f5 50%, #fafafa 100%);
    background-attachment: fixed;
  }

  /* Slate → Light Steel */
  :root[data-theme="light"][data-bg-tone="slate"] body {
    background: linear-gradient(135deg, #e8ecf0 0%, #edf1f5 50%, #f2f5f8 100%);
    background-attachment: fixed;
  }
}

/* ===== STATIC BACKGROUND STYLES ===== */
/* These are theme-aware and use CSS variables for colors */

/* Gradient Background - True linear/radial gradients */
.bg-style-gradient {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(ellipse 80% 50% at 20% 40%, rgba(var(--primary-rgb), 0.25) 0%, transparent 50%),
    radial-gradient(ellipse 60% 40% at 80% 60%, rgba(var(--secondary-rgb), 0.20) 0%, transparent 50%),
    radial-gradient(ellipse 50% 30% at 50% 90%, rgba(var(--primary-rgb), 0.15) 0%, transparent 40%);
}

:root[data-theme="light"] .bg-style-gradient {
  background:
    radial-gradient(ellipse 80% 50% at 20% 40%, rgba(var(--primary-rgb), 0.08) 0%, transparent 50%),
    radial-gradient(ellipse 60% 40% at 80% 60%, rgba(var(--secondary-rgb), 0.06) 0%, transparent 50%);
}

:root[data-theme="carbon"] .bg-style-gradient {
  background:
    radial-gradient(ellipse 100% 60% at 50% 0%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
    radial-gradient(ellipse 80% 40% at 80% 80%, rgba(255, 255, 255, 0.02) 0%, transparent 40%);
}

/* Mesh Background - Multi-point mesh gradient (modern look) */
.bg-style-mesh {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(at 0% 0%, rgba(var(--primary-rgb), 0.35) 0%, transparent 50%),
    radial-gradient(at 100% 0%, rgba(var(--secondary-rgb), 0.25) 0%, transparent 50%),
    radial-gradient(at 100% 100%, rgba(var(--primary-rgb), 0.30) 0%, transparent 50%),
    radial-gradient(at 0% 100%, rgba(var(--secondary-rgb), 0.20) 0%, transparent 50%),
    radial-gradient(at 50% 50%, rgba(var(--primary-rgb), 0.08) 0%, transparent 70%);
}

:root[data-theme="light"] .bg-style-mesh {
  background:
    radial-gradient(at 0% 0%, rgba(var(--primary-rgb), 0.1) 0%, transparent 50%),
    radial-gradient(at 100% 0%, rgba(var(--secondary-rgb), 0.08) 0%, transparent 50%),
    radial-gradient(at 100% 100%, rgba(var(--primary-rgb), 0.1) 0%, transparent 50%),
    radial-gradient(at 0% 100%, rgba(var(--secondary-rgb), 0.06) 0%, transparent 50%);
}

:root[data-theme="carbon"] .bg-style-mesh {
  background:
    radial-gradient(at 0% 0%, rgba(255, 255, 255, 0.04) 0%, transparent 50%),
    radial-gradient(at 100% 0%, rgba(200, 200, 200, 0.03) 0%, transparent 50%),
    radial-gradient(at 100% 100%, rgba(255, 255, 255, 0.04) 0%, transparent 50%),
    radial-gradient(at 0% 100%, rgba(200, 200, 200, 0.03) 0%, transparent 50%);
}

/* Textured Background - Noise/grain texture overlay */
.bg-style-textured {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.bg-style-textured::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 60% 40% at 50% 30%, rgba(var(--primary-rgb), 0.08) 0%, transparent 60%);
}

.bg-style-textured::after {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0.4;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
  mix-blend-mode: overlay;
}

:root[data-theme="light"] .bg-style-textured::after {
  opacity: 0.15;
  mix-blend-mode: multiply;
}

:root[data-theme="carbon"] .bg-style-textured::after {
  opacity: 0.3;
}

/* Minimal Background - Subtle vignette only */
.bg-style-minimal {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background: radial-gradient(ellipse 100% 100% at 50% 50%, transparent 0%, rgba(0, 0, 0, 0.4) 100%);
}

:root[data-theme="light"] .bg-style-minimal {
  background: radial-gradient(ellipse 100% 100% at 50% 50%, transparent 0%, rgba(0, 0, 0, 0.05) 100%);
}

:root[data-theme="carbon"] .bg-style-minimal {
  background: radial-gradient(ellipse 100% 100% at 50% 50%, transparent 0%, rgba(0, 0, 0, 0.5) 100%);
}

@layer utilities {
  /* Theme-aware glassmorphism */
  .glass {
    background: rgba(var(--glass-bg), 0.12);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border: 1px solid hsl(var(--border) / 0.6);
    box-shadow:
      0 0 20px rgba(var(--primary-rgb), 0.2),
      inset 0 0 20px rgba(var(--primary-rgb), 0.08);
  }

  /* Light theme glass override */
  :root[data-theme="light"] .glass {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(0, 0, 0, 0.08);
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.04),
      0 1px 2px rgba(0, 0, 0, 0.06);
  }

  /* Carbon theme glass override */
  :root[data-theme="carbon"] .glass {
    background: rgba(30, 30, 30, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: none;
  }

  /* Amber theme glass override */
  :root[data-theme="amber"] .glass {
    background: rgba(40, 30, 50, 0.3);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 200, 87, 0.3);
    box-shadow:
      0 0 20px rgba(255, 200, 87, 0.15),
      inset 0 0 20px rgba(255, 200, 87, 0.05);
  }

  /* Ocean theme glass override */
  :root[data-theme="ocean"] .glass {
    background: rgba(0, 150, 180, 0.15);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border: 1px solid rgba(0, 212, 255, 0.4);
    box-shadow:
      0 0 20px rgba(0, 212, 255, 0.25),
      inset 0 0 20px rgba(0, 212, 255, 0.08);
  }

  /* Sunset theme glass override */
  :root[data-theme="sunset"] .glass {
    background: rgba(139, 31, 163, 0.2);
    backdrop-filter: blur(14px) saturate(170%);
    -webkit-backdrop-filter: blur(14px) saturate(170%);
    border: 1px solid rgba(255, 102, 51, 0.35);
    box-shadow:
      0 0 20px rgba(255, 102, 51, 0.2),
      inset 0 0 20px rgba(255, 77, 143, 0.06);
  }

  /* Forest theme glass override */
  :root[data-theme="forest"] .glass {
    background: rgba(13, 122, 61, 0.18);
    backdrop-filter: blur(14px) saturate(180%);
    -webkit-backdrop-filter: blur(14px) saturate(180%);
    border: 1px solid rgba(138, 255, 0, 0.35);
    box-shadow:
      0 0 20px rgba(138, 255, 0, 0.2),
      inset 0 0 20px rgba(138, 255, 0, 0.07);
  }

  /* Midnight theme glass override */
  :root[data-theme="midnight"] .glass {
    background: rgba(92, 31, 179, 0.25);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border: 1px solid rgba(255, 102, 255, 0.4);
    box-shadow:
      0 0 25px rgba(255, 102, 255, 0.25),
      inset 0 0 25px rgba(255, 102, 255, 0.1);
  }

  /* Neon theme glass override */
  :root[data-theme="neon"] .glass {
    background: rgba(255, 0, 153, 0.08);
    backdrop-filter: blur(20px) saturate(200%);
    -webkit-backdrop-filter: blur(20px) saturate(200%);
    border: 1px solid rgba(255, 0, 153, 0.5);
    box-shadow:
      0 0 30px rgba(255, 0, 153, 0.3),
      0 0 15px rgba(0, 191, 255, 0.2),
      inset 0 0 20px rgba(255, 0, 153, 0.05);
  }

  /* Slate theme glass override */
  :root[data-theme="slate"] .glass {
    background: rgba(51, 102, 163, 0.15);
    backdrop-filter: blur(12px) saturate(160%);
    -webkit-backdrop-filter: blur(12px) saturate(160%);
    border: 1px solid rgba(51, 179, 255, 0.3);
    box-shadow:
      0 0 20px rgba(51, 179, 255, 0.15),
      inset 0 0 20px rgba(51, 179, 255, 0.05);
  }

  .glass-dark {
    background: hsl(var(--glass-dark-bg) / 0.8);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border: 1px solid hsl(var(--border) / 0.5);
    box-shadow:
      0 0 15px rgba(var(--secondary-rgb), 0.2),
      inset 0 0 15px rgba(var(--secondary-rgb), 0.08);
  }

  /* Light theme glass-dark override */
  :root[data-theme="light"] .glass-dark {
    background: rgba(248, 250, 252, 0.95);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.06),
      0 2px 4px rgba(0, 0, 0, 0.08);
  }

  /* Carbon theme glass-dark override */
  :root[data-theme="carbon"] .glass-dark {
    background: rgba(20, 20, 20, 0.95);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: none;
  }

  /* Amber theme glass-dark override */
  :root[data-theme="amber"] .glass-dark {
    background: rgba(20, 20, 30, 0.85);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 200, 87, 0.25);
    box-shadow:
      0 0 15px rgba(255, 200, 87, 0.2),
      inset 0 0 15px rgba(255, 200, 87, 0.08);
  }

  /* High-opacity glass for readable overlays */
  .glass-overlay {
    background: hsl(var(--glass-overlay-bg) / 0.97);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid hsl(var(--border) / 0.6);
    box-shadow:
      0 0 20px rgba(var(--primary-rgb), 0.25),
      inset 0 0 20px rgba(var(--primary-rgb), 0.1);
  }

  /* Light theme glass-overlay override */
  :root[data-theme="light"] .glass-overlay {
    background: rgb(255, 255, 255);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(0, 0, 0, 0.12);
    box-shadow:
      0 8px 16px rgba(0, 0, 0, 0.1),
      0 2px 4px rgba(0, 0, 0, 0.08);
  }

  /* Carbon theme glass-overlay override */
  :root[data-theme="carbon"] .glass-overlay {
    background: rgb(15, 15, 15);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: none;
  }

  /* Amber theme glass-overlay override */
  :root[data-theme="amber"] .glass-overlay {
    background: rgba(25, 20, 35, 0.97);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 200, 87, 0.4);
    box-shadow:
      0 0 20px rgba(255, 200, 87, 0.25),
      inset 0 0 20px rgba(255, 200, 87, 0.1);
  }

  /* Theme-aware glow effect */
  .terminal-glow {
    text-shadow:
      0 0 10px rgba(var(--primary-rgb), 0.5),
      0 0 20px rgba(var(--primary-rgb), 0.3),
      0 0 30px rgba(var(--primary-rgb), 0.2);
  }

  /* Light theme glow override (subtle) */
  :root[data-theme="light"] .terminal-glow {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  /* Carbon theme glow override */
  :root[data-theme="carbon"] .terminal-glow {
    text-shadow:
      0 0 10px rgba(255, 255, 255, 0.3),
      0 0 20px rgba(255, 255, 255, 0.15);
  }

  .border-glow {
    box-shadow:
      0 0 10px rgba(var(--primary-rgb), 0.3),
      0 0 20px rgba(var(--primary-rgb), 0.1);
  }

  /* Light theme border-glow override */
  :root[data-theme="light"] .border-glow {
    box-shadow: 0 0 0 1px rgba(var(--primary-rgb), 0.2);
  }

  /* Carbon theme border-glow override */
  :root[data-theme="carbon"] .border-glow {
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.15);
  }

  /* Theme-aware gradient text - uses theme-specific gradients */
  .gradient-text-theme {
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    /* Default/Terminal theme - emerald to cyan */
    background-image: linear-gradient(to right, #34d399, #2dd4bf, #22d3ee);
  }

  /* Amber theme - gold to orange */
  :root[data-theme="amber"] .gradient-text-theme {
    background-image: linear-gradient(to right, #fbbf24, #fb923c, #f59e0b);
  }

  /* Carbon theme - white to gray */
  :root[data-theme="carbon"] .gradient-text-theme {
    background-image: linear-gradient(to right, #ffffff, #d4d4d4, #a3a3a3);
  }

  /* Light theme - blue to teal */
  :root[data-theme="light"] .gradient-text-theme {
    background-image: linear-gradient(to right, #0066cc, #0891b2, #06b6d4);
  }

  /* Ocean theme - aqua to cyan */
  :root[data-theme="ocean"] .gradient-text-theme {
    background-image: linear-gradient(to right, #00d4ff, #00e5cc, #22d3ee);
  }

  /* Sunset theme - orange to pink */
  :root[data-theme="sunset"] .gradient-text-theme {
    background-image: linear-gradient(to right, #ff6633, #ff4d8f, #f472b6);
  }

  /* Forest theme - lime to green */
  :root[data-theme="forest"] .gradient-text-theme {
    background-image: linear-gradient(to right, #8aff00, #73e600, #22c55e);
  }

  /* Midnight theme - magenta to purple */
  :root[data-theme="midnight"] .gradient-text-theme {
    background-image: linear-gradient(to right, #ff66ff, #ff4da6, #a855f7);
  }

  /* Neon theme - hot pink to cyan */
  :root[data-theme="neon"] .gradient-text-theme {
    background-image: linear-gradient(to right, #ff0099, #9933ff, #00bfff);
  }

  /* Slate theme - sky blue to steel */
  :root[data-theme="slate"] .gradient-text-theme {
    background-image: linear-gradient(to right, #33b3ff, #0d9ddb, #3b82f6);
  }

  /* Legacy: Amber theme gradient text overrides for hardcoded classes */
  :root[data-theme="amber"] .bg-gradient-to-r.from-emerald-400.text-transparent {
    background-image: linear-gradient(to right, #fbbf24, #fb923c, #f59e0b) !important;
  }

  /* Animated gradient effect */
  @keyframes gradient {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes gradient-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.85;
    }
  }

  .animate-gradient {
    background-size: 200% auto;
    animation: gradient 3s ease infinite;
  }

  .animate-gradient-fast {
    background-size: 200% auto;
    animation: gradient 2s ease infinite;
  }

  .animate-gradient-slow {
    background-size: 200% auto;
    animation: gradient 5s ease infinite;
  }

  .animate-gradient-pulse {
    animation: gradient 3s ease infinite, gradient-pulse 2s ease-in-out infinite;
    background-size: 200% auto;
  }

  /* Background animations for MasterBackground */
  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes gradient-rotate {
    0% {
      transform: rotate(0deg) scale(1.5);
    }
    100% {
      transform: rotate(360deg) scale(1.5);
    }
  }

  @keyframes gradient-rotate-reverse {
    0% {
      transform: rotate(360deg) scale(1.5);
    }
    100% {
      transform: rotate(0deg) scale(1.5);
    }
  }

  .animate-gradient-shift {
    background-size: 400% 400%;
    animation: gradient-shift 15s ease infinite;
  }

  .animate-gradient-rotate {
    animation: gradient-rotate 20s linear infinite;
  }

  .animate-gradient-rotate-reverse {
    animation: gradient-rotate-reverse 25s linear infinite;
  }

  .bg-gradient-radial {
    background: radial-gradient(circle at center, var(--tw-gradient-from), var(--tw-gradient-to));
  }

  /* Fix date input calendar icon for dark themes */
  input[type="date"]::-webkit-calendar-picker-indicator,
  input[type="datetime-local"]::-webkit-calendar-picker-indicator,
  input[type="time"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    opacity: 0.7;
    cursor: pointer;
  }

  input[type="date"]::-webkit-calendar-picker-indicator:hover,
  input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover,
  input[type="time"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  /* Light theme - don't invert */
  :root[data-theme="light"] input[type="date"]::-webkit-calendar-picker-indicator,
  :root[data-theme="light"] input[type="datetime-local"]::-webkit-calendar-picker-indicator,
  :root[data-theme="light"] input[type="time"]::-webkit-calendar-picker-indicator {
    filter: none;
  }

  /* Visible scrollbar for kanban boards and horizontal scroll areas */
  .scrollbar-visible {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--primary) / 0.3) transparent;
  }

  .scrollbar-visible::-webkit-scrollbar {
    height: 8px;
    width: 8px;
  }

  .scrollbar-visible::-webkit-scrollbar-track {
    background: hsl(var(--muted) / 0.2);
    border-radius: 4px;
  }

  .scrollbar-visible::-webkit-scrollbar-thumb {
    background: hsl(var(--primary) / 0.3);
    border-radius: 4px;
  }

  .scrollbar-visible::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--primary) / 0.5);
  }

  /* ===== JSON VIEWER SYNTAX HIGHLIGHTING ===== */
  /* Theme-aware colors using CSS variables */

  .json-viewer {
    line-height: 1.5;
  }

  .json-key {
    color: hsl(var(--primary));
  }

  .json-string {
    color: hsl(160 60% 55%); /* Teal/green for strings */
  }

  .json-number {
    color: hsl(200 100% 60%); /* Cyan for numbers */
  }

  .json-boolean {
    color: hsl(35 100% 55%); /* Amber for booleans */
  }

  .json-null {
    color: hsl(var(--muted-foreground));
    font-style: italic;
  }

  .json-punctuation {
    color: hsl(var(--muted-foreground));
  }

  .json-bracket {
    color: hsl(var(--foreground) / 0.7);
  }

  .json-collapsed {
    cursor: pointer;
  }

  /* Light theme adjustments */
  :root[data-theme="light"] .json-key {
    color: hsl(211 100% 40%); /* Blue for keys */
  }

  :root[data-theme="light"] .json-string {
    color: hsl(160 70% 35%); /* Darker teal */
  }

  :root[data-theme="light"] .json-number {
    color: hsl(250 80% 50%); /* Purple for numbers */
  }

  :root[data-theme="light"] .json-boolean {
    color: hsl(25 90% 45%); /* Orange for booleans */
  }

  /* Carbon theme adjustments */
  :root[data-theme="carbon"] .json-key {
    color: hsl(0 0% 90%); /* Light gray */
  }

  :root[data-theme="carbon"] .json-string {
    color: hsl(0 0% 70%); /* Medium gray */
  }

  :root[data-theme="carbon"] .json-number {
    color: hsl(0 0% 80%); /* Lighter gray */
  }

  :root[data-theme="carbon"] .json-boolean {
    color: hsl(0 0% 85%); /* Almost white */
  }

  /* Amber theme adjustments */
  :root[data-theme="amber"] .json-key {
    color: hsl(40 100% 67%); /* Golden amber */
  }

  :root[data-theme="amber"] .json-string {
    color: hsl(30 80% 60%); /* Orange-ish */
  }

  :root[data-theme="amber"] .json-number {
    color: hsl(50 100% 65%); /* Yellow */
  }

  :root[data-theme="amber"] .json-boolean {
    color: hsl(20 90% 60%); /* Coral */
  }

  /* Ocean theme adjustments */
  :root[data-theme="ocean"] .json-string {
    color: hsl(173 100% 45%); /* Bright cyan */
  }

  :root[data-theme="ocean"] .json-number {
    color: hsl(200 100% 65%); /* Sky blue */
  }

  /* Sunset theme adjustments */
  :root[data-theme="sunset"] .json-string {
    color: hsl(340 90% 65%); /* Pink */
  }

  :root[data-theme="sunset"] .json-number {
    color: hsl(30 100% 60%); /* Orange */
  }

  /* Forest theme adjustments */
  :root[data-theme="forest"] .json-string {
    color: hsl(100 70% 50%); /* Bright green */
  }

  :root[data-theme="forest"] .json-number {
    color: hsl(140 60% 55%); /* Teal-green */
  }

  /* Midnight theme adjustments */
  :root[data-theme="midnight"] .json-string {
    color: hsl(310 80% 70%); /* Light magenta */
  }

  :root[data-theme="midnight"] .json-number {
    color: hsl(270 90% 70%); /* Purple */
  }

  /* Neon theme adjustments */
  :root[data-theme="neon"] .json-string {
    color: hsl(185 100% 50%); /* Electric cyan */
  }

  :root[data-theme="neon"] .json-number {
    color: hsl(270 100% 60%); /* Electric purple */
  }

  :root[data-theme="neon"] .json-boolean {
    color: hsl(320 100% 60%); /* Hot pink */
  }

  /* Slate theme adjustments */
  :root[data-theme="slate"] .json-string {
    color: hsl(195 90% 55%); /* Cyan-blue */
  }

  :root[data-theme="slate"] .json-number {
    color: hsl(210 80% 65%); /* Light blue */
  }

  /* ===== MARKDOWN PREVIEW STYLES ===== */
  /* Theme-aware markdown rendering for Quick Notes */

  .md-preview {
    line-height: 1.7;
    font-size: 0.9375rem;
  }

  /* Headers */
  .md-h1 {
    font-size: 1.875rem;
    font-weight: 700;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    color: hsl(var(--foreground));
    border-bottom: 1px solid hsl(var(--border) / 0.3);
    padding-bottom: 0.5rem;
  }

  .md-h2 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-top: 1.25rem;
    margin-bottom: 0.5rem;
    color: hsl(var(--foreground));
  }

  .md-h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    color: hsl(var(--foreground));
  }

  .md-h4 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    color: hsl(var(--foreground));
  }

  /* Header glow for dark themes */
  .md-h1, .md-h2 {
    text-shadow: 0 0 20px rgba(var(--primary-rgb), 0.15);
  }

  :root[data-theme="light"] .md-h1,
  :root[data-theme="light"] .md-h2 {
    text-shadow: none;
  }

  /* Paragraphs */
  .md-p {
    margin: 0.75rem 0;
    color: hsl(var(--foreground) / 0.9);
  }

  /* Bold and Italic */
  .md-strong {
    font-weight: 600;
    color: hsl(var(--foreground));
  }

  .md-em {
    font-style: italic;
    color: hsl(var(--primary));
  }

  .md-del {
    text-decoration: line-through;
    color: hsl(var(--muted-foreground));
  }

  /* Links */
  .md-link {
    color: hsl(var(--primary));
    text-decoration: none;
    border-bottom: 1px solid hsl(var(--primary) / 0.3);
    transition: all 0.2s ease;
  }

  .md-link:hover {
    border-bottom-color: hsl(var(--primary));
    text-shadow: 0 0 10px rgba(var(--primary-rgb), 0.3);
  }

  :root[data-theme="light"] .md-link:hover {
    text-shadow: none;
  }

  /* Inline code */
  .md-code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 0.875em;
    padding: 0.2em 0.4em;
    border-radius: 0.25rem;
    background: hsl(var(--muted));
    color: hsl(var(--primary));
    border: 1px solid hsl(var(--border) / 0.3);
  }

  /* Code blocks */
  .md-pre {
    margin: 1rem 0;
    padding: 1rem;
    border-radius: 0.5rem;
    background: hsl(var(--muted) / 0.5);
    border: 1px solid hsl(var(--border) / 0.3);
    overflow-x: auto;
    white-space: pre;
    line-height: 1.5;
  }

  .md-pre .md-code-block {
    display: block;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 0.875rem;
    line-height: 1.5;
    color: hsl(var(--foreground) / 0.9);
    white-space: pre;
    margin: 0;
    padding: 0;
  }

  /* Blockquotes */
  .md-blockquote {
    margin: 1rem 0;
    padding: 0.75rem 1rem;
    border-left: 3px solid hsl(var(--primary));
    background: hsl(var(--primary) / 0.05);
    border-radius: 0 0.25rem 0.25rem 0;
    font-style: italic;
    color: hsl(var(--muted-foreground));
  }

  /* Lists */
  .md-li {
    margin: 0.25rem 0;
    margin-left: 1.5rem;
    padding-left: 0.25rem;
    position: relative;
  }

  .md-li::before {
    content: "•";
    position: absolute;
    left: -1rem;
    color: hsl(var(--primary));
  }

  .md-li-ordered::before {
    content: none;
  }

  .md-li-ordered {
    list-style-type: decimal;
  }

  /* Task lists */
  .md-task {
    margin: 0.375rem 0;
    margin-left: 1.5rem;
    padding-left: 0.25rem;
    list-style: none;
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
  }

  .md-task::before {
    content: none;
  }

  .md-checkbox {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.125rem;
    height: 1.125rem;
    border-radius: 0.25rem;
    border: 1.5px solid hsl(var(--border));
    font-size: 0.75rem;
    flex-shrink: 0;
    margin-top: 0.125rem;
  }

  .md-task-done .md-checkbox {
    background: hsl(var(--primary));
    border-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
  }

  .md-task-done {
    color: hsl(var(--muted-foreground));
    text-decoration: line-through;
  }

  /* Horizontal rules */
  .md-hr {
    margin: 1.5rem 0;
    border: none;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      hsl(var(--border)),
      hsl(var(--primary) / 0.5),
      hsl(var(--border)),
      transparent
    );
  }

  /* Images */
  .md-img {
    max-width: 100%;
    height: auto;
    border-radius: 0.5rem;
    margin: 1rem 0;
    border: 1px solid hsl(var(--border) / 0.3);
  }

  /* ===== THEME-SPECIFIC MARKDOWN OVERRIDES ===== */

  /* Light theme */
  :root[data-theme="light"] .md-pre {
    background: hsl(var(--muted) / 0.7);
  }

  :root[data-theme="light"] .md-blockquote {
    background: hsl(var(--primary) / 0.08);
  }

  :root[data-theme="light"] .md-hr {
    background: linear-gradient(
      to right,
      transparent,
      hsl(var(--border)),
      hsl(var(--primary) / 0.3),
      hsl(var(--border)),
      transparent
    );
  }

  /* Carbon theme - minimal, no colors */
  :root[data-theme="carbon"] .md-em {
    color: hsl(var(--foreground));
  }

  :root[data-theme="carbon"] .md-li::before {
    color: hsl(var(--foreground) / 0.6);
  }

  :root[data-theme="carbon"] .md-blockquote {
    border-left-color: hsl(var(--foreground) / 0.3);
    background: hsl(var(--muted) / 0.3);
  }

  /* Neon theme - extra glow */
  :root[data-theme="neon"] .md-h1,
  :root[data-theme="neon"] .md-h2 {
    text-shadow: 0 0 30px rgba(var(--primary-rgb), 0.4);
  }

  :root[data-theme="neon"] .md-link:hover {
    text-shadow: 0 0 15px rgba(var(--primary-rgb), 0.5);
  }

  :root[data-theme="neon"] .md-code {
    box-shadow: 0 0 10px rgba(var(--primary-rgb), 0.2);
  }

  /* Amber theme */
  :root[data-theme="amber"] .md-em {
    color: hsl(30 90% 65%);
  }

  /* Ocean theme */
  :root[data-theme="ocean"] .md-em {
    color: hsl(173 100% 50%);
  }

  /* Sunset theme */
  :root[data-theme="sunset"] .md-em {
    color: hsl(340 90% 65%);
  }

  /* Forest theme */
  :root[data-theme="forest"] .md-em {
    color: hsl(100 80% 55%);
  }

  /* Midnight theme */
  :root[data-theme="midnight"] .md-em {
    color: hsl(310 90% 70%);
  }

  /* Slate theme */
  :root[data-theme="slate"] .md-em {
    color: hsl(195 90% 60%);
  }

  /* ===== MOBILE VIEWPORT HANDLING ===== */
  /* Handle mobile browser viewport changes (keyboard, address bar) */

  /* Prevent horizontal overflow on mobile */
  .overflow-x-clip {
    overflow-x: clip;
  }

  /* Touch-friendly scrolling */
  .touch-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* Prevent text selection on interactive elements */
  .no-select {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* Mobile-safe fixed positioning */
  @supports (height: 100dvh) {
    .h-screen-safe {
      height: 100dvh;
    }
    .min-h-screen-safe {
      min-height: 100dvh;
    }
    .max-h-screen-safe {
      max-height: 100dvh;
    }
  }

  @supports not (height: 100dvh) {
    .h-screen-safe {
      height: 100vh;
      height: -webkit-fill-available;
    }
    .min-h-screen-safe {
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }
    .max-h-screen-safe {
      max-height: 100vh;
      max-height: -webkit-fill-available;
    }
  }
}
